(window.webpackJsonpRunnerClient=window.webpackJsonpRunnerClient||[]).push([[1],{152:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(164).SPEFileDrop,a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"register",value:function(){Promise.resolve(i.register(window))}}]),e}();e.exports={default:a,Components:a}},153:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getExtension",value:function(e){return(e.toLowerCase().match(/^[^.].*(\.\w+)$/)||[])[1]}},{key:"getFileName",value:function(e){return e.replace(/^[\w\W]*[/\\]/,"")}}]),e}();e.exports={FileValidationService:i}},154:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(3),a=i.VALID_THUMBNAIL_FILE_EXTENSIONS,o=i.MAX_THUMBNAIL_SIZE,l=t(153).FileValidationService,s=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"containsValidExtension",value:function(e){return a.includes(l.getExtension(e))}},{key:"isValidFileSize",value:function(e){return e<=o}},{key:"valid",value:function(e){return this.containsValidExtension(e.name)&&this.isValidFileSize(e.size)}}]),e}();e.exports={ThumbnailValidationService:s}},155:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(3).UNSUPPORTED_FILE_EXTENSIONS,a=t(153).FileValidationService,o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"containsValidCharacters",value:function(e){return!/:|\/|"|;|'|\?|!|>|<|&|\||\*|@/.test(e)}},{key:"containsExtension",value:function(e){return!!a.getExtension(e)}},{key:"containsValidExtension",value:function(e){return!i.includes(a.getExtension(e))}},{key:"valid",value:function(e,n){return n?this.containsValidCharacters(e):this.containsValidCharacters(e)&&this.containsExtension(e)&&this.containsValidExtension(e)}}]),e}();e.exports={FileNameValidationService:o}},156:function(e,n,t){"use strict";var r=t(155).FileNameValidationService,i=t(153).FileValidationService,a=t(154).ThumbnailValidationService;e.exports={FileFactory:function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.fileName=i.getFileName(n.name),this.fullFilePath=n.name,this.processing=!1,this.size=n.size,this.fileObj=n,this.hasValidCharacters=r.containsValidCharacters(this.fileName),this.hasExtension=r.containsExtension(this.fileName),this.hasValidExtension=r.containsValidExtension(this.fileName),this.valid=function(){return r.valid(this.fileName,this.fileObj.doesNotRequireExtension)},this.validThumbnail=function(){var e=this.valid(),t=a.valid(n);return e&&t}}}},157:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(156).FileFactory,a=t(3).MAX_UPLOAD_COUNT,o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"addFiles",value:function(e,n){var t=this;return new Promise(function(r,o){n=t.removeDuplicates(e,n),e.length+n.length>a&&o({error:"[RunnerClient] Too many files added. Uploads can have a maximum of "+a+" files."});for(var l=0,s=n.length;l<s;l++){if(e.length>=config.aspera.limit){announcerService.fileUploadLengthInvalid({numCurrentFiles:e.length});break}var c=new i(n[l]);e.unshift(c)}announcerService.fileUploadServiceFileAdded({currentFiles:e,fileWasAdded:n.length}),currentStateService.includesUploadState()&&announcerService.fileUploadServiceAdvancedUploadFileAdded({currentFiles:e,fileWasAdded:n.length})})}},{key:"getFileAtIndex",value:function(e,n){return e[n]}},{key:"getFileNameIndex",value:function(e,n){return n.indexOf(e)}},{key:"getFullFilePaths",value:function(e){return e.map(function(e){return e.fullFilePath})}},{key:"getFileNames",value:function(e){return e.map(function(e){return e.fileName})}},{key:"getStatuses",value:function(e){return e.map(function(e){return e.status})}},{key:"removeDuplicates",value:function(e,n){var t=e.map(function(e){return e.fullFilePath}),r=[];return n.forEach(function(e){-1===t.indexOf(e.name)&&r.push(e)}),r}},{key:"removeFile",value:function(e,n){var t=this.getFullFilePaths(e),r=this.getFileNameIndex(n.fullFilePath,t);this.getFileAtIndex(e,r)&&(e.splice(r,1),announcerService.fileUploadServiceFileRemoved({currentFiles:e}),currentStateService.includesUploadState()&&announcerService.fileUploadServiceAdvancedUploadFileRemoved({currentFiles:e}))}},{key:"someFilesValid",value:function(e){return e.length&&e.some(function(e){return e.valid()})}},{key:"allFilesValid",value:function(e){return e.length&&e.length===this.validFileCount(e)}},{key:"validFileCount",value:function(e){return e.filter(function(e){return e.valid()}).length}}]),e}();e.exports={FileUploadService:o}},158:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(25).Config,a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"info",value:function(){var e;i.logLevelInt>=2&&(e=console).info.apply(e,arguments)}},{key:"warn",value:function(){var e;i.logLevelInt>=1&&(e=console).warn.apply(e,arguments)}},{key:"debug",value:function(){var e;i.logLevelInt>=3&&(e=console).log.apply(e,arguments)}}]),e}();e.exports={LogService:a}},159:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=window.AW4,a={transfer:[],transferComplete:[],status:[],start:[]},o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"initialize",value:function(){this._connect=new i.Connect({id:"RunnerClient"+Math.floor(1e4*Math.random()),dragDropEnabled:!0,minVersion:"3.7.4"}),this.connectInstaller=new i.ConnectInstaller,this._connect.addEventListener(i.Connect.EVENT.STATUS,this._handleAsperaEvent.bind(this)),this.activeTransfers={},this.uploadBatchCount=0}},{key:"start",value:function(e,n){var t=this;this.connect.addEventListener(i.Connect.EVENT.TRANSFER,this._handleAsperaEvent.bind(this));var r=[],a=[];return e.forEach(function(e){var i=new Promise(function(r,i){var o=t.connect.startTransfer(e,n,{success:r,error:i});if(o.error)i(o.error);else{var l=e.token;a.push(l)}});r.push(i)}),this.uploadBatchCount+=1,this.activeTransfers[this.uploadBatchCount]=a,{id:this.uploadBatchCount,promise:Promise.all(r)}}},{key:"_handleAsperaEvent",value:function(e,n){e===i.Connect.EVENT.STATUS&&this._handleAsperaStatusEvent(n),e===i.Connect.EVENT.TRANSFER&&this._handleAsperaTransferEvent(n)}},{key:"_executeEventListenersFor",value:function(e,n){this.eventCallbacks[e].forEach(function(e){return e(n)})}},{key:"_handleAsperaStatusEvent",value:function(e){switch(this._executeEventListenersFor("status",e),e){case i.Connect.STATUS.INITIALIZING:case i.Connect.STATUS.RETRYING:this.connectInstaller.showLaunching();break;case i.Connect.STATUS.FAILED:this.connectInstaller.showDownload();break;case i.Connect.STATUS.OUTDATED:this.connectInstaller.showUpdate();break;case i.Connect.STATUS.RUNNING:this.connectInstaller.connected()}}},{key:"_handleAsperaTransferEvent",value:function(e){var n=this;console.log("Recieved transfer event...",e),e.result_count>0&&e.transfers.forEach(function(e){if(e.transfer_spec){n._executeEventListenersFor("transfer",e);var t=n._getTransferDataFor(e);if(t&&1===e.percentage){var r=n.activeTransfers[t.id];r.splice(t.index,1),0===r.length&&delete n.activeTransfers[t.id],n._executeEventListenersFor("transferComplete",{transfer:e,id:t.id,token:t.token,isBatchComplete:!r.length})}}}),this.hasActiveTransfers||this._removeTransferListener()}},{key:"_getTransferDataFor",value:function(e){for(var n in this.activeTransfers)if(this.activeTransfers.hasOwnProperty(n)){var t=this.activeTransfers[n];if(t){var r=e.transfer_spec.token,i=t.indexOf(r);if(-1!==i)return{id:n,token:r,index:i}}}}},{key:"_removeTransferListener",value:function(){this.connect.removeEventListener(i.Connect.EVENT.TRANSFER)}},{key:"eventCallbacks",set:function(e){this._eventCallbacks=Object.assign({},a,e)},get:function(){return this._eventCallbacks||(this._eventCallbacks=Object.assign({},a)),this._eventCallbacks}},{key:"connect",get:function(){return this._connect||this.initialize(),this._connect}},{key:"hasActiveTransfers",get:function(){return!!Object.keys(this.activeTransfers).length}}]),e}();e.exports={AsperaConnectService:o}},160:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(159).AsperaConnectService,a=t(158).LogService,o=window.AW4,l={all:[],dragEnter:[],dragLeave:[],dragOver:[],drop:[]},s=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"addTarget",value:function(e,n){i.connect.initSession(),this.target=e;var t=Object.assign({},l,n),r=!!t.all.length;(t.dragEnter.length||r)&&(this._dragEnterCallback=this.dragEnterCallback.bind(this),e.addEventListener("dragenter",this._dragEnterCallback)),(t.dragLeave.length||r)&&(this._dragLeaveCallback=this.dragLeaveCallback.bind(this),e.addEventListener("dragleave",this._dragLeaveCallback)),(t.dragOver.length||t.drop.length||r)&&(this._dragOverCallback=this.dragOverCallback.bind(this),e.addEventListener("dragover",this._dragOverCallback)),(t.drop.length||r)&&(this._dropCallback=this.dropCallback.bind(this),e.addEventListener("drop",this._dropCallback)),this.eventCallbacks=t}},{key:"reset",value:function(){this.target.removeEventListener("dragenter",this._dragEnterCallback),this.target.removeEventListener("dragleave",this._dragLeaveCallback),this.target.removeEventListener("dragover",this._dragOverCallback),this.target.removeEventListener("drop",this._dropCallback),this.eventCallbacks=Object.assign({},l),this._target=void 0}},{key:"dragEnterCallback",value:function(e){e.stopPropagation(),e.preventDefault(),this._executeEventCallbacksFor("dragEnter",{event:e})}},{key:"dragLeaveCallback",value:function(e){e.stopPropagation(),e.preventDefault(),this._executeEventCallbacksFor("dragLeave",{event:e})}},{key:"dragOverCallback",value:function(e){e.stopPropagation(),e.preventDefault(),this._executeEventCallbacksFor("dragOver",{event:e})}},{key:"dropCallback",value:function(e){var n=this;e.stopPropagation(),e.preventDefault();var t=this._groupedFolderContents(e),r=e.dataTransfer.files,a={dataTransfer:{}};a.dataTransfer.files=[];for(var l=0;l<r.length;l++){var s={lastModifiedDate:r[l].lastModifiedDate,name:r[l].name,size:r[l].size,type:r[l].type};a.dataTransfer.files.push(s)}i.connect.connectHttpRequest(o.Connect.HTTP_METHOD.POST,"/connect/file/dropped-files",a,o.Utils.SESSION_ID,{success:function(r){n._executeEventCallbacksFor("drop",{event:e,files:r,dragDropManifestGrouping:t})}})}},{key:"_executeEventCallbacksFor",value:function(e,n){this.eventCallbacks[e].forEach(function(e){e(n)}),this.eventCallbacks.all.forEach(function(e){e(n)})}},{key:"_groupedFolderContents",value:function(e){for(var n={},t=function(t){var r=e.dataTransfer.items[t].webkitGetAsEntry();r.isDirectory&&r.createReader().readEntries(function(e){n[r.name]=function e(n,t,r){return n.forEach(function(n){n.isDirectory?function(t){n.createReader().readEntries(function(n){e(n,t,r)},function(e){a.warn("Failed to read directory contents for "+n.fullPath,e)})}(n.fullPath||t):r.push(t+"/"+n.name)}),r}(e,r.fullPath,[])},function(e){a.warn("Failed to read directory contents for "+r.fullPath,e)})},r=0;r<e.dataTransfer.items.length;r++)t(r);return n}},{key:"target",get:function(){return this._target},set:function(e){if(this._target)throw new Error("[RunnerClient.AsperaDragDropService] Cannot set more than one target!");this._target=e}}]),e}();e.exports={AsperaDragDropService:s}},162:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=t(161),a=t(25).Config,o=t(50).default,l=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"translate",value:function(){var e;return this.i18n||this._configureI18n(),(e=this.i18n).t.apply(e,arguments)}},{key:"_configureI18n",value:function(){i.translations=o,i.locale=a.locale,this.i18n=i}}]),e}();e.exports={TranslationService:l}},163:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function i(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(i.prototype,HTMLElement.prototype),Object.setPrototypeOf(i,HTMLElement);var a,o=t(162).TranslationService,l={scope:"SPEFileDrop.Incoming"},s=document.createElement("template");s.innerHTML="\n  <style>\n    :host {\n      align-items: center;\n      display: none;\n      height: 100%;\n      justify-content: center;\n      position: absolute;\n      width: 100%;\n    }\n  </style>\n  <h1>"+(a="headingText",o.translate(a,l))+"</h1>\n",window.ShadyCSS&&window.ShadyCSS.prepareTemplate(s,"spe-file-drop--incoming");var c=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.attachShadow({mode:"open"}).appendChild(s.content.cloneNode(!0)),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i),r(n,null,[{key:"elName",get:function(){return"spe-file-drop--incoming"}}]),r(n,null,[{key:"register",value:function(){window&&window.customElements&&window.customElements.define(this.elName,this)}}]),n}();c.register(),e.exports={SPEFileDrop__Incoming:c}},164:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function i(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(i.prototype,HTMLElement.prototype),Object.setPrototypeOf(i,HTMLElement),t(163);var a=t(160).AsperaDragDropService,o=t(157).FileUploadService,l=document.createElement("template");l.innerHTML="\n  <style>\n    :host {\n      display: block;\n      position: relative;\n      border: 1px solid #999;\n      height: 500px;\n      width: 500px;\n      background: #ccc;\n    }\n\n    :host[incoming] spe-file-drop--incoming {\n      display: flex;\n      z-index: 10;\n    }\n  </style>\n  Hello from spe-file-drop!\n  <spe-file-drop--incoming></spe-file-drop--incoming>\n",window.ShadyCSS&&window.ShadyCSS.prepareTemplate(l,"spe-file-drop");var s=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.attachShadow({mode:"open"}).appendChild(l.content.cloneNode(!0)),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i),r(n,null,[{key:"elName",get:function(){return"spe-file-drop"}}]),r(n,[{key:"connectedCallback",value:function(){var e=this;a.addTarget(this,{dragEnter:[function(){e.incoming=!0}],dragLeave:[function(){e.incoming=!1}],drop:[function(n){e.incoming=!1,o.addFiles(e.files,n).then(e._emitFilesAddedEvent,e._emitAddFilesFailedEvent),console.log("addFiles",n)}]})}},{key:"disconnectedCallback",value:function(){a.reset()}},{key:"attributeChangedCallback",value:function(e,n,t){}},{key:"incoming",get:function(){return this.hasAttribute("incoming")},set:function(e){e?this.setAttribute("incoming",""):this.removeAttribute("incoming")}},{key:"files",get:function(){return this._files||(this._files=[]),this._files}}],[{key:"register",value:function(){window.customElements.define(this.elName,this)}},{key:"observedAttributes",get:function(){return["incoming"]}}]),n}();s.register(),e.exports={SPEFileDrop:s}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvY29tcG9uZW50cy5qcyIsIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvc2VydmljZXMvZmlsZV92YWxpZGF0aW9uX3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL3NlcnZpY2VzL3RodW1ibmFpbF92YWxpZGF0aW9uX3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL3NlcnZpY2VzL2ZpbGVfbmFtZV92YWxpZGF0aW9uX3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL3NlcnZpY2VzL2ZpbGVfZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvc2VydmljZXMvZmlsZV91cGxvYWRfc2VydmljZS5qcyIsIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvc2VydmljZXMvbG9nX3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL3NlcnZpY2VzL2FzcGVyYV9jb25uZWN0X3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL3NlcnZpY2VzL2FzcGVyYV9kcmFnX2Ryb3Bfc2VydmljZS5qcyIsIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvc2VydmljZXMvdHJhbnNsYXRpb25fc2VydmljZS5qcyIsIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9zcmMvY29tcG9uZW50cy9zcGVfZmlsZV9kcm9wL19faW5jb21pbmcuanMiLCJ3ZWJwYWNrOi8vUnVubmVyQ2xpZW50Ly4vc3JjL2NvbXBvbmVudHMvc3BlX2ZpbGVfZHJvcC5qcyJdLCJuYW1lcyI6WyJTUEVGaWxlRHJvcCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJDb21wb25lbnRzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWdpc3RlciIsIndpbmRvdyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwiRmlsZVZhbGlkYXRpb25TZXJ2aWNlIiwiZmlsZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoIiwiZmlsZVBhdGgiLCJyZXBsYWNlIiwiVkFMSURfVEhVTUJOQUlMX0ZJTEVfRVhURU5TSU9OUyIsIk1BWF9USFVNQk5BSUxfU0laRSIsIlRodW1ibmFpbFZhbGlkYXRpb25TZXJ2aWNlIiwiaW5jbHVkZXMiLCJnZXRFeHRlbnNpb24iLCJmaWxlU2l6ZSIsImZpbGUiLCJ0aGlzIiwiY29udGFpbnNWYWxpZEV4dGVuc2lvbiIsIm5hbWUiLCJpc1ZhbGlkRmlsZVNpemUiLCJzaXplIiwiVU5TVVBQT1JURURfRklMRV9FWFRFTlNJT05TIiwiRmlsZU5hbWVWYWxpZGF0aW9uU2VydmljZSIsInRlc3QiLCJkb2VzTm90UmVxdWlyZUV4dGVuc2lvbiIsImNvbnRhaW5zVmFsaWRDaGFyYWN0ZXJzIiwiY29udGFpbnNFeHRlbnNpb24iLCJGaWxlRmFjdG9yeSIsIl9jbGFzc0NhbGxDaGVjayIsImdldEZpbGVOYW1lIiwiZnVsbEZpbGVQYXRoIiwicHJvY2Vzc2luZyIsImZpbGVPYmoiLCJoYXNWYWxpZENoYXJhY3RlcnMiLCJoYXNFeHRlbnNpb24iLCJoYXNWYWxpZEV4dGVuc2lvbiIsInZhbGlkIiwidmFsaWRUaHVtYm5haWwiLCJ2YWxpZEZpbGUiLCJNQVhfVVBMT0FEX0NPVU5UIiwiRmlsZVVwbG9hZFNlcnZpY2UiLCJjdXJyZW50RmlsZXMiLCJmaWxlTGlzdCIsIl90aGlzIiwicmVqZWN0IiwicmVtb3ZlRHVwbGljYXRlcyIsImxlbmd0aCIsImVycm9yIiwiaSIsImNvbmZpZyIsImFzcGVyYSIsImxpbWl0IiwiYW5ub3VuY2VyU2VydmljZSIsImZpbGVVcGxvYWRMZW5ndGhJbnZhbGlkIiwibnVtQ3VycmVudEZpbGVzIiwidW5zaGlmdCIsImZpbGVVcGxvYWRTZXJ2aWNlRmlsZUFkZGVkIiwiZmlsZVdhc0FkZGVkIiwiY3VycmVudFN0YXRlU2VydmljZSIsImluY2x1ZGVzVXBsb2FkU3RhdGUiLCJmaWxlVXBsb2FkU2VydmljZUFkdmFuY2VkVXBsb2FkRmlsZUFkZGVkIiwiZmlsZXMiLCJpbmRleCIsImZpbGVOYW1lcyIsImluZGV4T2YiLCJtYXAiLCJzdGF0dXMiLCJuZXdGaWxlTGlzdCIsImV4aXN0aW5nRmlsZU5hbWVzIiwidW5pcXVlRmlsZUxpc3QiLCJmb3JFYWNoIiwicHVzaCIsImZpbGVQYXRocyIsImdldEZ1bGxGaWxlUGF0aHMiLCJmaWxlTmFtZUluZGV4IiwiZ2V0RmlsZU5hbWVJbmRleCIsImdldEZpbGVBdEluZGV4Iiwic3BsaWNlIiwiZmlsZVVwbG9hZFNlcnZpY2VGaWxlUmVtb3ZlZCIsImZpbGVVcGxvYWRTZXJ2aWNlQWR2YW5jZWRVcGxvYWRGaWxlUmVtb3ZlZCIsInNvbWUiLCJ2YWxpZEZpbGVDb3VudCIsImZpbHRlciIsIkNvbmZpZyIsIkxvZ1NlcnZpY2UiLCJfY29uc29sZSIsImxvZ0xldmVsSW50IiwiY29uc29sZSIsImluZm8iLCJhcHBseSIsImFyZ3VtZW50cyIsIl9jb25zb2xlMiIsIndhcm4iLCJfY29uc29sZTMiLCJsb2ciLCJBVzQiLCJERUZBVUxUX0VWRU5UX0NBTExCQUNLUyIsInRyYW5zZmVyIiwidHJhbnNmZXJDb21wbGV0ZSIsInN0YXJ0IiwiQXNwZXJhQ29ubmVjdFNlcnZpY2UiLCJfY29ubmVjdCIsIkNvbm5lY3QiLCJpZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImRyYWdEcm9wRW5hYmxlZCIsIm1pblZlcnNpb24iLCJjb25uZWN0SW5zdGFsbGVyIiwiQ29ubmVjdEluc3RhbGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJFVkVOVCIsIlNUQVRVUyIsIl9oYW5kbGVBc3BlcmFFdmVudCIsImJpbmQiLCJhY3RpdmVUcmFuc2ZlcnMiLCJ1cGxvYWRCYXRjaENvdW50IiwidHJhbnNmZXJTcGVjcyIsImNvbm5lY3Rpb25TZXR0aW5ncyIsImNvbm5lY3QiLCJUUkFOU0ZFUiIsImFsbFByb21pc2VzIiwidG9rZW5zIiwidHJhbnNmZXJTcGVjIiwicHJvbWlzZSIsInJlc3VsdCIsInN0YXJ0VHJhbnNmZXIiLCJzdWNjZXNzIiwidG9rZW4iLCJhbGwiLCJldmVudE5hbWUiLCJldmVudERhdGEiLCJfaGFuZGxlQXNwZXJhU3RhdHVzRXZlbnQiLCJfaGFuZGxlQXNwZXJhVHJhbnNmZXJFdmVudCIsImV2ZW50Q2FsbGJhY2tzIiwiY2IiLCJfZXhlY3V0ZUV2ZW50TGlzdGVuZXJzRm9yIiwiSU5JVElBTElaSU5HIiwiUkVUUllJTkciLCJzaG93TGF1bmNoaW5nIiwiRkFJTEVEIiwic2hvd0Rvd25sb2FkIiwiT1VUREFURUQiLCJzaG93VXBkYXRlIiwiUlVOTklORyIsImNvbm5lY3RlZCIsIl90aGlzMiIsInJlc3VsdF9jb3VudCIsInRyYW5zZmVycyIsInRyYW5zZmVyX3NwZWMiLCJkYXRhIiwiX2dldFRyYW5zZmVyRGF0YUZvciIsInBlcmNlbnRhZ2UiLCJpc0JhdGNoQ29tcGxldGUiLCJoYXNBY3RpdmVUcmFuc2ZlcnMiLCJfcmVtb3ZlVHJhbnNmZXJMaXN0ZW5lciIsImhhc093blByb3BlcnR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9ldmVudENhbGxiYWNrcyIsIk9iamVjdCIsImFzc2lnbiIsImluaXRpYWxpemUiLCJrZXlzIiwiZHJhZ0VudGVyIiwiZHJhZ0xlYXZlIiwiZHJhZ092ZXIiLCJkcm9wIiwiQXNwZXJhRHJhZ0Ryb3BTZXJ2aWNlIiwidGFyZ2V0IiwiaW5pdFNlc3Npb24iLCJjYWxsYmFja3MiLCJyZWdpc3RlckFsbCIsIl9kcmFnRW50ZXJDYWxsYmFjayIsImRyYWdFbnRlckNhbGxiYWNrIiwiX2RyYWdMZWF2ZUNhbGxiYWNrIiwiZHJhZ0xlYXZlQ2FsbGJhY2siLCJfZHJhZ092ZXJDYWxsYmFjayIsImRyYWdPdmVyQ2FsbGJhY2siLCJfZHJvcENhbGxiYWNrIiwiZHJvcENhbGxiYWNrIiwiX3RhcmdldCIsInVuZGVmaW5lZCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJfZXhlY3V0ZUV2ZW50Q2FsbGJhY2tzRm9yIiwibWFuaWZlc3RHcm91cGluZyIsIl9ncm91cGVkRm9sZGVyQ29udGVudHMiLCJmaWxlc0Ryb3BwZWQiLCJkYXRhVHJhbnNmZXIiLCJmaWxlT2JqZWN0IiwibGFzdE1vZGlmaWVkRGF0ZSIsInR5cGUiLCJjb25uZWN0SHR0cFJlcXVlc3QiLCJIVFRQX01FVEhPRCIsIlBPU1QiLCJVdGlscyIsIlNFU1NJT05fSUQiLCJyZXNwb25zZSIsImRyYWdEcm9wTWFuaWZlc3RHcm91cGluZyIsImV2dCIsImdyb3VwaW5nIiwiX2xvb3AiLCJmc0VudHJ5IiwiaXRlbXMiLCJ3ZWJraXRHZXRBc0VudHJ5IiwiaXNEaXJlY3RvcnkiLCJjcmVhdGVSZWFkZXIiLCJyZWFkRW50cmllcyIsImVudHJpZXMiLCJwcm9jZXNzIiwicGF0aCIsImNvbGxlY3Rpb24iLCJlbnRyeSIsImNoaWxkRW50cmllcyIsImVyciIsImZ1bGxQYXRoIiwiZWwiLCJFcnJvciIsIkkxOG4iLCJ0cmFuc2xhdGlvbnMiLCJUcmFuc2xhdGlvblNlcnZpY2UiLCJfaTE4biIsImkxOG4iLCJfY29uZmlndXJlSTE4biIsInQiLCJsb2NhbGUiLCJrZXkiLCJUUkFOU0xBVElPTl9TQ09QRSIsInNjb3BlIiwidG1wbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRyYW5zbGF0ZSIsIlNoYWR5Q1NTIiwicHJlcGFyZVRlbXBsYXRlIiwiU1BFRmlsZURyb3BfX0luY29taW5nIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJlbE5hbWUiLCJhZGRUYXJnZXQiLCJpbmNvbWluZyIsImRyYWdPYmplY3QiLCJhZGRGaWxlcyIsInRoZW4iLCJfZW1pdEZpbGVzQWRkZWRFdmVudCIsIl9lbWl0QWRkRmlsZXNGYWlsZWRFdmVudCIsInJlc2V0IiwiYXR0ck5hbWUiLCJvbGRWYWwiLCJuZXdWYWwiLCJoYXNBdHRyaWJ1dGUiLCJ2YWwiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZmlsZXMiXSwibWFwcGluZ3MiOiIrV0FBUUEsRUFBZ0JDLEVBQVEsS0FBeEJELFlBRUZFLGtMQUVGQyxRQUFRQyxRQUFRSixFQUFZSyxTQUFTQyxrQkFJekNDLEVBQU9DLFNBQ0xDLFFBQVNQLEVBQ1RBLDZTQ1ZJUSxvTEFDZ0JDLEdBQ2xCLE9BQVFBLEVBQVNDLGNBQWNDLE1BQU0sd0JBQTBCLHVDQUc5Q0MsR0FDakIsT0FBT0EsRUFBU0MsUUFBUSxnQkFBaUIsYUFJN0NSLEVBQU9DLFNBQVlFLDBUQ1Y2Q1QsRUFBUSxHQUFoRWUsb0NBQWlDQyx1QkFDakNQLEVBQTBCVCxFQUFRLEtBQWxDUyxzQkFFRlEsOExBQzBCUCxHQUM1QixPQUFPSyxFQUFnQ0csU0FBU1QsRUFBc0JVLGFBQWFULDRDQUc5RFUsR0FDckIsT0FBT0EsR0FBWUosZ0NBR1JLLEdBQ1gsT0FBUUMsS0FBS0MsdUJBQXVCRixFQUFLRyxPQUFTRixLQUFLRyxnQkFBZ0JKLEVBQUtLLGVBSWhGcEIsRUFBT0MsU0FBWVUsNlRDakJYVSxFQUFnQzNCLEVBQVEsR0FBeEMyQiw0QkFDQWxCLEVBQTBCVCxFQUFRLEtBQWxDUyxzQkFFRm1CLCtMQUMyQmxCLEdBQzdCLE9BQVMsZ0NBQWdDbUIsS0FBS25CLDZDQUd2QkEsR0FDdkIsUUFBU0QsRUFBc0JVLGFBQWFULGtEQUdoQkEsR0FDNUIsT0FBUWlCLEVBQTRCVCxTQUFTVCxFQUFzQlUsYUFBYVQsa0NBR3JFQSxFQUFVb0IsR0FDckIsT0FBSUEsRUFDS1IsS0FBS1Msd0JBQXdCckIsR0FFNUJZLEtBQUtTLHdCQUF3QnJCLElBQ3JDWSxLQUFLVSxrQkFBa0J0QixJQUN2QlksS0FBS0MsdUJBQXVCYixZQUtsQ0osRUFBT0MsU0FBWXFCLG1FQzNCWEEsRUFBOEI1QixFQUFRLEtBQXRDNEIsMEJBQ0FuQixFQUEwQlQsRUFBUSxLQUFsQ1Msc0JBQ0FRLEVBQStCakIsRUFBUSxLQUF2Q2lCLDJCQTJCUlgsRUFBT0MsU0FBWTBCLFlBeEJqQixTQUFBQSxFQUFZWixnR0FBTWEsQ0FBQVosS0FBQVcsR0FDaEJYLEtBQUtaLFNBQVdELEVBQXNCMEIsWUFBWWQsRUFBS0csTUFDdkRGLEtBQUtjLGFBQWVmLEVBQUtHLEtBQ3pCRixLQUFLZSxZQUFhLEVBQ2xCZixLQUFLSSxLQUFPTCxFQUFLSyxLQUNqQkosS0FBS2dCLFFBQVVqQixFQUVmQyxLQUFLaUIsbUJBQXFCWCxFQUEwQkcsd0JBQXdCVCxLQUFLWixVQUNqRlksS0FBS2tCLGFBQWVaLEVBQTBCSSxrQkFBa0JWLEtBQUtaLFVBQ3JFWSxLQUFLbUIsa0JBQW9CYixFQUEwQkwsdUJBQXVCRCxLQUFLWixVQUUvRVksS0FBS29CLE1BQVEsV0FDWCxPQUFPZCxFQUEwQmMsTUFBTXBCLEtBQUtaLFNBQVVZLEtBQUtnQixRQUFRUiwwQkFHckVSLEtBQUtxQixlQUFpQixXQUNwQixJQUFJQyxFQUFZdEIsS0FBS29CLFFBQ2pCQyxFQUFpQjFCLEVBQTJCeUIsTUFBTXJCLEdBRXRELE9BQU91QixHQUFhRCxvU0N4QmxCVixFQUFnQmpDLEVBQVEsS0FBeEJpQyxZQUNBWSxFQUFxQjdDLEVBQVEsR0FBN0I2QyxpQkFFRkMsZ0xBQ1lDLEVBQWNDLEdBQVUsSUFBQUMsRUFBQTNCLEtBQ3RDLE9BQU8sSUFBSXBCLFFBQVEsU0FBQ0MsRUFBUytDLEdBRTNCRixFQUFXQyxFQUFLRSxpQkFBaUJKLEVBQWNDLEdBRTFDRCxFQUFhSyxPQUFTSixFQUFTSSxPQUFVUCxHQUM1Q0ssR0FDRUcsNEVBQTZFUixFQUE3RSxZQUdKLElBQUssSUFBSVMsRUFBSSxFQUFHRixFQUFTSixFQUFTSSxPQUFRRSxFQUFJRixFQUFRRSxJQUFLLENBQ3pELEdBQUlQLEVBQWFLLFFBQVVHLE9BQU9DLE9BQU9DLE1BQU8sQ0FDOUNDLGlCQUFpQkMseUJBQXlCQyxnQkFBaUJiLEVBQWFLLFNBRXhFLE1BR0YsSUFBSS9CLEVBQU8sSUFBSVksRUFBWWUsRUFBU00sSUFFcENQLEVBQWFjLFFBQVF4QyxHQUd2QnFDLGlCQUFpQkksNEJBQTRCZixhQUFjQSxFQUFjZ0IsYUFBY2YsRUFBU0ksU0FFNUZZLG9CQUFvQkMsdUJBQ3RCUCxpQkFDRVEsMENBQTBDbkIsYUFBY0EsRUFBY2dCLGFBQWNmLEVBQVNJLGtEQUsvRWUsRUFBT0MsR0FDM0IsT0FBT0QsRUFBTUMsNENBR1MxRCxFQUFVMkQsR0FDaEMsT0FBT0EsRUFBVUMsUUFBUTVELDRDQUdIeUQsR0FDdEIsT0FBT0EsRUFBTUksSUFBSSxTQUFVbEQsR0FDekIsT0FBT0EsRUFBS2Usb0RBSUkrQixHQUNsQixPQUFPQSxFQUFNSSxJQUFJLFNBQVVsRCxHQUN6QixPQUFPQSxFQUFLWCwrQ0FJR3lELEdBQ2pCLE9BQU9BLEVBQU1JLElBQUksU0FBVWxELEdBQ3pCLE9BQU9BLEVBQUttRCxrREFJUXpCLEVBQWMwQixHQUNwQyxJQUFJQyxFQUFvQjNCLEVBQWF3QixJQUFJLFNBQUNsRCxHQUFELE9BQVVBLEVBQUtlLGVBQ3BEdUMsS0FRSixPQU5BRixFQUFZRyxRQUFRLFNBQVV2RCxJQUNrQixJQUExQ3FELEVBQWtCSixRQUFRakQsRUFBS0csT0FDakNtRCxFQUFlRSxLQUFLeEQsS0FJakJzRCxxQ0FHU1IsRUFBTzlDLEdBQ3ZCLElBQUl5RCxFQUFZeEQsS0FBS3lELGlCQUFpQlosR0FDcENhLEVBQWdCMUQsS0FBSzJELGlCQUFpQjVELEVBQUtlLGFBQWMwQyxHQUMxQ3hELEtBQUs0RCxlQUFlZixFQUFPYSxLQU01Q2IsRUFBTWdCLE9BQU9ILEVBQWUsR0FFNUJ0QixpQkFBaUIwQiw4QkFBOEJyQyxhQUFjb0IsSUFFekRILG9CQUFvQkMsdUJBQ3RCUCxpQkFBaUIyQiw0Q0FBNEN0QyxhQUFjb0IsNENBSXpEQSxHQUNwQixPQUFPQSxFQUFNZixRQUFVZSxFQUFNbUIsS0FBSyxTQUFDakUsR0FBRCxPQUFVQSxFQUFLcUIsZ0RBRzlCeUIsR0FDbkIsT0FBT0EsRUFBTWYsUUFBVWUsRUFBTWYsU0FBVzlCLEtBQUtpRSxlQUFlcEIsMENBR3hDQSxHQUNwQixPQUFPQSxFQUFNcUIsT0FBTyxTQUFDbkUsR0FBRCxPQUFVQSxFQUFLcUIsVUFBU1UsZ0JBSWhEOUMsRUFBT0MsU0FBWXVDLG9UQ3hHWDJDLEVBQVd6RixFQUFRLElBQW5CeUYsT0FFRkMsOEtBRTJCLElBQUFDLEVBQXpCRixFQUFPRyxhQUFlLElBQ3hCRCxFQUFBRSxTQUFRQyxLQUFSQyxNQUFBSixFQUFBSywwQ0FLMkIsSUFBQUMsRUFBekJSLEVBQU9HLGFBQWUsSUFDeEJLLEVBQUFKLFNBQVFLLEtBQVJILE1BQUFFLEVBQUFELDJDQUsyQixJQUFBRyxFQUF6QlYsRUFBT0csYUFBZSxJQUN4Qk8sRUFBQU4sU0FBUU8sSUFBUkwsTUFBQUksRUFBQUgsb0JBS04xRixFQUFPQyxTQUFZbUYseVNDdkJuQixJQUFNVyxFQUFNaEcsT0FBT2dHLElBR2JDLEdBQ0pDLFlBQ0FDLG9CQUNBaEMsVUFDQWlDLFVBR0lDLG9MQUVGcEYsS0FBS3FGLFNBQVcsSUFBSU4sRUFBSU8sU0FDdEJDLGtCQUFtQkMsS0FBS0MsTUFBc0IsSUFBaEJELEtBQUtFLFVBQ25DQyxpQkFBaUIsRUFDakJDLFdBYjBCLFVBZTVCNUYsS0FBSzZGLGlCQUFtQixJQUFJZCxFQUFJZSxpQkFDaEM5RixLQUFLcUYsU0FBU1UsaUJBQWlCaEIsRUFBSU8sUUFBUVUsTUFBTUMsT0FBUWpHLEtBQUtrRyxtQkFBbUJDLEtBQUtuRyxPQUV0RkEsS0FBS29HLG1CQUNMcEcsS0FBS3FHLGlCQUFtQixnQ0FxQmJDLEVBQWVDLEdBQW9CLElBQUE1RSxFQUFBM0IsS0FDOUNBLEtBQUt3RyxRQUFRVCxpQkFBaUJoQixFQUFJTyxRQUFRVSxNQUFNUyxTQUFVekcsS0FBS2tHLG1CQUFtQkMsS0FBS25HLE9BRXZGLElBQUkwRyxLQUNBQyxLQXVCSixPQXJCQUwsRUFBY2hELFFBQVEsU0FBQ3NELEdBQ3JCLElBQUlDLEVBQVUsSUFBSWpJLFFBQVEsU0FBQ0MsRUFBUytDLEdBQ2xDLElBQUlrRixFQUFTbkYsRUFBSzZFLFFBQVFPLGNBQWNILEVBQWNMLEdBQ3BEUyxRQUFTbkksRUFDVGtELE1BQU9ILElBR1QsR0FBSWtGLEVBQU8vRSxNQUNUSCxFQUFPa0YsRUFBTy9FLFdBQ1QsQ0FDTCxJQUFJa0YsRUFBUUwsRUFBYUssTUFDekJOLEVBQU9wRCxLQUFLMEQsTUFJaEJQLEVBQVluRCxLQUFLc0QsS0FHbkI3RyxLQUFLcUcsa0JBQW9CLEVBQ3pCckcsS0FBS29HLGdCQUFnQnBHLEtBQUtxRyxrQkFBb0JNLEdBRXJDcEIsR0FBSXZGLEtBQUtxRyxpQkFBa0JRLFFBQVNqSSxRQUFRc0ksSUFBSVIsK0NBR2pDUyxFQUFXQyxHQUMvQkQsSUFBY3BDLEVBQUlPLFFBQVFVLE1BQU1DLFFBQVlqRyxLQUFLcUgseUJBQXlCRCxHQUMxRUQsSUFBY3BDLEVBQUlPLFFBQVFVLE1BQU1TLFVBQVl6RyxLQUFLc0gsMkJBQTJCRixxREFHakRELEVBQVdDLEdBQzFDcEgsS0FBS3VILGVBQWVKLEdBQVc3RCxRQUFRLFNBQUFrRSxHQUFBLE9BQU1BLEVBQUdKLHNEQUdsQkEsR0FHOUIsT0FGQXBILEtBQUt5SCwwQkFBMEIsU0FBVUwsR0FFbENBLEdBQ1AsS0FBS3JDLEVBQUlPLFFBQVFXLE9BQU95QixhQUN4QixLQUFLM0MsRUFBSU8sUUFBUVcsT0FBTzBCLFNBQ3RCM0gsS0FBSzZGLGlCQUFpQitCLGdCQUN0QixNQUNGLEtBQUs3QyxFQUFJTyxRQUFRVyxPQUFPNEIsT0FDdEI3SCxLQUFLNkYsaUJBQWlCaUMsZUFDdEIsTUFDRixLQUFLL0MsRUFBSU8sUUFBUVcsT0FBTzhCLFNBQ3RCL0gsS0FBSzZGLGlCQUFpQm1DLGFBQ3RCLE1BQ0YsS0FBS2pELEVBQUlPLFFBQVFXLE9BQU9nQyxRQUN0QmpJLEtBQUs2RixpQkFBaUJxQyxnRUFLUWQsR0FBVyxJQUFBZSxFQUFBbkksS0FFM0N1RSxRQUFRTyxJQUFJLDZCQUE4QnNDLEdBRXRDQSxFQUFVZ0IsYUFBZSxHQUMzQmhCLEVBQVVpQixVQUFVL0UsUUFBUSxTQUFDMkIsR0FDM0IsR0FBSUEsRUFBU3FELGNBQWUsQ0FDMUJILEVBQUtWLDBCQUEwQixXQUFZeEMsR0FHM0MsSUFBSXNELEVBQU9KLEVBQUtLLG9CQUFvQnZELEdBQ3BDLEdBQUlzRCxHQUMwQixJQUF4QnRELEVBQVN3RCxXQUFrQixDQUU3QixJQUFJOUIsRUFBU3dCLEVBQUsvQixnQkFBZ0JtQyxFQUFLaEQsSUFDdkNvQixFQUFPOUMsT0FBTzBFLEVBQUt6RixNQUFPLEdBRUosSUFBbEI2RCxFQUFPN0UsZUFDRnFHLEVBQUsvQixnQkFBZ0JtQyxFQUFLaEQsSUFHbkM0QyxFQUFLViwwQkFBMEIsb0JBQzdCeEMsU0FBVUEsRUFDVk0sR0FBSWdELEVBQUtoRCxHQUNUMEIsTUFBT3NCLEVBQUt0QixNQUNaeUIsaUJBQWtCL0IsRUFBTzdFLGFBU2hDOUIsS0FBSzJJLG9CQUFzQjNJLEtBQUs0SSxzRUFPWjNELEdBQ3pCLElBQUssSUFBSU0sS0FBTXZGLEtBQUtvRyxnQkFDbEIsR0FBS3BHLEtBQUtvRyxnQkFBZ0J5QyxlQUFldEQsR0FBekMsQ0FFQSxJQUFJb0IsRUFBUzNHLEtBQUtvRyxnQkFBZ0JiLEdBQ2xDLEdBQUlvQixFQUFRLENBQ1YsSUFBSU0sRUFBUWhDLEVBQVNxRCxjQUFjckIsTUFDL0JuRSxFQUFRNkQsRUFBTzNELFFBQVFpRSxHQUMzQixJQUFlLElBQVhuRSxFQUFnQixPQUFTeUMsR0FBSUEsRUFBSTBCLE1BQU9BLEVBQU9uRSxNQUFPQSx1REFNOUQ5QyxLQUFLd0csUUFBUXNDLG9CQUFvQi9ELEVBQUlPLFFBQVFVLE1BQU1TLCtDQXBJM0JjLEdBQ3hCdkgsS0FBSytJLGdCQUFrQkMsT0FBT0MsVUFBV2pFLEVBQXlCdUMsbUJBT2xFLE9BSEt2SCxLQUFLK0ksa0JBQ1IvSSxLQUFLK0ksZ0JBQWtCQyxPQUFPQyxVQUFXakUsSUFFcENoRixLQUFLK0ksZ0RBT1osT0FISy9JLEtBQUtxRixVQUNSckYsS0FBS2tKLGFBRUFsSixLQUFLcUYsb0RBb0daLFFBQVMyRCxPQUFPRyxLQUFLbkosS0FBS29HLGlCQUFpQnRFLGdCQXFCL0M5QyxFQUFPQyxTQUFZbUcsdVRDaEtYQSxFQUF5QjFHLEVBQVEsS0FBakMwRyxxQkFDQWhCLEVBQWUxRixFQUFRLEtBQXZCMEYsV0FDRlcsRUFBTWhHLE9BQU9nRyxJQUViQyxHQUNKa0MsT0FDQWtDLGFBQ0FDLGFBQ0FDLFlBQ0FDLFNBR0lDLGlMQUNhQyxFQUFRbEMsR0FDdkJuQyxFQUFxQm9CLFFBQVFrRCxjQUM3QjFKLEtBQUt5SixPQUFTQSxFQUVkLElBQUlFLEVBQVlYLE9BQU9DLFVBQVdqRSxFQUF5QnVDLEdBQ3ZEcUMsSUFBZ0JELEVBQVV6QyxJQUFJcEYsUUFDNUI2SCxFQUFVUCxVQUFVdEgsUUFBVThILEtBQ2xDNUosS0FBSzZKLG1CQUFxQjdKLEtBQUs4SixrQkFBa0IzRCxLQUFLbkcsTUFDdER5SixFQUFPMUQsaUJBQWlCLFlBQWEvRixLQUFLNkosc0JBRXRDRixFQUFVTixVQUFVdkgsUUFBVThILEtBQ2xDNUosS0FBSytKLG1CQUFxQi9KLEtBQUtnSyxrQkFBa0I3RCxLQUFLbkcsTUFDdER5SixFQUFPMUQsaUJBQWlCLFlBQWEvRixLQUFLK0osc0JBRXRDSixFQUFVTCxTQUFTeEgsUUFBWTZILEVBQVVKLEtBQUt6SCxRQUFVOEgsS0FDNUQ1SixLQUFLaUssa0JBQW9CakssS0FBS2tLLGlCQUFpQi9ELEtBQUtuRyxNQUNwRHlKLEVBQU8xRCxpQkFBaUIsV0FBWS9GLEtBQUtpSyxxQkFFckNOLEVBQVVKLEtBQUt6SCxRQUFVOEgsS0FDN0I1SixLQUFLbUssY0FBZ0JuSyxLQUFLb0ssYUFBYWpFLEtBQUtuRyxNQUM1Q3lKLEVBQU8xRCxpQkFBaUIsT0FBUS9GLEtBQUttSyxnQkFHdkNuSyxLQUFLdUgsZUFBaUJvQyxrQ0FJdEIzSixLQUFLeUosT0FBT1gsb0JBQW9CLFlBQWE5SSxLQUFLNkosb0JBQ2xEN0osS0FBS3lKLE9BQU9YLG9CQUFvQixZQUFhOUksS0FBSytKLG9CQUNsRC9KLEtBQUt5SixPQUFPWCxvQkFBb0IsV0FBWTlJLEtBQUtpSyxtQkFDakRqSyxLQUFLeUosT0FBT1gsb0JBQW9CLE9BQVE5SSxLQUFLbUssZUFDN0NuSyxLQUFLdUgsZUFBaUJ5QixPQUFPQyxVQUFXakUsR0FDeENoRixLQUFLcUssYUFBVUMsNENBY1FDLEdBQ3ZCQSxFQUFNQyxrQkFDTkQsRUFBTUUsaUJBQ056SyxLQUFLMEssMEJBQTBCLGFBQWVILE1BQU9BLDhDQUc5QkEsR0FDdkJBLEVBQU1DLGtCQUNORCxFQUFNRSxpQkFDTnpLLEtBQUswSywwQkFBMEIsYUFBZUgsTUFBT0EsNkNBRy9CQSxHQUN0QkEsRUFBTUMsa0JBQ05ELEVBQU1FLGlCQUNOekssS0FBSzBLLDBCQUEwQixZQUFjSCxNQUFPQSx5Q0FHbENBLEdBQU8sSUFBQTVJLEVBQUEzQixLQUN6QnVLLEVBQU1DLGtCQUNORCxFQUFNRSxpQkFFTixJQUFJRSxFQUFtQjNLLEtBQUs0Syx1QkFBdUJMLEdBQy9DTSxFQUFlTixFQUFNTyxhQUFhakksTUFDbEMwRixHQUNKQSxpQkFDQUEsRUFBS3VDLGFBQWFqSSxTQUNsQixJQUFLLElBQUliLEVBQUksRUFBR0EsRUFBSTZJLEVBQWEvSSxPQUFRRSxJQUFLLENBQzVDLElBQUkrSSxHQUNGQyxpQkFBcUJILEVBQWE3SSxHQUFHZ0osaUJBQ3JDOUssS0FBcUIySyxFQUFhN0ksR0FBRzlCLEtBQ3JDRSxLQUFxQnlLLEVBQWE3SSxHQUFHNUIsS0FDckM2SyxLQUFxQkosRUFBYTdJLEdBQUdpSixNQUV2QzFDLEVBQUt1QyxhQUFhakksTUFBTVUsS0FBS3dILEdBUy9CM0YsRUFBcUJvQixRQUFRMEUsbUJBQzNCbkcsRUFBSU8sUUFBUTZGLFlBQVlDLEtBQ3hCLDhCQUNBN0MsRUFDQXhELEVBQUlzRyxNQUFNQyxZQUNSdEUsUUFaYSxTQUFDdUUsR0FDaEI1SixFQUFLK0ksMEJBQ0gsUUFDRUgsTUFBT0EsRUFBTzFILE1BQU8wSSxFQUFVQyx5QkFBMEJiLHlEQWFoQ3hELEVBQVdvQixHQUMxQ3ZJLEtBQUt1SCxlQUFlSixHQUFXN0QsUUFBUSxTQUFDa0UsR0FBU0EsRUFBR2UsS0FDcER2SSxLQUFLdUgsZUFBZUwsSUFBSTVELFFBQVEsU0FBQ2tFLEdBQVNBLEVBQUdlLG9EQUdqQmtELEdBcUI1QixJQXBCQSxJQUFJQyxLQUQ2QkMsRUFBQSxTQXFCeEIzSixHQUNQLElBQ0k0SixFQURPSCxFQUFJWCxhQUFhZSxNQUFNN0osR0FDZjhKLG1CQUNmRixFQUFRRyxhQUNHSCxFQUFRSSxlQUNkQyxZQUFZLFNBQUNDLEdBQ2xCUixFQUFTRSxFQUFRMUwsTUF6QlQsU0FBVmlNLEVBQW1CRCxFQUFTRSxFQUFNQyxHQWdCcEMsT0FmQUgsRUFBUTVJLFFBQVEsU0FBVWdKLEdBQ3BCQSxFQUFNUCxZQUNSLFNBQUVLLEdBQ2FFLEVBQU1OLGVBQ1pDLFlBQVksU0FBQ00sR0FDbEJKLEVBQVFJLEVBQWNILEVBQU1DLElBQzNCLFNBQUNHLEdBQ0ZwSSxFQUFXUSxLQUFYLHlDQUF5RDBILEVBQU1HLFNBQVlELEtBTC9FLENBT0dGLEVBQU1HLFVBQVlMLEdBRXJCQyxFQUFXOUksS0FBSzZJLEVBQU8sSUFBTUUsRUFBTXBNLFFBSWhDbU0sRUFTc0JGLENBQVFELEVBQVNOLEVBQVFhLGNBQ2pELFNBQUNELEdBQ0ZwSSxFQUFXUSxLQUFYLHlDQUF5RGdILEVBQVFhLFNBQVlELE1BUjFFeEssRUFBSSxFQUFHQSxFQUFJeUosRUFBSVgsYUFBYWUsTUFBTS9KLE9BQVFFLElBQUsySixFQUEvQzNKLEdBYVQsT0FBTzBKLGlDQXJHUCxPQUFPMUwsS0FBS3FLLHNCQUdJcUMsR0FDaEIsR0FBSTFNLEtBQUtxSyxRQUNQLE1BQU0sSUFBSXNDLE1BQU0seUVBRWxCM00sS0FBS3FLLFFBQVVxQyxXQWtHbkIxTixFQUFPQyxTQUFZdUssb1RDMUpuQixJQUFNb0QsRUFBT2xPLEVBQVEsS0FDYnlGLEVBQVd6RixFQUFRLElBQW5CeUYsT0FDRjBJLEVBQWVuTyxFQUFRLElBQXNCUSxRQUU3QzROLG1MQUNzQixJQUFBQyxFQUl4QixPQUhLL00sS0FBS2dOLE1BQ1JoTixLQUFLaU4sa0JBRUFGLEVBQUEvTSxLQUFLZ04sTUFBS0UsRUFBVnpJLE1BQUFzSSxFQUFBckksb0RBSVBrSSxFQUFLQyxhQUFlQSxFQUNwQkQsRUFBS08sT0FBU2hKLEVBQU9nSixPQUNyQm5OLEtBQUtnTixLQUFPSixXQUloQjVOLEVBQU9DLFNBQVk2TixvZUNoQlJNLEVBSEhOLEVBQXVCcE8sRUFBUSxLQUEvQm9PLG1CQUVGTyxHQUFzQkMsTUFBTyx3QkFLN0JDLEVBQU9DLFNBQVNDLGNBQWMsWUFDcENGLEVBQUtHLFVBQUwsNk1BTFdOLEVBZ0JELGNBZkROLEVBQW1CYSxVQUFVUCxFQUFLQyxJQUkzQyxVQWNJdE8sT0FBTzZPLFVBQ1Q3TyxPQUFPNk8sU0FBU0MsZ0JBQWdCTixFQXRCYiwrQkF5QmZPLGNBR0osU0FBQUEsaUdBQWNsTixDQUFBWixLQUFBOE4sR0FBQSxJQUFBbk0sbUtBQUFvTSxDQUFBL04sTUFBQThOLEVBQUFFLFdBQUFoRixPQUFBaUYsZUFBQUgsSUFBQUksS0FBQWxPLE9BQUEsT0FFSzJCLEVBQUt3TSxjQUFjQyxLQUFNLFNBQy9CQyxZQUFZZCxFQUFLZSxRQUFRQyxXQUFVLElBSGxDNU0sK1dBRlEsTUExQkgseUVBb0NiNUMsUUFBVUEsT0FBT3lQLGdCQUNuQnpQLE9BQU95UCxlQUFlQyxPQUNwQnpPLEtBQUswTyxPQUNMMU8sZUFNUjhOLEVBQXNCaFAsV0FFdEJFLEVBQU9DLFNBQVk2TyxtZUNoRG5CcFAsRUFBUSxTQUNBOEssRUFBMEI5SyxFQUFRLEtBQWxDOEssc0JBQ0FoSSxFQUFzQjlDLEVBQVEsS0FBOUI4QyxrQkFHRitMLEVBQU9DLFNBQVNDLGNBQWMsWUFDcENGLEVBQUtHLFVBQUwsMlhBb0JJM08sT0FBTzZPLFVBQ1Q3TyxPQUFPNk8sU0FBU0MsZ0JBQWdCTixFQXZCYixxQkEwQmY5TyxjQVdKLFNBQUFBLGlHQUFjbUMsQ0FBQVosS0FBQXZCLEdBQUEsSUFBQWtELG1LQUFBb00sQ0FBQS9OLE1BQUF2QixFQUFBdVAsV0FBQWhGLE9BQUFpRixlQUFBeFAsSUFBQXlQLEtBQUFsTyxPQUFBLE9BRUsyQixFQUFLd00sY0FBY0MsS0FBTSxTQUMvQkMsWUFBWWQsRUFBS2UsUUFBUUMsV0FBVSxJQUhsQzVNLCtXQVBRLE1BOUJILG1FQWdEQyxJQUFBd0csRUFBQW5JLEtBQ2xCd0osRUFBc0JtRixVQUFVM08sTUFDOUJvSixXQUNFLFdBQVFqQixFQUFLeUcsVUFBVyxJQUUxQnZGLFdBQ0UsV0FBUWxCLEVBQUt5RyxVQUFXLElBRTFCckYsTUFDRSxTQUFDc0YsR0FDQzFHLEVBQUt5RyxVQUFXLEVBQ2hCcE4sRUFBa0JzTixTQUFTM0csRUFBS3RGLE1BQU9nTSxHQUFZRSxLQUNqRDVHLEVBQUs2RyxxQkFDTDdHLEVBQUs4RywwQkFHUDFLLFFBQVFPLElBQVIsV0FBd0IrSixzREFXOUJyRixFQUFzQjBGLHlEQVNDQyxFQUFVQyxFQUFRQyxxQ0FjekMsT0FBT3JQLEtBQUtzUCxhQUFhLDBCQUdkQyxHQUNQQSxFQUNGdlAsS0FBS3dQLGFBQWEsV0FBWSxJQUU5QnhQLEtBQUt5UCxnQkFBZ0IsMENBUXZCLE9BSEt6UCxLQUFLMFAsU0FDUjFQLEtBQUswUCxXQUVBMVAsS0FBSzBQLDRDQUtaM1EsT0FBT3lQLGVBQWVDLE9BQ3BCek8sS0FBSzBPLE9BQ0wxTyxpREExQkYsT0FBUSxxQkErQlp2QixFQUFZSyxXQUVaRSxFQUFPQyxTQUFZUiIsImZpbGUiOiIxLnJ1bm5lcl9jbGllbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFNQRUZpbGVEcm9wIH0gPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvc3BlX2ZpbGVfZHJvcCcpO1xuXG5jbGFzcyBDb21wb25lbnRzIHtcbiAgc3RhdGljIHJlZ2lzdGVyKCkge1xuICAgIFByb21pc2UucmVzb2x2ZShTUEVGaWxlRHJvcC5yZWdpc3Rlcih3aW5kb3cpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGVmYXVsdDogQ29tcG9uZW50cyxcbiAgQ29tcG9uZW50c1xufTtcbiIsImNsYXNzIEZpbGVWYWxpZGF0aW9uU2VydmljZSB7XG4gIHN0YXRpYyBnZXRFeHRlbnNpb24oZmlsZU5hbWUpIHtcbiAgICByZXR1cm4gKGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bXi5dLiooXFwuXFx3KykkLykgfHwgW10pWzFdO1xuICB9XG5cbiAgc3RhdGljIGdldEZpbGVOYW1lKGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIGZpbGVQYXRoLnJlcGxhY2UoL15bXFx3XFxXXSpbL1xcXFxdLywgJycpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBGaWxlVmFsaWRhdGlvblNlcnZpY2UgfTtcbiIsImNvbnN0IHsgVkFMSURfVEhVTUJOQUlMX0ZJTEVfRVhURU5TSU9OUywgTUFYX1RIVU1CTkFJTF9TSVpFIH0gPSByZXF1aXJlKCcuLi9jb25zdGFudHMnKTtcbmNvbnN0IHsgRmlsZVZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuL2ZpbGVfdmFsaWRhdGlvbl9zZXJ2aWNlJyk7XG5cbmNsYXNzIFRodW1ibmFpbFZhbGlkYXRpb25TZXJ2aWNlIHtcbiAgc3RhdGljIGNvbnRhaW5zVmFsaWRFeHRlbnNpb24oZmlsZU5hbWUpIHtcbiAgICByZXR1cm4gVkFMSURfVEhVTUJOQUlMX0ZJTEVfRVhURU5TSU9OUy5pbmNsdWRlcyhGaWxlVmFsaWRhdGlvblNlcnZpY2UuZ2V0RXh0ZW5zaW9uKGZpbGVOYW1lKSk7XG4gIH1cblxuICBzdGF0aWMgaXNWYWxpZEZpbGVTaXplKGZpbGVTaXplKSB7XG4gICAgcmV0dXJuIGZpbGVTaXplIDw9IE1BWF9USFVNQk5BSUxfU0laRTtcbiAgfVxuXG4gIHN0YXRpYyB2YWxpZChmaWxlKSB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRhaW5zVmFsaWRFeHRlbnNpb24oZmlsZS5uYW1lKSAmJiB0aGlzLmlzVmFsaWRGaWxlU2l6ZShmaWxlLnNpemUpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgVGh1bWJuYWlsVmFsaWRhdGlvblNlcnZpY2UgfTtcbiIsImNvbnN0IHsgVU5TVVBQT1JURURfRklMRV9FWFRFTlNJT05TIH0gPSByZXF1aXJlKCcuLi9jb25zdGFudHMnKTtcbmNvbnN0IHsgRmlsZVZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuL2ZpbGVfdmFsaWRhdGlvbl9zZXJ2aWNlJyk7XG5cbmNsYXNzIEZpbGVOYW1lVmFsaWRhdGlvblNlcnZpY2Uge1xuICBzdGF0aWMgY29udGFpbnNWYWxpZENoYXJhY3RlcnMoZmlsZU5hbWUpIHtcbiAgICByZXR1cm4gISgvOnxcXC98XCJ8O3wnfFxcP3whfD58PHwmfFxcfHxcXCp8QC8udGVzdChmaWxlTmFtZSkpO1xuICB9XG5cbiAgc3RhdGljIGNvbnRhaW5zRXh0ZW5zaW9uKGZpbGVOYW1lKSB7XG4gICAgcmV0dXJuICEhRmlsZVZhbGlkYXRpb25TZXJ2aWNlLmdldEV4dGVuc2lvbihmaWxlTmFtZSk7XG4gIH1cblxuICBzdGF0aWMgY29udGFpbnNWYWxpZEV4dGVuc2lvbihmaWxlTmFtZSkge1xuICAgIHJldHVybiAhVU5TVVBQT1JURURfRklMRV9FWFRFTlNJT05TLmluY2x1ZGVzKEZpbGVWYWxpZGF0aW9uU2VydmljZS5nZXRFeHRlbnNpb24oZmlsZU5hbWUpKTtcbiAgfVxuXG4gIHN0YXRpYyB2YWxpZChmaWxlTmFtZSwgZG9lc05vdFJlcXVpcmVFeHRlbnNpb24pIHtcbiAgICBpZiAoZG9lc05vdFJlcXVpcmVFeHRlbnNpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zVmFsaWRDaGFyYWN0ZXJzKGZpbGVOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICh0aGlzLmNvbnRhaW5zVmFsaWRDaGFyYWN0ZXJzKGZpbGVOYW1lKSAmJlxuICAgICAgdGhpcy5jb250YWluc0V4dGVuc2lvbihmaWxlTmFtZSkgJiZcbiAgICAgIHRoaXMuY29udGFpbnNWYWxpZEV4dGVuc2lvbihmaWxlTmFtZSkpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgRmlsZU5hbWVWYWxpZGF0aW9uU2VydmljZSB9O1xuIiwiY29uc3QgeyBGaWxlTmFtZVZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuL2ZpbGVfbmFtZV92YWxpZGF0aW9uX3NlcnZpY2UnKTtcbmNvbnN0IHsgRmlsZVZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuL2ZpbGVfdmFsaWRhdGlvbl9zZXJ2aWNlJyk7XG5jb25zdCB7IFRodW1ibmFpbFZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuL3RodW1ibmFpbF92YWxpZGF0aW9uX3NlcnZpY2UnKTtcblxuY2xhc3MgRmlsZUZhY3Rvcnkge1xuICBjb25zdHJ1Y3RvcihmaWxlKSB7XG4gICAgdGhpcy5maWxlTmFtZSA9IEZpbGVWYWxpZGF0aW9uU2VydmljZS5nZXRGaWxlTmFtZShmaWxlLm5hbWUpO1xuICAgIHRoaXMuZnVsbEZpbGVQYXRoID0gZmlsZS5uYW1lO1xuICAgIHRoaXMucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIHRoaXMuc2l6ZSA9IGZpbGUuc2l6ZTtcbiAgICB0aGlzLmZpbGVPYmogPSBmaWxlO1xuXG4gICAgdGhpcy5oYXNWYWxpZENoYXJhY3RlcnMgPSBGaWxlTmFtZVZhbGlkYXRpb25TZXJ2aWNlLmNvbnRhaW5zVmFsaWRDaGFyYWN0ZXJzKHRoaXMuZmlsZU5hbWUpO1xuICAgIHRoaXMuaGFzRXh0ZW5zaW9uID0gRmlsZU5hbWVWYWxpZGF0aW9uU2VydmljZS5jb250YWluc0V4dGVuc2lvbih0aGlzLmZpbGVOYW1lKTtcbiAgICB0aGlzLmhhc1ZhbGlkRXh0ZW5zaW9uID0gRmlsZU5hbWVWYWxpZGF0aW9uU2VydmljZS5jb250YWluc1ZhbGlkRXh0ZW5zaW9uKHRoaXMuZmlsZU5hbWUpO1xuXG4gICAgdGhpcy52YWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBGaWxlTmFtZVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkKHRoaXMuZmlsZU5hbWUsIHRoaXMuZmlsZU9iai5kb2VzTm90UmVxdWlyZUV4dGVuc2lvbik7XG4gICAgfTtcblxuICAgIHRoaXMudmFsaWRUaHVtYm5haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgdmFsaWRGaWxlID0gdGhpcy52YWxpZCgpO1xuICAgICAgbGV0IHZhbGlkVGh1bWJuYWlsID0gVGh1bWJuYWlsVmFsaWRhdGlvblNlcnZpY2UudmFsaWQoZmlsZSk7XG5cbiAgICAgIHJldHVybiB2YWxpZEZpbGUgJiYgdmFsaWRUaHVtYm5haWw7XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgRmlsZUZhY3RvcnkgfTtcbiIsImNvbnN0IHsgRmlsZUZhY3RvcnkgfSA9IHJlcXVpcmUoJy4vZmlsZV9mYWN0b3J5Jyk7XG5jb25zdCB7IE1BWF9VUExPQURfQ09VTlQgfSA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cycpO1xuXG5jbGFzcyBGaWxlVXBsb2FkU2VydmljZSB7XG4gIHN0YXRpYyBhZGRGaWxlcyhjdXJyZW50RmlsZXMsIGZpbGVMaXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIC8vIFRPRE86IHJldHVybiBQcm9taXNlLi4uIHJlc29sdmUgaWYgYWxsIGFkZGVkLCByZWplY3QgaWYgdG9vIG1hbnlcbiAgICAgIGZpbGVMaXN0ID0gdGhpcy5yZW1vdmVEdXBsaWNhdGVzKGN1cnJlbnRGaWxlcywgZmlsZUxpc3QpO1xuXG4gICAgICBpZiAoKGN1cnJlbnRGaWxlcy5sZW5ndGggKyBmaWxlTGlzdC5sZW5ndGgpID4gTUFYX1VQTE9BRF9DT1VOVCkge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIGVycm9yOiBgW1J1bm5lckNsaWVudF0gVG9vIG1hbnkgZmlsZXMgYWRkZWQuIFVwbG9hZHMgY2FuIGhhdmUgYSBtYXhpbXVtIG9mICR7TUFYX1VQTE9BRF9DT1VOVH0gZmlsZXMuYFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBmaWxlTGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudEZpbGVzLmxlbmd0aCA+PSBjb25maWcuYXNwZXJhLmxpbWl0KSB7XG4gICAgICAgICAgYW5ub3VuY2VyU2VydmljZS5maWxlVXBsb2FkTGVuZ3RoSW52YWxpZCh7bnVtQ3VycmVudEZpbGVzOiBjdXJyZW50RmlsZXMubGVuZ3RofSk7XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWxlID0gbmV3IEZpbGVGYWN0b3J5KGZpbGVMaXN0W2ldKTtcblxuICAgICAgICBjdXJyZW50RmlsZXMudW5zaGlmdChmaWxlKTtcbiAgICAgIH1cblxuICAgICAgYW5ub3VuY2VyU2VydmljZS5maWxlVXBsb2FkU2VydmljZUZpbGVBZGRlZCh7Y3VycmVudEZpbGVzOiBjdXJyZW50RmlsZXMsIGZpbGVXYXNBZGRlZDogZmlsZUxpc3QubGVuZ3RofSk7XG5cbiAgICAgIGlmIChjdXJyZW50U3RhdGVTZXJ2aWNlLmluY2x1ZGVzVXBsb2FkU3RhdGUoKSkge1xuICAgICAgICBhbm5vdW5jZXJTZXJ2aWNlLlxuICAgICAgICAgIGZpbGVVcGxvYWRTZXJ2aWNlQWR2YW5jZWRVcGxvYWRGaWxlQWRkZWQoe2N1cnJlbnRGaWxlczogY3VycmVudEZpbGVzLCBmaWxlV2FzQWRkZWQ6IGZpbGVMaXN0Lmxlbmd0aH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldEZpbGVBdEluZGV4KGZpbGVzLCBpbmRleCkge1xuICAgIHJldHVybiBmaWxlc1tpbmRleF07XG4gIH1cblxuICBzdGF0aWMgZ2V0RmlsZU5hbWVJbmRleChmaWxlTmFtZSwgZmlsZU5hbWVzKSB7XG4gICAgcmV0dXJuIGZpbGVOYW1lcy5pbmRleE9mKGZpbGVOYW1lKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRGdWxsRmlsZVBhdGhzKGZpbGVzKSB7XG4gICAgcmV0dXJuIGZpbGVzLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGUuZnVsbEZpbGVQYXRoO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldEZpbGVOYW1lcyhmaWxlcykge1xuICAgIHJldHVybiBmaWxlcy5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiBmaWxlLmZpbGVOYW1lO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldFN0YXR1c2VzKGZpbGVzKSB7XG4gICAgcmV0dXJuIGZpbGVzLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGUuc3RhdHVzO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIHJlbW92ZUR1cGxpY2F0ZXMoY3VycmVudEZpbGVzLCBuZXdGaWxlTGlzdCkge1xuICAgIGxldCBleGlzdGluZ0ZpbGVOYW1lcyA9IGN1cnJlbnRGaWxlcy5tYXAoKGZpbGUpID0+IGZpbGUuZnVsbEZpbGVQYXRoKTtcbiAgICBsZXQgdW5pcXVlRmlsZUxpc3QgPSBbXTtcblxuICAgIG5ld0ZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIGlmIChleGlzdGluZ0ZpbGVOYW1lcy5pbmRleE9mKGZpbGUubmFtZSkgPT09IC0xKSB7XG4gICAgICAgIHVuaXF1ZUZpbGVMaXN0LnB1c2goZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdW5pcXVlRmlsZUxpc3Q7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlRmlsZShmaWxlcywgZmlsZSkge1xuICAgIGxldCBmaWxlUGF0aHMgPSB0aGlzLmdldEZ1bGxGaWxlUGF0aHMoZmlsZXMpLFxuICAgICAgZmlsZU5hbWVJbmRleCA9IHRoaXMuZ2V0RmlsZU5hbWVJbmRleChmaWxlLmZ1bGxGaWxlUGF0aCwgZmlsZVBhdGhzKSxcbiAgICAgIGZpbGVUb1JlbW92ZSA9IHRoaXMuZ2V0RmlsZUF0SW5kZXgoZmlsZXMsIGZpbGVOYW1lSW5kZXgpO1xuXG4gICAgaWYgKCFmaWxlVG9SZW1vdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmaWxlcy5zcGxpY2UoZmlsZU5hbWVJbmRleCwgMSk7XG5cbiAgICBhbm5vdW5jZXJTZXJ2aWNlLmZpbGVVcGxvYWRTZXJ2aWNlRmlsZVJlbW92ZWQoe2N1cnJlbnRGaWxlczogZmlsZXN9KTtcblxuICAgIGlmIChjdXJyZW50U3RhdGVTZXJ2aWNlLmluY2x1ZGVzVXBsb2FkU3RhdGUoKSkge1xuICAgICAgYW5ub3VuY2VyU2VydmljZS5maWxlVXBsb2FkU2VydmljZUFkdmFuY2VkVXBsb2FkRmlsZVJlbW92ZWQoe2N1cnJlbnRGaWxlczogZmlsZXN9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc29tZUZpbGVzVmFsaWQoZmlsZXMpIHtcbiAgICByZXR1cm4gZmlsZXMubGVuZ3RoICYmIGZpbGVzLnNvbWUoKGZpbGUpID0+IGZpbGUudmFsaWQoKSk7XG4gIH1cblxuICBzdGF0aWMgYWxsRmlsZXNWYWxpZChmaWxlcykge1xuICAgIHJldHVybiBmaWxlcy5sZW5ndGggJiYgZmlsZXMubGVuZ3RoID09PSB0aGlzLnZhbGlkRmlsZUNvdW50KGZpbGVzKTtcbiAgfVxuXG4gIHN0YXRpYyB2YWxpZEZpbGVDb3VudChmaWxlcykge1xuICAgIHJldHVybiBmaWxlcy5maWx0ZXIoKGZpbGUpID0+IGZpbGUudmFsaWQoKSkubGVuZ3RoO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBGaWxlVXBsb2FkU2VydmljZSB9O1xuIiwiLyogZXNsaW50IG5vLWNvbnNvbGU6IFwib2ZmXCIgKi9cbmNvbnN0IHsgQ29uZmlnIH0gPSByZXF1aXJlKCcuLi9jb25maWcnKTtcblxuY2xhc3MgTG9nU2VydmljZSB7XG4gIHN0YXRpYyBpbmZvKC4uLmFyZ3MpIHtcbiAgICBpZiAoQ29uZmlnLmxvZ0xldmVsSW50ID49IDIpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyguLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgd2FybiguLi5hcmdzKSB7XG4gICAgaWYgKENvbmZpZy5sb2dMZXZlbEludCA+PSAxKSB7XG4gICAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRlYnVnKC4uLmFyZ3MpIHtcbiAgICBpZiAoQ29uZmlnLmxvZ0xldmVsSW50ID49IDMpIHtcbiAgICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgTG9nU2VydmljZSB9O1xuIiwiY29uc3QgQVc0ID0gd2luZG93LkFXNDtcblxuY29uc3QgUkVRVUlSRURfQVNQRVJBX1ZFUlNJT04gPSAnMy43LjQnO1xuY29uc3QgREVGQVVMVF9FVkVOVF9DQUxMQkFDS1MgPSB7XG4gIHRyYW5zZmVyOiBbXSxcbiAgdHJhbnNmZXJDb21wbGV0ZTogW10sXG4gIHN0YXR1czogW10sXG4gIHN0YXJ0OiBbXVxufTtcblxuY2xhc3MgQXNwZXJhQ29ubmVjdFNlcnZpY2Uge1xuICBzdGF0aWMgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLl9jb25uZWN0ID0gbmV3IEFXNC5Db25uZWN0KHtcbiAgICAgIGlkOiBgUnVubmVyQ2xpZW50JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCl9YCxcbiAgICAgIGRyYWdEcm9wRW5hYmxlZDogdHJ1ZSxcbiAgICAgIG1pblZlcnNpb246IFJFUVVJUkVEX0FTUEVSQV9WRVJTSU9OXG4gICAgfSk7XG4gICAgdGhpcy5jb25uZWN0SW5zdGFsbGVyID0gbmV3IEFXNC5Db25uZWN0SW5zdGFsbGVyKCk7XG4gICAgdGhpcy5fY29ubmVjdC5hZGRFdmVudExpc3RlbmVyKEFXNC5Db25uZWN0LkVWRU5ULlNUQVRVUywgdGhpcy5faGFuZGxlQXNwZXJhRXZlbnQuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLmFjdGl2ZVRyYW5zZmVycyA9IHt9O1xuICAgIHRoaXMudXBsb2FkQmF0Y2hDb3VudCA9IDA7XG4gIH1cblxuICBzdGF0aWMgc2V0IGV2ZW50Q2FsbGJhY2tzKGV2ZW50Q2FsbGJhY2tzKSB7XG4gICAgdGhpcy5fZXZlbnRDYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX0VWRU5UX0NBTExCQUNLUywgZXZlbnRDYWxsYmFja3MpO1xuICB9XG5cbiAgc3RhdGljIGdldCBldmVudENhbGxiYWNrcygpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50Q2FsbGJhY2tzKSB7XG4gICAgICB0aGlzLl9ldmVudENhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfRVZFTlRfQ0FMTEJBQ0tTKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2V2ZW50Q2FsbGJhY2tzO1xuICB9XG5cbiAgc3RhdGljIGdldCBjb25uZWN0KCkge1xuICAgIGlmICghdGhpcy5fY29ubmVjdCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25uZWN0O1xuICB9XG5cbiAgc3RhdGljIHN0YXJ0KHRyYW5zZmVyU3BlY3MsIGNvbm5lY3Rpb25TZXR0aW5ncykge1xuICAgIHRoaXMuY29ubmVjdC5hZGRFdmVudExpc3RlbmVyKEFXNC5Db25uZWN0LkVWRU5ULlRSQU5TRkVSLCB0aGlzLl9oYW5kbGVBc3BlcmFFdmVudC5iaW5kKHRoaXMpKTtcblxuICAgIGxldCBhbGxQcm9taXNlcyA9IFtdO1xuICAgIGxldCB0b2tlbnMgICAgICA9IFtdO1xuXG4gICAgdHJhbnNmZXJTcGVjcy5mb3JFYWNoKCh0cmFuc2ZlclNwZWMpID0+IHtcbiAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5jb25uZWN0LnN0YXJ0VHJhbnNmZXIodHJhbnNmZXJTcGVjLCBjb25uZWN0aW9uU2V0dGluZ3MsIHtcbiAgICAgICAgICBzdWNjZXNzOiByZXNvbHZlLFxuICAgICAgICAgIGVycm9yOiByZWplY3RcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgIHJlamVjdChyZXN1bHQuZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCB0b2tlbiA9IHRyYW5zZmVyU3BlYy50b2tlbjtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgLy8gYWN0aXZpdHlVcGxvYWRTZXJ2aWNlLmFkZFRvQ2FjaGUodG9rZW4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGFsbFByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwbG9hZEJhdGNoQ291bnQgKz0gMTtcbiAgICB0aGlzLmFjdGl2ZVRyYW5zZmVyc1t0aGlzLnVwbG9hZEJhdGNoQ291bnRdID0gdG9rZW5zO1xuXG4gICAgcmV0dXJuIHsgaWQ6IHRoaXMudXBsb2FkQmF0Y2hDb3VudCwgcHJvbWlzZTogUHJvbWlzZS5hbGwoYWxsUHJvbWlzZXMpIH07XG4gIH1cblxuICBzdGF0aWMgX2hhbmRsZUFzcGVyYUV2ZW50KGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7XG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gQVc0LkNvbm5lY3QuRVZFTlQuU1RBVFVTKSAgIHsgdGhpcy5faGFuZGxlQXNwZXJhU3RhdHVzRXZlbnQoZXZlbnREYXRhKTsgfVxuICAgIGlmIChldmVudE5hbWUgPT09IEFXNC5Db25uZWN0LkVWRU5ULlRSQU5TRkVSKSB7IHRoaXMuX2hhbmRsZUFzcGVyYVRyYW5zZmVyRXZlbnQoZXZlbnREYXRhKTsgfVxuICB9XG5cbiAgc3RhdGljIF9leGVjdXRlRXZlbnRMaXN0ZW5lcnNGb3IoZXZlbnROYW1lLCBldmVudERhdGEpIHtcbiAgICB0aGlzLmV2ZW50Q2FsbGJhY2tzW2V2ZW50TmFtZV0uZm9yRWFjaChjYiA9PiBjYihldmVudERhdGEpKTtcbiAgfVxuXG4gIHN0YXRpYyBfaGFuZGxlQXNwZXJhU3RhdHVzRXZlbnQoZXZlbnREYXRhKSB7XG4gICAgdGhpcy5fZXhlY3V0ZUV2ZW50TGlzdGVuZXJzRm9yKCdzdGF0dXMnLCBldmVudERhdGEpO1xuXG4gICAgc3dpdGNoKGV2ZW50RGF0YSkge1xuICAgIGNhc2UgQVc0LkNvbm5lY3QuU1RBVFVTLklOSVRJQUxJWklORzpcbiAgICBjYXNlIEFXNC5Db25uZWN0LlNUQVRVUy5SRVRSWUlORzpcbiAgICAgIHRoaXMuY29ubmVjdEluc3RhbGxlci5zaG93TGF1bmNoaW5nKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFXNC5Db25uZWN0LlNUQVRVUy5GQUlMRUQ6XG4gICAgICB0aGlzLmNvbm5lY3RJbnN0YWxsZXIuc2hvd0Rvd25sb2FkKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFXNC5Db25uZWN0LlNUQVRVUy5PVVREQVRFRDpcbiAgICAgIHRoaXMuY29ubmVjdEluc3RhbGxlci5zaG93VXBkYXRlKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFXNC5Db25uZWN0LlNUQVRVUy5SVU5OSU5HOlxuICAgICAgdGhpcy5jb25uZWN0SW5zdGFsbGVyLmNvbm5lY3RlZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9oYW5kbGVBc3BlcmFUcmFuc2ZlckV2ZW50KGV2ZW50RGF0YSkge1xuICAgIC8vIFRPRE86IHJlZ2lzdGVyIHRva2VuIHRvIGFjdGl2aXR5VXBsb2FkU2VydmljZVxuICAgIGNvbnNvbGUubG9nKCdSZWNpZXZlZCB0cmFuc2ZlciBldmVudC4uLicsIGV2ZW50RGF0YSk7XG5cbiAgICBpZiAoZXZlbnREYXRhLnJlc3VsdF9jb3VudCA+IDApIHtcbiAgICAgIGV2ZW50RGF0YS50cmFuc2ZlcnMuZm9yRWFjaCgodHJhbnNmZXIpID0+IHtcbiAgICAgICAgaWYgKHRyYW5zZmVyLnRyYW5zZmVyX3NwZWMpIHtcbiAgICAgICAgICB0aGlzLl9leGVjdXRlRXZlbnRMaXN0ZW5lcnNGb3IoJ3RyYW5zZmVyJywgdHJhbnNmZXIpO1xuICAgICAgICAgIC8vIGFubm91bmNlclNlcnZpY2UuYXNwZXJhQ29ubmVjdFRyYW5zZmVyRXZlbnRSZWNlaXZlZCh0cmFuc2Zlcik7XG5cbiAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuX2dldFRyYW5zZmVyRGF0YUZvcih0cmFuc2Zlcik7XG4gICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zlci5wZXJjZW50YWdlID09PSAxKSB7XG4gICAgICAgICAgICAgIC8vIGFjdGl2aXR5VXBsb2FkU2VydmljZS5yZW1vdmVGcm9tQ2FjaGUoZGF0YS50b2tlbik7XG4gICAgICAgICAgICAgIGxldCB0b2tlbnMgPSB0aGlzLmFjdGl2ZVRyYW5zZmVyc1tkYXRhLmlkXTtcbiAgICAgICAgICAgICAgdG9rZW5zLnNwbGljZShkYXRhLmluZGV4LCAxKTtcblxuICAgICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSh0aGlzLmFjdGl2ZVRyYW5zZmVyc1tkYXRhLmlkXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLl9leGVjdXRlRXZlbnRMaXN0ZW5lcnNGb3IoJ3RyYW5zZmVyQ29tcGxldGUnLCB7XG4gICAgICAgICAgICAgICAgdHJhbnNmZXI6IHRyYW5zZmVyLFxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgICAgICAgIHRva2VuOiBkYXRhLnRva2VuLFxuICAgICAgICAgICAgICAgIGlzQmF0Y2hDb21wbGV0ZTogIXRva2Vucy5sZW5ndGhcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8vIGFubm91bmNlclNlcnZpY2UuYXNwZXJhQ29ubmVjdFRyYW5zZmVyQ29tcGxldGUoeyB0cmFuc2ZlcjogdHJhbnNmZXIsIGlkOiBkYXRhLmlkLCBpc0JhdGNoQ29tcGxldGU6ICF0b2tlbnMubGVuZ3RoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhc0FjdGl2ZVRyYW5zZmVycykgeyB0aGlzLl9yZW1vdmVUcmFuc2Zlckxpc3RlbmVyKCk7IH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgaGFzQWN0aXZlVHJhbnNmZXJzKCkge1xuICAgIHJldHVybiAhIU9iamVjdC5rZXlzKHRoaXMuYWN0aXZlVHJhbnNmZXJzKS5sZW5ndGg7XG4gIH1cblxuICBzdGF0aWMgX2dldFRyYW5zZmVyRGF0YUZvcih0cmFuc2Zlcikge1xuICAgIGZvciAobGV0IGlkIGluIHRoaXMuYWN0aXZlVHJhbnNmZXJzKSB7XG4gICAgICBpZiAoIXRoaXMuYWN0aXZlVHJhbnNmZXJzLmhhc093blByb3BlcnR5KGlkKSkgeyBjb250aW51ZTsgfVxuXG4gICAgICBsZXQgdG9rZW5zID0gdGhpcy5hY3RpdmVUcmFuc2ZlcnNbaWRdO1xuICAgICAgaWYgKHRva2Vucykge1xuICAgICAgICBsZXQgdG9rZW4gPSB0cmFuc2Zlci50cmFuc2Zlcl9zcGVjLnRva2VuO1xuICAgICAgICBsZXQgaW5kZXggPSB0b2tlbnMuaW5kZXhPZih0b2tlbik7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsgcmV0dXJuIHsgaWQ6IGlkLCB0b2tlbjogdG9rZW4sIGluZGV4OiBpbmRleCB9OyB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9yZW1vdmVUcmFuc2Zlckxpc3RlbmVyKCkge1xuICAgIHRoaXMuY29ubmVjdC5yZW1vdmVFdmVudExpc3RlbmVyKEFXNC5Db25uZWN0LkVWRU5ULlRSQU5TRkVSKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgQXNwZXJhQ29ubmVjdFNlcnZpY2UgfTtcbiIsImNvbnN0IHsgQXNwZXJhQ29ubmVjdFNlcnZpY2UgfSA9IHJlcXVpcmUoJy4vYXNwZXJhX2Nvbm5lY3Rfc2VydmljZScpO1xuY29uc3QgeyBMb2dTZXJ2aWNlIH0gPSByZXF1aXJlKCcuL2xvZ19zZXJ2aWNlJyk7XG5jb25zdCBBVzQgPSB3aW5kb3cuQVc0O1xuXG5jb25zdCBERUZBVUxUX0VWRU5UX0NBTExCQUNLUyA9IHtcbiAgYWxsOiBbXSxcbiAgZHJhZ0VudGVyOiBbXSxcbiAgZHJhZ0xlYXZlOiBbXSxcbiAgZHJhZ092ZXI6IFtdLFxuICBkcm9wOiBbXVxufTtcblxuY2xhc3MgQXNwZXJhRHJhZ0Ryb3BTZXJ2aWNlIHtcbiAgc3RhdGljIGFkZFRhcmdldCh0YXJnZXQsIGV2ZW50Q2FsbGJhY2tzKSB7XG4gICAgQXNwZXJhQ29ubmVjdFNlcnZpY2UuY29ubmVjdC5pbml0U2Vzc2lvbigpO1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgbGV0IGNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfRVZFTlRfQ0FMTEJBQ0tTLCBldmVudENhbGxiYWNrcyk7XG4gICAgbGV0IHJlZ2lzdGVyQWxsID0gISFjYWxsYmFja3MuYWxsLmxlbmd0aDtcbiAgICBpZiAoISFjYWxsYmFja3MuZHJhZ0VudGVyLmxlbmd0aCB8fCByZWdpc3RlckFsbCkge1xuICAgICAgdGhpcy5fZHJhZ0VudGVyQ2FsbGJhY2sgPSB0aGlzLmRyYWdFbnRlckNhbGxiYWNrLmJpbmQodGhpcyk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5fZHJhZ0VudGVyQ2FsbGJhY2spO1xuICAgIH1cbiAgICBpZiAoISFjYWxsYmFja3MuZHJhZ0xlYXZlLmxlbmd0aCB8fCByZWdpc3RlckFsbCkge1xuICAgICAgdGhpcy5fZHJhZ0xlYXZlQ2FsbGJhY2sgPSB0aGlzLmRyYWdMZWF2ZUNhbGxiYWNrLmJpbmQodGhpcyk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5fZHJhZ0xlYXZlQ2FsbGJhY2spO1xuICAgIH1cbiAgICBpZiAoISFjYWxsYmFja3MuZHJhZ092ZXIubGVuZ3RoIHx8ICEhY2FsbGJhY2tzLmRyb3AubGVuZ3RoIHx8IHJlZ2lzdGVyQWxsKSB7XG4gICAgICB0aGlzLl9kcmFnT3ZlckNhbGxiYWNrID0gdGhpcy5kcmFnT3ZlckNhbGxiYWNrLmJpbmQodGhpcyk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLl9kcmFnT3ZlckNhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKCEhY2FsbGJhY2tzLmRyb3AubGVuZ3RoIHx8IHJlZ2lzdGVyQWxsKSB7XG4gICAgICB0aGlzLl9kcm9wQ2FsbGJhY2sgPSB0aGlzLmRyb3BDYWxsYmFjay5iaW5kKHRoaXMpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLl9kcm9wQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRDYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gIH1cblxuICBzdGF0aWMgcmVzZXQoKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5fZHJhZ0VudGVyQ2FsbGJhY2spO1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuX2RyYWdMZWF2ZUNhbGxiYWNrKTtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuX2RyYWdPdmVyQ2FsbGJhY2spO1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLl9kcm9wQ2FsbGJhY2spO1xuICAgIHRoaXMuZXZlbnRDYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX0VWRU5UX0NBTExCQUNLUyk7XG4gICAgdGhpcy5fdGFyZ2V0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgc3RhdGljIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldDtcbiAgfVxuXG4gIHN0YXRpYyBzZXQgdGFyZ2V0KGVsKSB7XG4gICAgaWYgKHRoaXMuX3RhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbUnVubmVyQ2xpZW50LkFzcGVyYURyYWdEcm9wU2VydmljZV0gQ2Fubm90IHNldCBtb3JlIHRoYW4gb25lIHRhcmdldCEnKTtcbiAgICB9XG4gICAgdGhpcy5fdGFyZ2V0ID0gZWw7XG4gIH1cblxuICBzdGF0aWMgZHJhZ0VudGVyQ2FsbGJhY2soZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX2V4ZWN1dGVFdmVudENhbGxiYWNrc0ZvcignZHJhZ0VudGVyJywgeyBldmVudDogZXZlbnQgfSk7XG4gIH1cblxuICBzdGF0aWMgZHJhZ0xlYXZlQ2FsbGJhY2soZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX2V4ZWN1dGVFdmVudENhbGxiYWNrc0ZvcignZHJhZ0xlYXZlJywgeyBldmVudDogZXZlbnQgfSk7XG4gIH1cblxuICBzdGF0aWMgZHJhZ092ZXJDYWxsYmFjayhldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5fZXhlY3V0ZUV2ZW50Q2FsbGJhY2tzRm9yKCdkcmFnT3ZlcicsIHsgZXZlbnQ6IGV2ZW50IH0pO1xuICB9XG5cbiAgc3RhdGljIGRyb3BDYWxsYmFjayhldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgbWFuaWZlc3RHcm91cGluZyA9IHRoaXMuX2dyb3VwZWRGb2xkZXJDb250ZW50cyhldmVudCk7XG4gICAgbGV0IGZpbGVzRHJvcHBlZCA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBsZXQgZGF0YSA9IHt9O1xuICAgIGRhdGEuZGF0YVRyYW5zZmVyID0ge307XG4gICAgZGF0YS5kYXRhVHJhbnNmZXIuZmlsZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzRHJvcHBlZC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGZpbGVPYmplY3QgID0ge1xuICAgICAgICAnbGFzdE1vZGlmaWVkRGF0ZScgOiBmaWxlc0Ryb3BwZWRbaV0ubGFzdE1vZGlmaWVkRGF0ZSxcbiAgICAgICAgJ25hbWUnICAgICAgICAgICAgIDogZmlsZXNEcm9wcGVkW2ldLm5hbWUsXG4gICAgICAgICdzaXplJyAgICAgICAgICAgICA6IGZpbGVzRHJvcHBlZFtpXS5zaXplLFxuICAgICAgICAndHlwZScgICAgICAgICAgICAgOiBmaWxlc0Ryb3BwZWRbaV0udHlwZSxcbiAgICAgIH07XG4gICAgICBkYXRhLmRhdGFUcmFuc2Zlci5maWxlcy5wdXNoKGZpbGVPYmplY3QpO1xuICAgIH1cbiAgICBsZXQgZHJvcEhlbHBlciA9IChyZXNwb25zZSkgPT4ge1xuICAgICAgdGhpcy5fZXhlY3V0ZUV2ZW50Q2FsbGJhY2tzRm9yKFxuICAgICAgICAnZHJvcCcsXG4gICAgICAgIHsgZXZlbnQ6IGV2ZW50LCBmaWxlczogcmVzcG9uc2UsIGRyYWdEcm9wTWFuaWZlc3RHcm91cGluZzogbWFuaWZlc3RHcm91cGluZyB9XG4gICAgICApO1xuICAgIH07XG5cbiAgICBBc3BlcmFDb25uZWN0U2VydmljZS5jb25uZWN0LmNvbm5lY3RIdHRwUmVxdWVzdChcbiAgICAgIEFXNC5Db25uZWN0LkhUVFBfTUVUSE9ELlBPU1QsXG4gICAgICAnL2Nvbm5lY3QvZmlsZS9kcm9wcGVkLWZpbGVzJyxcbiAgICAgIGRhdGEsXG4gICAgICBBVzQuVXRpbHMuU0VTU0lPTl9JRCxcbiAgICAgIHsgc3VjY2VzczogZHJvcEhlbHBlciB9XG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBfZXhlY3V0ZUV2ZW50Q2FsbGJhY2tzRm9yKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgIHRoaXMuZXZlbnRDYWxsYmFja3NbZXZlbnROYW1lXS5mb3JFYWNoKChjYikgPT4geyBjYihkYXRhKTsgfSk7XG4gICAgdGhpcy5ldmVudENhbGxiYWNrcy5hbGwuZm9yRWFjaCgoY2IpID0+IHsgY2IoZGF0YSk7IH0pO1xuICB9XG5cbiAgc3RhdGljIF9ncm91cGVkRm9sZGVyQ29udGVudHMoZXZ0KSB7XG4gICAgbGV0IGdyb3VwaW5nID0ge307XG4gICAgbGV0IHByb2Nlc3MgPSBmdW5jdGlvbihlbnRyaWVzLCBwYXRoLCBjb2xsZWN0aW9uKSB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkge1xuICAgICAgICAgICgocGF0aCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IGVudHJ5LmNyZWF0ZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRFbnRyaWVzKChjaGlsZEVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgcHJvY2VzcyhjaGlsZEVudHJpZXMsIHBhdGgsIGNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICBMb2dTZXJ2aWNlLndhcm4oYEZhaWxlZCB0byByZWFkIGRpcmVjdG9yeSBjb250ZW50cyBmb3IgJHtlbnRyeS5mdWxsUGF0aH1gLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkoZW50cnkuZnVsbFBhdGggfHwgcGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHBhdGggKyAnLycgKyBlbnRyeS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2dC5kYXRhVHJhbnNmZXIuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpdGVtID0gZXZ0LmRhdGFUcmFuc2Zlci5pdGVtc1tpXTtcbiAgICAgIGxldCBmc0VudHJ5ID0gaXRlbS53ZWJraXRHZXRBc0VudHJ5KCk7XG4gICAgICBpZiAoZnNFbnRyeS5pc0RpcmVjdG9yeSkge1xuICAgICAgICBsZXQgcmVhZGVyID0gZnNFbnRyeS5jcmVhdGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLnJlYWRFbnRyaWVzKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgZ3JvdXBpbmdbZnNFbnRyeS5uYW1lXSA9IHByb2Nlc3MoZW50cmllcywgZnNFbnRyeS5mdWxsUGF0aCwgW10pO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgTG9nU2VydmljZS53YXJuKGBGYWlsZWQgdG8gcmVhZCBkaXJlY3RvcnkgY29udGVudHMgZm9yICR7ZnNFbnRyeS5mdWxsUGF0aH1gLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ3JvdXBpbmc7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IEFzcGVyYURyYWdEcm9wU2VydmljZSB9O1xuIiwiY29uc3QgSTE4biA9IHJlcXVpcmUoJ2kxOG4tanMnKTtcbmNvbnN0IHsgQ29uZmlnIH0gPSByZXF1aXJlKCcuLi9jb25maWcnKTtcbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHJlcXVpcmUoJy4uL3RyYW5zbGF0aW9ucy5qcycpLmRlZmF1bHQ7XG5cbmNsYXNzIFRyYW5zbGF0aW9uU2VydmljZSB7XG4gIHN0YXRpYyB0cmFuc2xhdGUoLi4uYXJncykge1xuICAgIGlmICghdGhpcy5pMThuKSB7XG4gICAgICB0aGlzLl9jb25maWd1cmVJMThuKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmkxOG4udCguLi5hcmdzKTtcbiAgfVxuXG4gIHN0YXRpYyBfY29uZmlndXJlSTE4bigpIHtcbiAgICBJMThuLnRyYW5zbGF0aW9ucyA9IHRyYW5zbGF0aW9ucztcbiAgICBJMThuLmxvY2FsZSA9IENvbmZpZy5sb2NhbGU7XG4gICAgdGhpcy5pMThuID0gSTE4bjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgVHJhbnNsYXRpb25TZXJ2aWNlIH07XG4iLCJjb25zdCB7IFRyYW5zbGF0aW9uU2VydmljZSB9ID0gcmVxdWlyZSgnU2VydmljZXMvdHJhbnNsYXRpb25fc2VydmljZScpO1xuY29uc3QgRUxFTUVOVF9OQU1FID0gJ3NwZS1maWxlLWRyb3AtLWluY29taW5nJztcbmNvbnN0IFRSQU5TTEFUSU9OX1NDT1BFID0geyBzY29wZTogJ1NQRUZpbGVEcm9wLkluY29taW5nJyB9O1xuY29uc3QgdCA9IChrZXkpID0+IHtcbiAgcmV0dXJuIFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoa2V5LCBUUkFOU0xBVElPTl9TQ09QRSk7XG59O1xuXG5jb25zdCB0bXBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnRtcGwuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgPC9zdHlsZT5cbiAgPGgxPiR7dCgnaGVhZGluZ1RleHQnKX08L2gxPlxuYDtcblxuaWYgKHdpbmRvdy5TaGFkeUNTUykge1xuICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlKHRtcGwsIEVMRU1FTlRfTkFNRSk7XG59XG5cbmNsYXNzIFNQRUZpbGVEcm9wX19JbmNvbWluZyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgc3RhdGljIGdldCBlbE5hbWUoKSB7IHJldHVybiBFTEVNRU5UX05BTUU7IH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGxldCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xuICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodG1wbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIoKSB7XG4gICAgLy8gUmVnaXN0ZXIgdGhlIGN1c3RvbSBlbGVtZW50IHRvIHRoZSBET01cbiAgICBpZiAod2luZG93ICYmIHdpbmRvdy5jdXN0b21FbGVtZW50cykge1xuICAgICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShcbiAgICAgICAgdGhpcy5lbE5hbWUsXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cblNQRUZpbGVEcm9wX19JbmNvbWluZy5yZWdpc3RlcigpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgU1BFRmlsZURyb3BfX0luY29taW5nIH07XG4iLCJyZXF1aXJlKCcuL3NwZV9maWxlX2Ryb3AvX19pbmNvbWluZycpO1xuY29uc3QgeyBBc3BlcmFEcmFnRHJvcFNlcnZpY2UgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2FzcGVyYV9kcmFnX2Ryb3Bfc2VydmljZScpO1xuY29uc3QgeyBGaWxlVXBsb2FkU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvZmlsZV91cGxvYWRfc2VydmljZScpO1xuXG5jb25zdCBFTEVNRU5UX05BTUUgPSAnc3BlLWZpbGUtZHJvcCc7XG5jb25zdCB0bXBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnRtcGwuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5O1xuICAgICAgaGVpZ2h0OiA1MDBweDtcbiAgICAgIHdpZHRoOiA1MDBweDtcbiAgICAgIGJhY2tncm91bmQ6ICNjY2M7XG4gICAgfVxuXG4gICAgOmhvc3RbaW5jb21pbmddIHNwZS1maWxlLWRyb3AtLWluY29taW5nIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB6LWluZGV4OiAxMDtcbiAgICB9XG4gIDwvc3R5bGU+XG4gIEhlbGxvIGZyb20gc3BlLWZpbGUtZHJvcCFcbiAgPHNwZS1maWxlLWRyb3AtLWluY29taW5nPjwvc3BlLWZpbGUtZHJvcC0taW5jb21pbmc+XG5gO1xuXG5pZiAod2luZG93LlNoYWR5Q1NTKSB7XG4gIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGUodG1wbCwgRUxFTUVOVF9OQU1FKTtcbn1cblxuY2xhc3MgU1BFRmlsZURyb3AgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSBIVE1MIGVsZW1lbnRcbiAgICovXG4gIHN0YXRpYyBnZXQgZWxOYW1lKCkgeyByZXR1cm4gRUxFTUVOVF9OQU1FOyB9XG5cbiAgLyoqXG4gICAqIEFuIGluc3RhbmNlIG9mIHRoZSBlbGVtZW50IGlzIGNyZWF0ZWQgb3IgdXBncmFkZWQuIFVzZWZ1bCBmb3IgaW5pdGlhbGl6aW5nXG4gICAqIHN0YXRlLCBzZXR0aW5ncyB1cCBldmVudCBsaXN0ZW5lcnMsIG9yIGNyZWF0aW5nIHNoYWRvdyBkb20uIFNlZSB0aGUgc3BlY1xuICAgKiBmb3IgcmVzdHJpY3Rpb25zIG9uIHdoYXQgeW91IGNhbiBkbyBpbiB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGxldCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xuICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodG1wbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIGVsZW1lbnQgaXMgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLiBVc2VmdWwgZm9yIHJ1bm5pbmdcbiAgICogc2V0dXAgY29kZSwgc3VjaCBhcyBmZXRjaGluZyByZXNvdXJjZXMgb3IgcmVuZGVyaW5nLiBHZW5lcmFsbHksIHlvdSBzaG91bGRcbiAgICogdHJ5IHRvIGRlbGF5IHdvcmsgdW50aWwgdGhpcyB0aW1lLlxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgQXNwZXJhRHJhZ0Ryb3BTZXJ2aWNlLmFkZFRhcmdldCh0aGlzLCB7XG4gICAgICBkcmFnRW50ZXI6IFtcbiAgICAgICAgKCkgPT4geyB0aGlzLmluY29taW5nID0gdHJ1ZTsgfVxuICAgICAgXSxcbiAgICAgIGRyYWdMZWF2ZTogW1xuICAgICAgICAoKSA9PiB7IHRoaXMuaW5jb21pbmcgPSBmYWxzZTsgfVxuICAgICAgXSxcbiAgICAgIGRyb3A6IFtcbiAgICAgICAgKGRyYWdPYmplY3QpID0+IHtcbiAgICAgICAgICB0aGlzLmluY29taW5nID0gZmFsc2U7XG4gICAgICAgICAgRmlsZVVwbG9hZFNlcnZpY2UuYWRkRmlsZXModGhpcy5maWxlcywgZHJhZ09iamVjdCkudGhlbihcbiAgICAgICAgICAgIHRoaXMuX2VtaXRGaWxlc0FkZGVkRXZlbnQsXG4gICAgICAgICAgICB0aGlzLl9lbWl0QWRkRmlsZXNGYWlsZWRFdmVudFxuICAgICAgICAgIClcblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBhZGRGaWxlc2AsIGRyYWdPYmplY3QpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgZXZlcnkgdGltZSB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTS4gVXNlZnVsIGZvciBydW5uaW5nXG4gICAqIGNsZWFuIHVwIGNvZGUuXG4gICAqL1xuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBBc3BlcmFEcmFnRHJvcFNlcnZpY2UucmVzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhbiBvYnNlcnZlZCBhdHRyaWJ1dGUgaGFzIGJlZW4gYWRkZWQsIHJlbW92ZWQsIHVwZGF0ZWQsIG9yXG4gICAqIHJlcGxhY2VkLiBBbHNvIGNhbGxlZCBmb3IgaW5pdGlhbCB2YWx1ZXMgd2hlbiBhbiBlbGVtZW50IGlzIGNyZWF0ZWQgYnkgdGhlXG4gICAqIHBhcnNlciwgb3IgdXBncmFkZWQuIE5vdGU6IG9ubHkgYXR0cmlidXRlcyBsaXN0ZWQgaW4gdGhlIG9ic2VydmVkQXR0cmlidXRlc1xuICAgKiBwcm9wZXJ0eSB3aWxsIHJlY2VpdmUgdGhpcyBjYWxsYmFjay5cbiAgICovXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcblxuICB9XG5cbiAgLyoqXG4gICAqIEVsZW1lbnRzIGNhbiByZWFjdCB0byBhdHRyaWJ1dGUgY2hhbmdlcyBieSBkZWZpbmluZyBhXG4gICAqIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjay4gVGhlIGJyb3dzZXIgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIGZvciBldmVyeVxuICAgKiBjaGFuZ2UgdG8gYXR0cmlidXRlcyBsaXN0ZWQgaW4gdGhlIG9ic2VydmVkQXR0cmlidXRlcyBhcnJheS5cbiAgICovXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ2luY29taW5nJ107XG4gIH1cblxuICBnZXQgaW5jb21pbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKCdpbmNvbWluZycpO1xuICB9XG5cbiAgc2V0IGluY29taW5nKHZhbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpbmNvbWluZycsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ2luY29taW5nJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGZpbGVzKCkge1xuICAgIGlmICghdGhpcy5fZmlsZXMpIHtcbiAgICAgIHRoaXMuX2ZpbGVzID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9maWxlcztcbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlcigpIHtcbiAgICAvLyBSZWdpc3RlciB0aGUgY3VzdG9tIGVsZW1lbnQgdG8gdGhlIERPTVxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXG4gICAgICB0aGlzLmVsTmFtZSxcbiAgICAgIHRoaXNcbiAgICApO1xuICB9XG59XG5cblNQRUZpbGVEcm9wLnJlZ2lzdGVyKCk7XG5cbm1vZHVsZS5leHBvcnRzID0geyBTUEVGaWxlRHJvcCB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==