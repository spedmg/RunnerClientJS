(window.webpackJsonpRunnerClient=window.webpackJsonpRunnerClient||[]).push([[0],{161:function(e,t,r){"use strict";var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=void 0,void 0===(n=function(){return t=(e=i)&&e.I18n||{},r=Array.prototype.slice,n=function(e){return("0"+e.toString()).substr(-2)},o=function(e){var t=void 0===e?"undefined":a(e);return"function"===t||"object"===t},l=function(e){var t=void 0===e?"undefined":a(e);return"function"===t},s=function(e){return void 0!==e&&null!==e},u=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(e)},p=function(e){return!0===e||!1===e},f=function(e,t,r){return void 0===r||0==+r?Math[e](t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))))},h=function(e,t){return l(e)?e(t):e},d={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},m={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},b={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},v=[null,"kb","mb","gb","tb"],y={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""},t.reset=function(){var e;for(e in y)this[e]=y[e]},t.initializeOptions=function(){var e;for(e in y)s(this[e])||(this[e]=y[e])},t.initializeOptions(),t.locales={},t.locales.get=function(e){var r=this[e]||this[t.locale]||this.default;return l(r)&&(r=r(e)),!1===u(r)&&(r=[r]),r},t.locales.default=function(e){var r=[],n=[];return e&&r.push(e),!e&&t.locale&&r.push(t.locale),t.fallbacks&&t.defaultLocale&&r.push(t.defaultLocale),r.forEach(function(e){var r=e.split("-"),i=null,a=null;3===r.length?(i=[r[0],r[1]].join("-"),a=r[0]):2===r.length&&(i=r[0]),-1===n.indexOf(e)&&n.push(e),t.fallbacks&&[i,a].forEach(function(t){void 0!==t&&null!==t&&t!==e&&-1===n.indexOf(t)&&n.push(t)})}),r.length||r.push("en"),n},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this.default},t.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=s,t.lookup=function(e,t){t=t||{};var r,n,i,a,o=this.locales.get(t.locale).slice();for(o[0],i=this.getFullScope(e,t);o.length;)if(r=o.shift(),n=i.split(this.defaultSeparator),a=this.translations[r]){for(;n.length&&void 0!==(a=a[n.shift()])&&null!==a;);if(void 0!==a&&null!==a)return a}if(s(t.defaultValue))return h(t.defaultValue,e)},t.pluralizationLookupWithoutFallback=function(e,t,r){var n,i,a=this.pluralization.get(t)(e);if(o(r))for(;a.length;)if(n=a.shift(),s(r[n])){i=r[n];break}return i},t.pluralizationLookup=function(e,t,r){r=r||{};var n,i,a,l,u=this.locales.get(r.locale).slice();for(u[0],t=this.getFullScope(t,r);u.length;)if(n=u.shift(),i=t.split(this.defaultSeparator),a=this.translations[n]){for(;i.length&&(a=a[i.shift()],o(a));)0==i.length&&(l=this.pluralizationLookupWithoutFallback(e,n,a));if(null!=l&&void 0!=l)break}return null!=l&&void 0!=l||s(r.defaultValue)&&(l=o(r.defaultValue)?this.pluralizationLookupWithoutFallback(e,r.locale,r.defaultValue):r.defaultValue,a=r.defaultValue),{message:l,translations:a}},t.meridian=function(){var e=this.lookup("time"),t=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:t&&t.meridian?t.meridian:d.meridian},t.prepareOptions=function(){for(var e,t=r.call(arguments),n={};t.length;)if("object"==(void 0===(e=t.shift())?"undefined":a(e)))for(var i in e)e.hasOwnProperty(i)&&(s(n[i])||(n[i]=e[i]));return n},t.createTranslationOptions=function(e,t){var r=[{scope:e}];return s(t.defaults)&&(r=r.concat(t.defaults)),s(t.defaultValue)&&r.push({message:t.defaultValue}),r},t.translate=function(e,t){t=t||{};var r,n=this.createTranslationOptions(e,t),i=this.prepareOptions(t);return delete i.defaultValue,n.some(function(t){if(s(t.scope)?r=this.lookup(t.scope,i):s(t.message)&&(r=h(t.message,e)),void 0!==r&&null!==r)return!0},this)?("string"==typeof r?r=this.interpolate(r,t):u(r)?r=r.map(function(e){return this.interpolate(e,t)},this):o(r)&&s(t.count)&&(r=this.pluralize(t.count,e,t)),r):this.missingTranslation(e,t)},t.interpolate=function(e,t){t=t||{};var r,n,i,a,o=e.match(this.placeholder);if(!o)return e;for(;o.length;)n=(r=o.shift()).replace(this.placeholder,"$1"),a=s(t[n])?t[n].toString().replace(/\$/gm,"_#$#_"):n in t?this.nullPlaceholder(r,e,t):this.missingPlaceholder(r,e,t),i=new RegExp(r.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(i,a);return e.replace(/_#\$#_/g,"$")},t.pluralize=function(e,t,r){var n,i;return r=this.prepareOptions({count:String(e)},r),void 0==(i=this.pluralizationLookup(e,t,r)).translations||null==i.translations?this.missingTranslation(t,r):void 0!=i.message&&null!=i.message?this.interpolate(i.message,r):(n=this.pluralization.get(r.locale),this.missingTranslation(t+"."+n(e)[0],r))},t.missingTranslation=function(e,t){if("guess"==this.missingBehaviour){var r=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+r.replace("_"," ").replace(/([a-z])([A-Z])/g,function(e,t,r){return t+" "+r.toLowerCase()})}return'[missing "'+[null!=t&&null!=t.locale?t.locale:this.currentLocale(),this.getFullScope(e,t)].join(this.defaultSeparator)+'" translation]'},t.missingPlaceholder=function(e,t,r){return"[missing "+e+" value]"},t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)},t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),m);var r,n,i=e<0,a=function(e,t){return f("round",e,-t).toFixed(t)}(Math.abs(e),t.precision).toString().split("."),o=[],l=t.format||"%n",s=i?"-":"";for(e=a[0],r=a[1];e.length>0;)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=o.join(t.delimiter),t.strip_insignificant_zeros&&r&&(r=r.replace(/0+$/,"")),t.precision>0&&r&&(n+=t.separator+r),n=(l=t.sign_first?"%s"+l:l.replace("%n","%s%n")).replace("%u",t.unit).replace("%n",n).replace("%s",s)},t.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(e,t)},t.localize=function(e,t,r){switch(r||(r={}),e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:var n;return n=e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),this.interpolate(n,r)}},t.parseDate=function(e){var t,r,n;if("object"==(void 0===e?"undefined":a(e)))return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var i=1;i<=6;i++)t[i]=parseInt(t[i],10)||0;t[2]-=1,n=t[7]?1e3*("0"+t[7]):null,r=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],n)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],n)}else"number"==typeof e?(r=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(r=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(r=new Date).setTime(Date.parse(e)));return r},t.strftime=function(e,r){var i=this.lookup("date"),a=t.meridian();if(i||(i={}),i=this.prepareOptions(i,d),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var o=e.getDay(),l=e.getDate(),s=e.getFullYear(),u=e.getMonth()+1,c=e.getHours(),p=c,f=c>11?1:0,h=e.getSeconds(),m=e.getMinutes(),g=e.getTimezoneOffset(),b=Math.floor(Math.abs(g/60)),v=Math.abs(g)-60*b,y=(g>0?"-":"+")+(b.toString().length<2?"0"+b:b)+(v.toString().length<2?"0"+v:v);return p>12?p-=12:0===p&&(p=12),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace("%a",i.abbr_day_names[o])).replace("%A",i.day_names[o])).replace("%b",i.abbr_month_names[u])).replace("%B",i.month_names[u])).replace("%d",n(l))).replace("%e",l)).replace("%-d",l)).replace("%H",n(c))).replace("%-H",c)).replace("%I",n(p))).replace("%-I",p)).replace("%m",n(u))).replace("%-m",u)).replace("%M",n(m))).replace("%-M",m)).replace("%p",a[f])).replace("%S",n(h))).replace("%-S",h)).replace("%w",o)).replace("%y",n(s))).replace("%-y",n(s).replace(/^0+/,""))).replace("%Y",s)).replace("%z",y)},t.toTime=function(e,t){var r=this.parseDate(t),n=this.lookup(e);return r.toString().match(/invalid/i)?r.toString():n?this.strftime(r,n):r.toString()},t.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),b),this.toNumber(e,t)},t.toHumanSize=function(e,t){for(var r,n,i=e,a=0;i>=1024&&a<4;)i/=1024,a+=1;return 0===a?(r=this.t("number.human.storage_units.units.byte",{count:i}),n=0):(r=this.t("number.human.storage_units.units."+v[a]),n=i-Math.floor(i)==0?0:1),t=this.prepareOptions(t,{unit:r,precision:n,format:"%n%u",delimiter:""}),this.toNumber(i,t)},t.getFullScope=function(e,t){return t=t||{},u(e)&&(e=e.join(this.defaultSeparator)),t.scope&&(e=[t.scope,e].join(this.defaultSeparator)),e},t.extend=function(e,t){return void 0===e&&void 0===t?{}:function e(t,r){var n,i,a;for(n in r)r.hasOwnProperty(n)&&(i=r[n],c(i)||"number"==typeof(a=i)||"[object Number]"===Object.prototype.toString.call(a)||p(i)||u(i)?t[n]=i:(null==t[n]&&(t[n]={}),e(t[n],i)));return t}(e,t)},t.t=t.translate,t.l=t.localize,t.p=t.pluralize,t;var e,t,r,n,o,l,s,u,c,p,f,h,d,m,g,b,v,y}.call(t,r,t,e))||(e.exports=n)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SdW5uZXJDbGllbnQvLi9ub2RlX21vZHVsZXMvaTE4bi1qcy9hcHAvYXNzZXRzL2phdmFzY3JpcHRzL2kxOG4uanMiXSwibmFtZXMiOlsicm9vdCIsInVuZGVmaW5lZCIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiSTE4biIsImdsb2JhbCIsInNsaWNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJwYWRkaW5nIiwibnVtYmVyIiwidG9TdHJpbmciLCJzdWJzdHIiLCJpc09iamVjdCIsIm9iaiIsInR5cGUiLCJfdHlwZW9mIiwiaXNGdW5jdGlvbiIsImZ1bmMiLCJpc1NldCIsInZhbHVlIiwiaXNBcnJheSIsInZhbCIsIk9iamVjdCIsImNhbGwiLCJpc1N0cmluZyIsImlzQm9vbGVhbiIsImRlY2ltYWxBZGp1c3QiLCJleHAiLCJNYXRoIiwiaXNOYU4iLCJOYU4iLCJzcGxpdCIsImxhenlFdmFsdWF0ZSIsIm1lc3NhZ2UiLCJzY29wZSIsIkRBVEUiLCJkYXlfbmFtZXMiLCJhYmJyX2RheV9uYW1lcyIsIm1vbnRoX25hbWVzIiwiYWJicl9tb250aF9uYW1lcyIsIm1lcmlkaWFuIiwiTlVNQkVSX0ZPUk1BVCIsInByZWNpc2lvbiIsInNlcGFyYXRvciIsImRlbGltaXRlciIsInN0cmlwX2luc2lnbmlmaWNhbnRfemVyb3MiLCJDVVJSRU5DWV9GT1JNQVQiLCJ1bml0IiwiZm9ybWF0Iiwic2lnbl9maXJzdCIsIlBFUkNFTlRBR0VfRk9STUFUIiwiU0laRV9VTklUUyIsIkRFRkFVTFRfT1BUSU9OUyIsImRlZmF1bHRMb2NhbGUiLCJsb2NhbGUiLCJkZWZhdWx0U2VwYXJhdG9yIiwicGxhY2Vob2xkZXIiLCJmYWxsYmFja3MiLCJ0cmFuc2xhdGlvbnMiLCJtaXNzaW5nQmVoYXZpb3VyIiwibWlzc2luZ1RyYW5zbGF0aW9uUHJlZml4IiwicmVzZXQiLCJrZXkiLCJ0aGlzIiwiaW5pdGlhbGl6ZU9wdGlvbnMiLCJsb2NhbGVzIiwiZ2V0IiwicmVzdWx0IiwibGlzdCIsInB1c2giLCJmb3JFYWNoIiwibG9jYWxlUGFydHMiLCJmaXJzdEZhbGxiYWNrIiwic2Vjb25kRmFsbGJhY2siLCJsZW5ndGgiLCJqb2luIiwiaW5kZXhPZiIsIm51bGxhYmxlRmFsbGJhY2tMb2NhbGUiLCJwbHVyYWxpemF0aW9uIiwiY291bnQiLCJjdXJyZW50TG9jYWxlIiwibG9va3VwIiwib3B0aW9ucyIsInNjb3BlcyIsImZ1bGxTY29wZSIsImdldEZ1bGxTY29wZSIsInNoaWZ0IiwiZGVmYXVsdFZhbHVlIiwicGx1cmFsaXphdGlvbkxvb2t1cFdpdGhvdXRGYWxsYmFjayIsInBsdXJhbGl6ZXJLZXkiLCJwbHVyYWxpemVyS2V5cyIsInBsdXJhbGl6ZXIiLCJwbHVyYWxpemF0aW9uTG9va3VwIiwidGltZSIsImRhdGUiLCJhbSIsInBtIiwicHJlcGFyZU9wdGlvbnMiLCJzdWJqZWN0IiwiYXJncyIsImFyZ3VtZW50cyIsImF0dHIiLCJoYXNPd25Qcm9wZXJ0eSIsImNyZWF0ZVRyYW5zbGF0aW9uT3B0aW9ucyIsInRyYW5zbGF0aW9uT3B0aW9ucyIsImRlZmF1bHRzIiwiY29uY2F0IiwidHJhbnNsYXRlIiwidHJhbnNsYXRpb24iLCJvcHRpb25zV2l0aG91dERlZmF1bHQiLCJzb21lIiwidHJhbnNsYXRpb25PcHRpb24iLCJpbnRlcnBvbGF0ZSIsIm1hcCIsInQiLCJwbHVyYWxpemUiLCJtaXNzaW5nVHJhbnNsYXRpb24iLCJuYW1lIiwicmVnZXgiLCJtYXRjaGVzIiwibWF0Y2giLCJyZXBsYWNlIiwibnVsbFBsYWNlaG9sZGVyIiwibWlzc2luZ1BsYWNlaG9sZGVyIiwiUmVnRXhwIiwiU3RyaW5nIiwicyIsInAxIiwicDIiLCJ0b0xvd2VyQ2FzZSIsImFwcGx5IiwidG9OdW1iZXIiLCJmb3JtYXR0ZWROdW1iZXIiLCJuZWdhdGl2ZSIsInBhcnRzIiwidG9GaXhlZCIsImFicyIsImJ1ZmZlciIsInNpZ24iLCJ1bnNoaWZ0IiwibWF4IiwidG9DdXJyZW5jeSIsImxvY2FsaXplIiwidG9QZXJjZW50YWdlIiwibG9jYWxpemVkVmFsdWUiLCJ0b1RpbWUiLCJwYXJzZURhdGUiLCJjb252ZXJ0ZWREYXRlIiwiZnJhY3Rpb24iLCJpIiwicGFyc2VJbnQiLCJEYXRlIiwiVVRDIiwic2V0VGltZSIsInBhcnNlIiwiJDEiLCIkMiIsIiQzIiwiJDYiLCIkNCIsIiQ1Iiwic3RyZnRpbWUiLCJtZXJpZGlhbk9wdGlvbnMiLCJnZXRUaW1lIiwiRXJyb3IiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGF5IiwiZ2V0RGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJob3VyIiwiZ2V0SG91cnMiLCJob3VyMTIiLCJzZWNzIiwiZ2V0U2Vjb25kcyIsIm1pbnMiLCJnZXRNaW51dGVzIiwib2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJhYnNPZmZzZXRIb3VycyIsImZsb29yIiwiYWJzT2Zmc2V0TWludXRlcyIsInRpbWV6b25lb2Zmc2V0IiwiZGF0ZVN0cmluZyIsInRvSHVtYW5TaXplIiwic2l6ZSIsIml0ZXJhdGlvbnMiLCJleHRlbmQiLCJvYmoxIiwib2JqMiIsIm1lcmdlIiwiZGVzdCIsImwiLCJwIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJ3SEFpQllBLHFOQUFWQyxPQUdFQSxLQUFBQyxFQUFBLFdBQTJCLE9BY3pCQyxHQUpXQyxFQVY2QkosSUFjdkJJLEVBQU9ELFNBR3hCRSxFQUFRQyxNQUFNQyxVQUFVRixNQUd4QkcsRUFBVSxTQUFTQyxHQUNyQixPQUFRLElBQU1BLEVBQU9DLFlBQVlDLFFBQVEsSUFXdkNDLEVBQVcsU0FBU0MsR0FDdEIsSUFBSUMsT0FBQSxJQUFjRCxFQUFkLFlBQUFFLEVBQWNGLEdBQ2xCLE1BQWdCLGFBQVRDLEdBQWdDLFdBQVRBLEdBRzVCRSxFQUFhLFNBQVNDLEdBQ3hCLElBQUlILE9BQUEsSUFBY0csRUFBZCxZQUFBRixFQUFjRSxHQUNsQixNQUFnQixhQUFU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TXJMLEdBQzFCLElBQUlpRCxFQUFLM0MsRUFwQ2FFLEVBcUN0QixJQUFLeUMsS0FBT2pELEVBQVNBLEVBQUl5RixlQUFleEMsS0FDdEMzQyxFQUFRTixFQUFJaUQsR0FDUnRDLEVBQVNMLElBdENNLGlCQURDRSxFQXVDWUYsSUF0Q3VDLG9CQUF4Q0csT0FBT2YsVUFBVUcsU0FBU2EsS0FBS0YsSUFzQ3BCSSxFQUFVTixJQUFVQyxFQUFRRCxHQUNwRStLLEVBQUtwSSxHQUFPM0MsR0FFSyxNQUFiK0ssRUFBS3BJLEtBQWNvSSxFQUFLcEksT0FDNUJtSSxFQUFNQyxFQUFLcEksR0FBTTNDLEtBR3JCLE9BQU8rSyxFQXU2QkFELENBQU1GLEVBQU1DLElBSXJCN0wsRUFBSytHLEVBQUkvRyxFQUFLd0csVUFDZHhHLEVBQUtnTSxFQUFJaE0sRUFBSzJJLFNBQ2QzSSxFQUFLaU0sRUFBSWpNLEVBQUtnSCxVQUVQaEgsRUEvZ0NELElBQVNDLEVBSVhELEVBR0FFLEVBR0FHLEVBWUFJLEVBS0FJLEVBTUFFLEVBTUFFLEVBT0FJLEVBUUFDLEVBSUFDLEVBbUJBTSxFQXVCQUcsRUFTQU0sRUFRQUssRUFVQUksRUFTQUMsRUFHQUMsR0FySkY3QixLQUFBOEssRUFBQUMsRUFBQUQsRUFBQUUsUUFBQUYsUUFBQW5NIiwiZmlsZSI6IjAucnVubmVyX2NsaWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEkxOG4uanNcbi8vID09PT09PT1cbi8vXG4vLyBUaGlzIHNtYWxsIGxpYnJhcnkgcHJvdmlkZXMgdGhlIFJhaWxzIEkxOG4gQVBJIG9uIHRoZSBKYXZhc2NyaXB0LlxuLy8gWW91IGRvbid0IGFjdHVhbGx5IGhhdmUgdG8gdXNlIFJhaWxzIChvciBldmVuIFJ1YnkpIHRvIHVzZSBJMThuLmpzLlxuLy8gSnVzdCBtYWtlIHN1cmUgeW91IGV4cG9ydCBhbGwgdHJhbnNsYXRpb25zIGluIGFuIG9iamVjdCBsaWtlIHRoaXM6XG4vL1xuLy8gICAgIEkxOG4udHJhbnNsYXRpb25zLmVuID0ge1xuLy8gICAgICAgaGVsbG86IFwiSGVsbG8gV29ybGRcIlxuLy8gICAgIH07XG4vL1xuLy8gU2VlIHRlc3RzIGZvciBzcGVjaWZpYyBmb3JtYXR0aW5nIGxpa2UgbnVtYmVycyBhbmQgZGF0ZXMuXG4vL1xuXG4vLyBVc2luZyBVTUQgcGF0dGVybiBmcm9tXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kI3JlZ3VsYXItbW9kdWxlXG4vLyBgcmV0dXJuRXhwb3J0cy5qc2AgdmVyc2lvblxuOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShcImkxOG5cIiwgZnVuY3Rpb24oKXsgcmV0dXJuIGZhY3Rvcnkocm9vdCk7fSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAvLyBsaWtlIE5vZGUuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJvb3QpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgcm9vdC5JMThuID0gZmFjdG9yeShyb290KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbihnbG9iYWwpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gVXNlIHByZXZpb3VzbHkgZGVmaW5lZCBvYmplY3QgaWYgZXhpc3RzIGluIGN1cnJlbnQgc2NvcGVcbiAgdmFyIEkxOG4gPSBnbG9iYWwgJiYgZ2xvYmFsLkkxOG4gfHwge307XG5cbiAgLy8gSnVzdCBjYWNoZSB0aGUgQXJyYXkjc2xpY2UgZnVuY3Rpb24uXG4gIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuICAvLyBBcHBseSBudW1iZXIgcGFkZGluZy5cbiAgdmFyIHBhZGRpbmcgPSBmdW5jdGlvbihudW1iZXIpIHtcbiAgICByZXR1cm4gKFwiMFwiICsgbnVtYmVyLnRvU3RyaW5nKCkpLnN1YnN0cigtMik7XG4gIH07XG5cbiAgLy8gSW1wcm92ZWQgdG9GaXhlZCBudW1iZXIgcm91bmRpbmcgZnVuY3Rpb24gd2l0aCBzdXBwb3J0IGZvciB1bnByZWNpc2UgZmxvYXRpbmcgcG9pbnRzXG4gIC8vIEphdmFTY3JpcHQncyBzdGFuZGFyZCB0b0ZpeGVkIGZ1bmN0aW9uIGRvZXMgbm90IHJvdW5kIGNlcnRhaW4gbnVtYmVycyBjb3JyZWN0bHkgKGZvciBleGFtcGxlIDAuMTA1IHdpdGggcHJlY2lzaW9uIDIpLlxuICB2YXIgdG9GaXhlZCA9IGZ1bmN0aW9uKG51bWJlciwgcHJlY2lzaW9uKSB7XG4gICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoJ3JvdW5kJywgbnVtYmVyLCAtcHJlY2lzaW9uKS50b0ZpeGVkKHByZWNpc2lvbik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIC8vIEJvcnJvd2VkIGZyb20gVW5kZXJzY29yZS5qc1xuICB2YXIgaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCdcbiAgfTtcblxuICB2YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBmdW5jO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nXG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgZGlmZmVyZW50IHRoYW4gdW5kZWZpbmVkIGFuZCBudWxsO1xuICB2YXIgaXNTZXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YodmFsdWUpICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSAhPT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBCb3Jyb3dlZCBmcm9tIFVuZGVyc2NvcmUuanNcbiAgdmFyIGlzQXJyYXkgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxuICB2YXIgaXNTdHJpbmcgPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBTdHJpbmddJztcbiAgfTtcblxuICB2YXIgaXNOdW1iZXIgPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PSAnbnVtYmVyJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG4gIH07XG5cbiAgdmFyIGlzQm9vbGVhbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IHRydWUgfHwgdmFsID09PSBmYWxzZTtcbiAgfTtcblxuICB2YXIgZGVjaW1hbEFkanVzdCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlLCBleHApIHtcbiAgICAvLyBJZiB0aGUgZXhwIGlzIHVuZGVmaW5lZCBvciB6ZXJvLi4uXG4gICAgaWYgKHR5cGVvZiBleHAgPT09ICd1bmRlZmluZWQnIHx8ICtleHAgPT09IDApIHtcbiAgICAgIHJldHVybiBNYXRoW3R5cGVdKHZhbHVlKTtcbiAgICB9XG4gICAgdmFsdWUgPSArdmFsdWU7XG4gICAgZXhwID0gK2V4cDtcbiAgICAvLyBJZiB0aGUgdmFsdWUgaXMgbm90IGEgbnVtYmVyIG9yIHRoZSBleHAgaXMgbm90IGFuIGludGVnZXIuLi5cbiAgICBpZiAoaXNOYU4odmFsdWUpIHx8ICEodHlwZW9mIGV4cCA9PT0gJ251bWJlcicgJiYgZXhwICUgMSA9PT0gMCkpIHtcbiAgICAgIHJldHVybiBOYU47XG4gICAgfVxuICAgIC8vIFNoaWZ0XG4gICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJyk7XG4gICAgdmFsdWUgPSBNYXRoW3R5cGVdKCsodmFsdWVbMF0gKyAnZScgKyAodmFsdWVbMV0gPyAoK3ZhbHVlWzFdIC0gZXhwKSA6IC1leHApKSk7XG4gICAgLy8gU2hpZnQgYmFja1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnZScpO1xuICAgIHJldHVybiArKHZhbHVlWzBdICsgJ2UnICsgKHZhbHVlWzFdID8gKCt2YWx1ZVsxXSArIGV4cCkgOiBleHApKTtcbiAgfVxuXG4gIHZhciBsYXp5RXZhbHVhdGUgPSBmdW5jdGlvbihtZXNzYWdlLCBzY29wZSkge1xuICAgIGlmIChpc0Z1bmN0aW9uKG1lc3NhZ2UpKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZShzY29wZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZXJnZSA9IGZ1bmN0aW9uIChkZXN0LCBvYmopIHtcbiAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICBmb3IgKGtleSBpbiBvYmopIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNOdW1iZXIodmFsdWUpIHx8IGlzQm9vbGVhbih2YWx1ZSkgfHwgaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZGVzdFtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVzdFtrZXldID09IG51bGwpIGRlc3Rba2V5XSA9IHt9O1xuICAgICAgICBtZXJnZShkZXN0W2tleV0sIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG4gIH07XG5cbiAgLy8gU2V0IGRlZmF1bHQgZGF5cy9tb250aHMgdHJhbnNsYXRpb25zLlxuICB2YXIgREFURSA9IHtcbiAgICAgIGRheV9uYW1lczogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl1cbiAgICAsIGFiYnJfZGF5X25hbWVzOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl1cbiAgICAsIG1vbnRoX25hbWVzOiBbbnVsbCwgXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgICwgYWJicl9tb250aF9uYW1lczogW251bGwsIFwiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdXG4gICAgLCBtZXJpZGlhbjogW1wiQU1cIiwgXCJQTVwiXVxuICB9O1xuXG4gIC8vIFNldCBkZWZhdWx0IG51bWJlciBmb3JtYXQuXG4gIHZhciBOVU1CRVJfRk9STUFUID0ge1xuICAgICAgcHJlY2lzaW9uOiAzXG4gICAgLCBzZXBhcmF0b3I6IFwiLlwiXG4gICAgLCBkZWxpbWl0ZXI6IFwiLFwiXG4gICAgLCBzdHJpcF9pbnNpZ25pZmljYW50X3plcm9zOiBmYWxzZVxuICB9O1xuXG4gIC8vIFNldCBkZWZhdWx0IGN1cnJlbmN5IGZvcm1hdC5cbiAgdmFyIENVUlJFTkNZX0ZPUk1BVCA9IHtcbiAgICAgIHVuaXQ6IFwiJFwiXG4gICAgLCBwcmVjaXNpb246IDJcbiAgICAsIGZvcm1hdDogXCIldSVuXCJcbiAgICAsIHNpZ25fZmlyc3Q6IHRydWVcbiAgICAsIGRlbGltaXRlcjogXCIsXCJcbiAgICAsIHNlcGFyYXRvcjogXCIuXCJcbiAgfTtcblxuICAvLyBTZXQgZGVmYXVsdCBwZXJjZW50YWdlIGZvcm1hdC5cbiAgdmFyIFBFUkNFTlRBR0VfRk9STUFUID0ge1xuICAgICAgdW5pdDogXCIlXCJcbiAgICAsIHByZWNpc2lvbjogM1xuICAgICwgZm9ybWF0OiBcIiVuJXVcIlxuICAgICwgc2VwYXJhdG9yOiBcIi5cIlxuICAgICwgZGVsaW1pdGVyOiBcIlwiXG4gIH07XG5cbiAgLy8gU2V0IGRlZmF1bHQgc2l6ZSB1bml0cy5cbiAgdmFyIFNJWkVfVU5JVFMgPSBbbnVsbCwgXCJrYlwiLCBcIm1iXCIsIFwiZ2JcIiwgXCJ0YlwiXTtcblxuICAvLyBPdGhlciBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICAvLyBTZXQgZGVmYXVsdCBsb2NhbGUuIFRoaXMgbG9jYWxlIHdpbGwgYmUgdXNlZCB3aGVuIGZhbGxiYWNrIGlzIGVuYWJsZWQgYW5kXG4gICAgLy8gdGhlIHRyYW5zbGF0aW9uIGRvZXNuJ3QgZXhpc3QgaW4gYSBwYXJ0aWN1bGFyIGxvY2FsZS5cbiAgICAgIGRlZmF1bHRMb2NhbGU6IFwiZW5cIlxuICAgIC8vIFNldCB0aGUgY3VycmVudCBsb2NhbGUgdG8gYGVuYC5cbiAgICAsIGxvY2FsZTogXCJlblwiXG4gICAgLy8gU2V0IHRoZSB0cmFuc2xhdGlvbiBrZXkgc2VwYXJhdG9yLlxuICAgICwgZGVmYXVsdFNlcGFyYXRvcjogXCIuXCJcbiAgICAvLyBTZXQgdGhlIHBsYWNlaG9sZGVyIGZvcm1hdC4gQWNjZXB0cyBge3twbGFjZWhvbGRlcn19YCBhbmQgYCV7cGxhY2Vob2xkZXJ9YC5cbiAgICAsIHBsYWNlaG9sZGVyOiAvKD86XFx7XFx7fCVcXHspKC4qPykoPzpcXH1cXH0/KS9nbVxuICAgIC8vIFNldCBpZiBlbmdpbmUgc2hvdWxkIGZhbGxiYWNrIHRvIHRoZSBkZWZhdWx0IGxvY2FsZSB3aGVuIGEgdHJhbnNsYXRpb25cbiAgICAvLyBpcyBtaXNzaW5nLlxuICAgICwgZmFsbGJhY2tzOiBmYWxzZVxuICAgIC8vIFNldCB0aGUgZGVmYXVsdCB0cmFuc2xhdGlvbiBvYmplY3QuXG4gICAgLCB0cmFuc2xhdGlvbnM6IHt9XG4gICAgLy8gU2V0IG1pc3NpbmcgdHJhbnNsYXRpb24gYmVoYXZpb3IuICdtZXNzYWdlJyB3aWxsIGRpc3BsYXkgYSBtZXNzYWdlXG4gICAgLy8gdGhhdCB0aGUgdHJhbnNsYXRpb24gaXMgbWlzc2luZywgJ2d1ZXNzJyB3aWxsIHRyeSB0byBndWVzcyB0aGUgc3RyaW5nXG4gICAgLCBtaXNzaW5nQmVoYXZpb3VyOiAnbWVzc2FnZSdcbiAgICAvLyBpZiB5b3UgdXNlIG1pc3NpbmdCZWhhdmlvdXIgd2l0aCAnbWVzc2FnZScsIGJ1dCB3YW50IHRvIGtub3cgdGhhdCB0aGVcbiAgICAvLyBzdHJpbmcgaXMgYWN0dWFsbHkgbWlzc2luZyBmb3IgdGVzdGluZyBwdXJwb3NlcywgeW91IGNhbiBwcmVmaXggdGhlXG4gICAgLy8gZ3Vlc3NlZCBzdHJpbmcgYnkgc2V0dGluZyB0aGUgdmFsdWUgaGVyZS4gQnkgZGVmYXVsdCwgbm8gcHJlZml4IVxuICAgICwgbWlzc2luZ1RyYW5zbGF0aW9uUHJlZml4OiAnJ1xuICB9O1xuXG4gIC8vIFNldCBkZWZhdWx0IGxvY2FsZS4gVGhpcyBsb2NhbGUgd2lsbCBiZSB1c2VkIHdoZW4gZmFsbGJhY2sgaXMgZW5hYmxlZCBhbmRcbiAgLy8gdGhlIHRyYW5zbGF0aW9uIGRvZXNuJ3QgZXhpc3QgaW4gYSBwYXJ0aWN1bGFyIGxvY2FsZS5cbiAgSTE4bi5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrZXk7XG4gICAgZm9yIChrZXkgaW4gREVGQVVMVF9PUFRJT05TKSB7XG4gICAgICB0aGlzW2tleV0gPSBERUZBVUxUX09QVElPTlNba2V5XTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTXVjaCBsaWtlIGByZXNldGAsIGJ1dCBvbmx5IGFzc2lnbiBvcHRpb25zIGlmIG5vdCBhbHJlYWR5IGFzc2lnbmVkXG4gIEkxOG4uaW5pdGlhbGl6ZU9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIga2V5O1xuICAgIGZvciAoa2V5IGluIERFRkFVTFRfT1BUSU9OUykgaWYgKCFpc1NldCh0aGlzW2tleV0pKSB7XG4gICAgICB0aGlzW2tleV0gPSBERUZBVUxUX09QVElPTlNba2V5XTtcbiAgICB9XG4gIH07XG4gIEkxOG4uaW5pdGlhbGl6ZU9wdGlvbnMoKTtcblxuICAvLyBSZXR1cm4gYSBsaXN0IG9mIGFsbCBsb2NhbGVzIHRoYXQgbXVzdCBiZSB0cmllZCBiZWZvcmUgcmV0dXJuaW5nIHRoZVxuICAvLyBtaXNzaW5nIHRyYW5zbGF0aW9uIG1lc3NhZ2UuIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBjb25zaWRlciB0aGUgaW5saW5lIG9wdGlvbixcbiAgLy8gY3VycmVudCBsb2NhbGUgYW5kIGZhbGxiYWNrIGxvY2FsZS5cbiAgLy9cbiAgLy8gICAgIEkxOG4ubG9jYWxlcy5nZXQoXCJkZS1ERVwiKTtcbiAgLy8gICAgIC8vIFtcImRlLURFXCIsIFwiZGVcIiwgXCJlblwiXVxuICAvL1xuICAvLyBZb3UgY2FuIGRlZmluZSBjdXN0b20gcnVsZXMgZm9yIGFueSBsb2NhbGUuIEp1c3QgbWFrZSBzdXJlIHlvdSByZXR1cm4gYSBhcnJheVxuICAvLyBjb250YWluaW5nIGFsbCBsb2NhbGVzLlxuICAvL1xuICAvLyAgICAgLy8gRGVmYXVsdCB0aGUgV29va2llIGxvY2FsZSB0byBFbmdsaXNoLlxuICAvLyAgICAgSTE4bi5sb2NhbGVzW1wid2tcIl0gPSBmdW5jdGlvbihsb2NhbGUpIHtcbiAgLy8gICAgICAgcmV0dXJuIFtcImVuXCJdO1xuICAvLyAgICAgfTtcbiAgLy9cbiAgSTE4bi5sb2NhbGVzID0ge307XG5cbiAgLy8gUmV0cmlldmUgbG9jYWxlcyBiYXNlZCBvbiBpbmxpbmUgbG9jYWxlLCBjdXJyZW50IGxvY2FsZSBvciBkZWZhdWx0IHRvXG4gIC8vIEkxOG4ncyBkZXRlY3Rpb24uXG4gIEkxOG4ubG9jYWxlcy5nZXQgPSBmdW5jdGlvbihsb2NhbGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpc1tsb2NhbGVdIHx8IHRoaXNbSTE4bi5sb2NhbGVdIHx8IHRoaXNbXCJkZWZhdWx0XCJdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24ocmVzdWx0KSkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0KGxvY2FsZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkocmVzdWx0KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJlc3VsdCA9IFtyZXN1bHRdO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGhlIGRlZmF1bHQgbG9jYWxlIGxpc3QuXG4gIEkxOG4ubG9jYWxlc1tcImRlZmF1bHRcIl0gPSBmdW5jdGlvbihsb2NhbGUpIHtcbiAgICB2YXIgbG9jYWxlcyA9IFtdXG4gICAgICAsIGxpc3QgPSBbXVxuICAgIDtcblxuICAgIC8vIEhhbmRsZSB0aGUgaW5saW5lIGxvY2FsZSBvcHRpb24gdGhhdCBjYW4gYmUgcHJvdmlkZWQgdG9cbiAgICAvLyB0aGUgYEkxOG4udGAgb3B0aW9ucy5cbiAgICBpZiAobG9jYWxlKSB7XG4gICAgICBsb2NhbGVzLnB1c2gobG9jYWxlKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGN1cnJlbnQgbG9jYWxlIHRvIHRoZSBsaXN0LlxuICAgIGlmICghbG9jYWxlICYmIEkxOG4ubG9jYWxlKSB7XG4gICAgICBsb2NhbGVzLnB1c2goSTE4bi5sb2NhbGUpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZGVmYXVsdCBsb2NhbGUgaWYgZmFsbGJhY2sgc3RyYXRlZ3kgaXMgZW5hYmxlZC5cbiAgICBpZiAoSTE4bi5mYWxsYmFja3MgJiYgSTE4bi5kZWZhdWx0TG9jYWxlKSB7XG4gICAgICBsb2NhbGVzLnB1c2goSTE4bi5kZWZhdWx0TG9jYWxlKTtcbiAgICB9XG5cbiAgICAvLyBMb2NhbGUgY29kZSBmb3JtYXQgMTpcbiAgICAvLyBBY2NvcmRpbmcgdG8gUkZDNDY0NiAoaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNDY0Ni50eHQpXG4gICAgLy8gbGFuZ3VhZ2UgY29kZXMgZm9yIFRyYWRpdGlvbmFsIENoaW5lc2Ugc2hvdWxkIGJlIGB6aC1IYW50YFxuICAgIC8vXG4gICAgLy8gQnV0IGR1ZSB0byBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgLy8gV2UgdXNlIG9sZGVyIHZlcnNpb24gb2YgSUVURiBsYW5ndWFnZSB0YWdcbiAgICAvLyBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvc3RydWN0L2RpcmxhbmcuaHRtbFxuICAgIC8vIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JRVRGX2xhbmd1YWdlX3RhZ1xuICAgIC8vXG4gICAgLy8gRm9ybWF0OiBgbGFuZ3VhZ2UtY29kZSA9IHByaW1hcnktY29kZSAoIFwiLVwiIHN1YmNvZGUgKSpgXG4gICAgLy9cbiAgICAvLyBwcmltYXJ5LWNvZGUgdXNlcyBJU082MzktMVxuICAgIC8vIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2Rlc1xuICAgIC8vIEBzZWUgaHR0cDovL3d3dy5pc28ub3JnL2lzby9ob21lL3N0YW5kYXJkcy9sYW5ndWFnZV9jb2Rlcy5odG1cbiAgICAvL1xuICAgIC8vIHN1YmNvZGUgdXNlcyBJU08gMzE2Ni0xIGFscGhhLTJcbiAgICAvLyBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzMxNjZcbiAgICAvLyBAc2VlIGh0dHA6Ly93d3cuaXNvLm9yZy9pc28vY291bnRyeV9jb2Rlcy5odG1cbiAgICAvL1xuICAgIC8vIEBub3RlXG4gICAgLy8gICBzdWJjb2RlIGNhbiBiZSBpbiB1cHBlciBjYXNlIG9yIGxvd2VyIGNhc2VcbiAgICAvLyAgIGRlZmluaW5nIGl0IGluIHVwcGVyIGNhc2UgaXMgYSBjb252ZW50aW9uIG9ubHlcblxuXG4gICAgLy8gTG9jYWxlIGNvZGUgZm9ybWF0IDI6XG4gICAgLy8gRm9ybWF0OiBgY29kZSA9IHByaW1hcnktY29kZSAoIFwiLVwiIHJlZ2lvbi1jb2RlICkqYFxuICAgIC8vIHByaW1hcnktY29kZSB1c2VzIElTTyA2MzktMVxuICAgIC8vIHNjcmlwdC1jb2RlIHVzZXMgSVNPIDE1OTI0XG4gICAgLy8gcmVnaW9uLWNvZGUgdXNlcyBJU08gMzE2Ni0xIGFscGhhLTJcbiAgICAvLyBFeGFtcGxlOiB6aC1IYW50LVRXLCBlbi1ISywgemgtSGFudC1DTlxuICAgIC8vXG4gICAgLy8gSXQgaXMgc2ltaWxhciB0byBSRkM0NjQ2IChvciBhY3R1YWxseSB0aGUgc2FtZSksXG4gICAgLy8gYnV0IHNlZW1zIHRvIGJlIGxpbWl0ZWQgdG8gbGFuZ3VhZ2UsIHNjcmlwdCwgcmVnaW9uXG5cbiAgICAvLyBDb21wdXRlIGVhY2ggbG9jYWxlIHdpdGggaXRzIGNvdW50cnkgY29kZS5cbiAgICAvLyBTbyB0aGlzIHdpbGwgcmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmdcbiAgICAvLyBgZGUtREVgIGFuZCBgZGVgXG4gICAgLy8gb3JcbiAgICAvLyBgemgtaGFucy10d2AsIGB6aC1oYW5zYCwgYHpoYFxuICAgIC8vIGxvY2FsZXMuXG4gICAgbG9jYWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGxvY2FsZSkge1xuICAgICAgdmFyIGxvY2FsZVBhcnRzID0gbG9jYWxlLnNwbGl0KFwiLVwiKTtcbiAgICAgIHZhciBmaXJzdEZhbGxiYWNrID0gbnVsbDtcbiAgICAgIHZhciBzZWNvbmRGYWxsYmFjayA9IG51bGw7XG4gICAgICBpZiAobG9jYWxlUGFydHMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGZpcnN0RmFsbGJhY2sgPSBbXG4gICAgICAgICAgbG9jYWxlUGFydHNbMF0sXG4gICAgICAgICAgbG9jYWxlUGFydHNbMV1cbiAgICAgICAgXS5qb2luKFwiLVwiKTtcbiAgICAgICAgc2Vjb25kRmFsbGJhY2sgPSBsb2NhbGVQYXJ0c1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGxvY2FsZVBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBmaXJzdEZhbGxiYWNrID0gbG9jYWxlUGFydHNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmIChsaXN0LmluZGV4T2YobG9jYWxlKSA9PT0gLTEpIHtcbiAgICAgICAgbGlzdC5wdXNoKGxvY2FsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghIEkxOG4uZmFsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgW1xuICAgICAgICBmaXJzdEZhbGxiYWNrLFxuICAgICAgICBzZWNvbmRGYWxsYmFja1xuICAgICAgXS5mb3JFYWNoKGZ1bmN0aW9uKG51bGxhYmxlRmFsbGJhY2tMb2NhbGUpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCBudWxsIHZhbHVlc1xuICAgICAgICBpZiAodHlwZW9mIG51bGxhYmxlRmFsbGJhY2tMb2NhbGUgPT09IFwidW5kZWZpbmVkXCIpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChudWxsYWJsZUZhbGxiYWNrTG9jYWxlID09PSBudWxsKSB7IHJldHVybjsgfVxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IGR1cGxpY2F0ZSB2YWx1ZXNcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ29tcGFyaW5nIHdpdGggYGxvY2FsZWAgZmlyc3QgaXMgZmFzdGVyIHRoYW5cbiAgICAgICAgLy8gY2hlY2tpbmcgd2hldGhlciB2YWx1ZSdzIHByZXNlbmNlIGluIHRoZSBsaXN0XG4gICAgICAgIGlmIChudWxsYWJsZUZhbGxiYWNrTG9jYWxlID09PSBsb2NhbGUpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChsaXN0LmluZGV4T2YobnVsbGFibGVGYWxsYmFja0xvY2FsZSkgIT09IC0xKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGxpc3QucHVzaChudWxsYWJsZUZhbGxiYWNrTG9jYWxlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gTm8gbG9jYWxlcyBzZXQ/IEVuZ2xpc2ggaXQgaXMuXG4gICAgaWYgKCFsb2NhbGVzLmxlbmd0aCkge1xuICAgICAgbG9jYWxlcy5wdXNoKFwiZW5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG5cbiAgLy8gSG9sZCBwbHVyYWxpemF0aW9uIHJ1bGVzLlxuICBJMThuLnBsdXJhbGl6YXRpb24gPSB7fTtcblxuICAvLyBSZXR1cm4gdGhlIHBsdXJhbGl6ZXIgZm9yIGEgc3BlY2lmaWMgbG9jYWxlLlxuICAvLyBJZiBubyBzcGVjaWZ5IGxvY2FsZSBpcyBmb3VuZCwgdGhlbiBJMThuJ3MgZGVmYXVsdCB3aWxsIGJlIHVzZWQuXG4gIEkxOG4ucGx1cmFsaXphdGlvbi5nZXQgPSBmdW5jdGlvbihsb2NhbGUpIHtcbiAgICByZXR1cm4gdGhpc1tsb2NhbGVdIHx8IHRoaXNbSTE4bi5sb2NhbGVdIHx8IHRoaXNbXCJkZWZhdWx0XCJdO1xuICB9O1xuXG4gIC8vIFRoZSBkZWZhdWx0IHBsdXJhbGl6ZXIgcnVsZS5cbiAgLy8gSXQgZGV0ZWN0cyB0aGUgYHplcm9gLCBgb25lYCwgYW5kIGBvdGhlcmAgc2NvcGVzLlxuICBJMThuLnBsdXJhbGl6YXRpb25bXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICBzd2l0Y2ggKGNvdW50KSB7XG4gICAgICBjYXNlIDA6IHJldHVybiBbXCJ6ZXJvXCIsIFwib3RoZXJcIl07XG4gICAgICBjYXNlIDE6IHJldHVybiBbXCJvbmVcIl07XG4gICAgICBkZWZhdWx0OiByZXR1cm4gW1wib3RoZXJcIl07XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHVybiBjdXJyZW50IGxvY2FsZS4gSWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNldCwgdGhlblxuICAvLyB0aGUgY3VycmVudCBsb2NhbGUgd2lsbCBiZSB0aGUgZGVmYXVsdCBsb2NhbGUuXG4gIEkxOG4uY3VycmVudExvY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZSB8fCB0aGlzLmRlZmF1bHRMb2NhbGU7XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgZGlmZmVyZW50IHRoYW4gdW5kZWZpbmVkIGFuZCBudWxsO1xuICBJMThuLmlzU2V0ID0gaXNTZXQ7XG5cbiAgLy8gRmluZCBhbmQgcHJvY2VzcyB0aGUgdHJhbnNsYXRpb24gdXNpbmcgdGhlIHByb3ZpZGVkIHNjb3BlIGFuZCBvcHRpb25zLlxuICAvLyBUaGlzIGlzIHVzZWQgaW50ZXJuYWxseSBieSBzb21lIGZ1bmN0aW9ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGFzIGFuXG4gIC8vIHB1YmxpYyBBUEkuXG4gIEkxOG4ubG9va3VwID0gZnVuY3Rpb24oc2NvcGUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gICAgdmFyIGxvY2FsZXMgPSB0aGlzLmxvY2FsZXMuZ2V0KG9wdGlvbnMubG9jYWxlKS5zbGljZSgpXG4gICAgICAsIHJlcXVlc3RlZExvY2FsZSA9IGxvY2FsZXNbMF1cbiAgICAgICwgbG9jYWxlXG4gICAgICAsIHNjb3Blc1xuICAgICAgLCBmdWxsU2NvcGVcbiAgICAgICwgdHJhbnNsYXRpb25zXG4gICAgO1xuXG4gICAgZnVsbFNjb3BlID0gdGhpcy5nZXRGdWxsU2NvcGUoc2NvcGUsIG9wdGlvbnMpO1xuXG4gICAgd2hpbGUgKGxvY2FsZXMubGVuZ3RoKSB7XG4gICAgICBsb2NhbGUgPSBsb2NhbGVzLnNoaWZ0KCk7XG4gICAgICBzY29wZXMgPSBmdWxsU2NvcGUuc3BsaXQodGhpcy5kZWZhdWx0U2VwYXJhdG9yKTtcbiAgICAgIHRyYW5zbGF0aW9ucyA9IHRoaXMudHJhbnNsYXRpb25zW2xvY2FsZV07XG5cbiAgICAgIGlmICghdHJhbnNsYXRpb25zKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHNjb3Blcy5sZW5ndGgpIHtcbiAgICAgICAgdHJhbnNsYXRpb25zID0gdHJhbnNsYXRpb25zW3Njb3Blcy5zaGlmdCgpXTtcblxuICAgICAgICBpZiAodHJhbnNsYXRpb25zID09PSB1bmRlZmluZWQgfHwgdHJhbnNsYXRpb25zID09PSBudWxsKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zbGF0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHRyYW5zbGF0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJhbnNsYXRpb25zO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1NldChvcHRpb25zLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgIHJldHVybiBsYXp5RXZhbHVhdGUob3B0aW9ucy5kZWZhdWx0VmFsdWUsIHNjb3BlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gbG9va3VwIHBsdXJhbGl6YXRpb24gcnVsZSBrZXkgaW50byB0cmFuc2xhdGlvbnNcbiAgSTE4bi5wbHVyYWxpemF0aW9uTG9va3VwV2l0aG91dEZhbGxiYWNrID0gZnVuY3Rpb24oY291bnQsIGxvY2FsZSwgdHJhbnNsYXRpb25zKSB7XG4gICAgdmFyIHBsdXJhbGl6ZXIgPSB0aGlzLnBsdXJhbGl6YXRpb24uZ2V0KGxvY2FsZSlcbiAgICAgICwgcGx1cmFsaXplcktleXMgPSBwbHVyYWxpemVyKGNvdW50KVxuICAgICAgLCBwbHVyYWxpemVyS2V5XG4gICAgICAsIG1lc3NhZ2U7XG5cbiAgICBpZiAoaXNPYmplY3QodHJhbnNsYXRpb25zKSkge1xuICAgICAgd2hpbGUgKHBsdXJhbGl6ZXJLZXlzLmxlbmd0aCkge1xuICAgICAgICBwbHVyYWxpemVyS2V5ID0gcGx1cmFsaXplcktleXMuc2hpZnQoKTtcbiAgICAgICAgaWYgKGlzU2V0KHRyYW5zbGF0aW9uc1twbHVyYWxpemVyS2V5XSkpIHtcbiAgICAgICAgICBtZXNzYWdlID0gdHJhbnNsYXRpb25zW3BsdXJhbGl6ZXJLZXldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH07XG5cbiAgLy8gTG9va3VwIGRlZGljYXRlZCB0byBwbHVyYWxpemF0aW9uXG4gIEkxOG4ucGx1cmFsaXphdGlvbkxvb2t1cCA9IGZ1bmN0aW9uKGNvdW50LCBzY29wZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGxvY2FsZXMgPSB0aGlzLmxvY2FsZXMuZ2V0KG9wdGlvbnMubG9jYWxlKS5zbGljZSgpXG4gICAgICAsIHJlcXVlc3RlZExvY2FsZSA9IGxvY2FsZXNbMF1cbiAgICAgICwgbG9jYWxlXG4gICAgICAsIHNjb3Blc1xuICAgICAgLCB0cmFuc2xhdGlvbnNcbiAgICAgICwgbWVzc2FnZVxuICAgIDtcbiAgICBzY29wZSA9IHRoaXMuZ2V0RnVsbFNjb3BlKHNjb3BlLCBvcHRpb25zKTtcblxuICAgIHdoaWxlIChsb2NhbGVzLmxlbmd0aCkge1xuICAgICAgbG9jYWxlID0gbG9jYWxlcy5zaGlmdCgpO1xuICAgICAgc2NvcGVzID0gc2NvcGUuc3BsaXQodGhpcy5kZWZhdWx0U2VwYXJhdG9yKTtcbiAgICAgIHRyYW5zbGF0aW9ucyA9IHRoaXMudHJhbnNsYXRpb25zW2xvY2FsZV07XG5cbiAgICAgIGlmICghdHJhbnNsYXRpb25zKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAoc2NvcGVzLmxlbmd0aCkge1xuICAgICAgICB0cmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnNbc2NvcGVzLnNoaWZ0KCldO1xuICAgICAgICBpZiAoIWlzT2JqZWN0KHRyYW5zbGF0aW9ucykpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IHRoaXMucGx1cmFsaXphdGlvbkxvb2t1cFdpdGhvdXRGYWxsYmFjayhjb3VudCwgbG9jYWxlLCB0cmFuc2xhdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtZXNzYWdlID09IG51bGwgfHwgbWVzc2FnZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpc1NldChvcHRpb25zLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMuZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLnBsdXJhbGl6YXRpb25Mb29rdXBXaXRob3V0RmFsbGJhY2soY291bnQsIG9wdGlvbnMubG9jYWxlLCBvcHRpb25zLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVzc2FnZSA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRyYW5zbGF0aW9ucyA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UsIHRyYW5zbGF0aW9uczogdHJhbnNsYXRpb25zIH07XG4gIH07XG5cbiAgLy8gUmFpbHMgY2hhbmdlZCB0aGUgd2F5IHRoZSBtZXJpZGlhbiBpcyBzdG9yZWQuXG4gIC8vIEl0IHN0YXJ0ZWQgd2l0aCBgZGF0ZS5tZXJpZGlhbmAgcmV0dXJuaW5nIGFuIGFycmF5LFxuICAvLyB0aGVuIGl0IHN3aXRjaGVkIHRvIGB0aW1lLmFtYCBhbmQgYHRpbWUucG1gLlxuICAvLyBUaGlzIGZ1bmN0aW9uIGFic3RyYWN0cyB0aGlzIGRpZmZlcmVuY2UgYW5kIHJldHVybnNcbiAgLy8gdGhlIGNvcnJlY3QgbWVyaWRpYW4gb3IgdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBub25lIGlzIHByb3ZpZGVkLlxuICBJMThuLm1lcmlkaWFuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRpbWUgPSB0aGlzLmxvb2t1cChcInRpbWVcIik7XG4gICAgdmFyIGRhdGUgPSB0aGlzLmxvb2t1cChcImRhdGVcIik7XG5cbiAgICBpZiAodGltZSAmJiB0aW1lLmFtICYmIHRpbWUucG0pIHtcbiAgICAgIHJldHVybiBbdGltZS5hbSwgdGltZS5wbV07XG4gICAgfSBlbHNlIGlmIChkYXRlICYmIGRhdGUubWVyaWRpYW4pIHtcbiAgICAgIHJldHVybiBkYXRlLm1lcmlkaWFuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gREFURS5tZXJpZGlhbjtcbiAgICB9XG4gIH07XG5cbiAgLy8gTWVyZ2Ugc2VydmVyYWwgaGFzaCBvcHRpb25zLCBjaGVja2luZyBpZiB2YWx1ZSBpcyBzZXQgYmVmb3JlXG4gIC8vIG92ZXJ3cml0aW5nIGFueSB2YWx1ZS4gVGhlIHByZWNlZGVuY2UgaXMgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxuICAvL1xuICAvLyAgICAgSTE4bi5wcmVwYXJlT3B0aW9ucyh7bmFtZTogXCJKb2huIERvZVwifSwge25hbWU6IFwiTWFyeSBEb2VcIiwgcm9sZTogXCJ1c2VyXCJ9KTtcbiAgLy8gICAgICM9PiB7bmFtZTogXCJKb2huIERvZVwiLCByb2xlOiBcInVzZXJcIn1cbiAgLy9cbiAgSTE4bi5wcmVwYXJlT3B0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgICAsIG9wdGlvbnMgPSB7fVxuICAgICAgLCBzdWJqZWN0XG4gICAgO1xuXG4gICAgd2hpbGUgKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBzdWJqZWN0ID0gYXJncy5zaGlmdCgpO1xuXG4gICAgICBpZiAodHlwZW9mKHN1YmplY3QpICE9IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGF0dHIgaW4gc3ViamVjdCkge1xuICAgICAgICBpZiAoIXN1YmplY3QuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1NldChvcHRpb25zW2F0dHJdKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9uc1thdHRyXSA9IHN1YmplY3RbYXR0cl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSBsaXN0IG9mIHRyYW5zbGF0aW9uIG9wdGlvbnMgZm9yIGRlZmF1bHQgZmFsbGJhY2tzLlxuICAvLyBgZGVmYXVsdFZhbHVlYCBpcyBhbHNvIGRlbGV0ZWQgZnJvbSBvcHRpb25zIGFzIGl0IGlzIHJldHVybmVkIGFzIHBhcnQgb2ZcbiAgLy8gdGhlIHRyYW5zbGF0aW9uT3B0aW9ucyBhcnJheS5cbiAgSTE4bi5jcmVhdGVUcmFuc2xhdGlvbk9wdGlvbnMgPSBmdW5jdGlvbihzY29wZSwgb3B0aW9ucykge1xuICAgIHZhciB0cmFuc2xhdGlvbk9wdGlvbnMgPSBbe3Njb3BlOiBzY29wZX1dO1xuXG4gICAgLy8gRGVmYXVsdHMgc2hvdWxkIGJlIGFuIGFycmF5IG9mIGhhc2hlcyBjb250YWluaW5nIGVpdGhlclxuICAgIC8vIGZhbGxiYWNrIHNjb3BlcyBvciBtZXNzYWdlc1xuICAgIGlmIChpc1NldChvcHRpb25zLmRlZmF1bHRzKSkge1xuICAgICAgdHJhbnNsYXRpb25PcHRpb25zID0gdHJhbnNsYXRpb25PcHRpb25zLmNvbmNhdChvcHRpb25zLmRlZmF1bHRzKTtcbiAgICB9XG5cbiAgICAvLyBNYWludGFpbiBzdXBwb3J0IGZvciBkZWZhdWx0VmFsdWUuIFNpbmNlIGl0IGlzIGFsd2F5cyBhIG1lc3NhZ2VcbiAgICAvLyBpbnNlcnQgaXQgaW4gdG8gdGhlIHRyYW5zbGF0aW9uIG9wdGlvbnMgYXMgc3VjaC5cbiAgICBpZiAoaXNTZXQob3B0aW9ucy5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICB0cmFuc2xhdGlvbk9wdGlvbnMucHVzaCh7IG1lc3NhZ2U6IG9wdGlvbnMuZGVmYXVsdFZhbHVlIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFuc2xhdGlvbk9wdGlvbnM7XG4gIH07XG5cbiAgLy8gVHJhbnNsYXRlIHRoZSBnaXZlbiBzY29wZSB3aXRoIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICBJMThuLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHNjb3BlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICAgIHZhciB0cmFuc2xhdGlvbk9wdGlvbnMgPSB0aGlzLmNyZWF0ZVRyYW5zbGF0aW9uT3B0aW9ucyhzY29wZSwgb3B0aW9ucyk7XG5cbiAgICB2YXIgdHJhbnNsYXRpb247XG5cbiAgICB2YXIgb3B0aW9uc1dpdGhvdXREZWZhdWx0ID0gdGhpcy5wcmVwYXJlT3B0aW9ucyhvcHRpb25zKVxuICAgIGRlbGV0ZSBvcHRpb25zV2l0aG91dERlZmF1bHQuZGVmYXVsdFZhbHVlXG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHRyYW5zbGF0aW9uIG9wdGlvbnMgdW50aWwgYSB0cmFuc2xhdGlvblxuICAgIC8vIG9yIG1lc3NhZ2UgaXMgZm91bmQuXG4gICAgdmFyIHRyYW5zbGF0aW9uRm91bmQgPVxuICAgICAgdHJhbnNsYXRpb25PcHRpb25zLnNvbWUoZnVuY3Rpb24odHJhbnNsYXRpb25PcHRpb24pIHtcbiAgICAgICAgaWYgKGlzU2V0KHRyYW5zbGF0aW9uT3B0aW9uLnNjb3BlKSkge1xuICAgICAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5sb29rdXAodHJhbnNsYXRpb25PcHRpb24uc2NvcGUsIG9wdGlvbnNXaXRob3V0RGVmYXVsdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTZXQodHJhbnNsYXRpb25PcHRpb24ubWVzc2FnZSkpIHtcbiAgICAgICAgICB0cmFuc2xhdGlvbiA9IGxhenlFdmFsdWF0ZSh0cmFuc2xhdGlvbk9wdGlvbi5tZXNzYWdlLCBzY29wZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNsYXRpb24gIT09IHVuZGVmaW5lZCAmJiB0cmFuc2xhdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcblxuICAgIGlmICghdHJhbnNsYXRpb25Gb3VuZCkge1xuICAgICAgcmV0dXJuIHRoaXMubWlzc2luZ1RyYW5zbGF0aW9uKHNjb3BlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mKHRyYW5zbGF0aW9uKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdHJhbnNsYXRpb24gPSB0aGlzLmludGVycG9sYXRlKHRyYW5zbGF0aW9uLCBvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodHJhbnNsYXRpb24pKSB7XG4gICAgICB0cmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uLm1hcChmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVycG9sYXRlKHQsIG9wdGlvbnMpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh0cmFuc2xhdGlvbikgJiYgaXNTZXQob3B0aW9ucy5jb3VudCkpIHtcbiAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5wbHVyYWxpemUob3B0aW9ucy5jb3VudCwgc2NvcGUsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgfTtcblxuICAvLyBUaGlzIGZ1bmN0aW9uIGludGVycG9sYXRlcyB0aGUgYWxsIHZhcmlhYmxlcyBpbiB0aGUgZ2l2ZW4gbWVzc2FnZS5cbiAgSTE4bi5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBtYXRjaGVzID0gbWVzc2FnZS5tYXRjaCh0aGlzLnBsYWNlaG9sZGVyKVxuICAgICAgLCBwbGFjZWhvbGRlclxuICAgICAgLCB2YWx1ZVxuICAgICAgLCBuYW1lXG4gICAgICAsIHJlZ2V4XG4gICAgO1xuXG4gICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWU7XG5cbiAgICB3aGlsZSAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHBsYWNlaG9sZGVyID0gbWF0Y2hlcy5zaGlmdCgpO1xuICAgICAgbmFtZSA9IHBsYWNlaG9sZGVyLnJlcGxhY2UodGhpcy5wbGFjZWhvbGRlciwgXCIkMVwiKTtcblxuICAgICAgaWYgKGlzU2V0KG9wdGlvbnNbbmFtZV0pKSB7XG4gICAgICAgIHZhbHVlID0gb3B0aW9uc1tuYW1lXS50b1N0cmluZygpLnJlcGxhY2UoL1xcJC9nbSwgXCJfIyQjX1wiKTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5udWxsUGxhY2Vob2xkZXIocGxhY2Vob2xkZXIsIG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLm1pc3NpbmdQbGFjZWhvbGRlcihwbGFjZWhvbGRlciwgbWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChwbGFjZWhvbGRlci5yZXBsYWNlKC9cXHsvZ20sIFwiXFxcXHtcIikucmVwbGFjZSgvXFx9L2dtLCBcIlxcXFx9XCIpKTtcbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLnJlcGxhY2UocmVnZXgsIHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVzc2FnZS5yZXBsYWNlKC9fI1xcJCNfL2csIFwiJFwiKTtcbiAgfTtcblxuICAvLyBQbHVyYWxpemUgdGhlIGdpdmVuIHNjb3BlIHVzaW5nIHRoZSBgY291bnRgIHZhbHVlLlxuICAvLyBUaGUgcGx1cmFsaXplZCB0cmFuc2xhdGlvbiBtYXkgaGF2ZSBvdGhlciBwbGFjZWhvbGRlcnMsXG4gIC8vIHdoaWNoIHdpbGwgYmUgcmV0cmlldmVkIGZyb20gYG9wdGlvbnNgLlxuICBJMThuLnBsdXJhbGl6ZSA9IGZ1bmN0aW9uKGNvdW50LCBzY29wZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB0aGlzLnByZXBhcmVPcHRpb25zKHtjb3VudDogU3RyaW5nKGNvdW50KX0sIG9wdGlvbnMpXG4gICAgdmFyIHBsdXJhbGl6ZXIsIG1lc3NhZ2UsIHJlc3VsdDtcblxuICAgIHJlc3VsdCA9IHRoaXMucGx1cmFsaXphdGlvbkxvb2t1cChjb3VudCwgc2NvcGUsIG9wdGlvbnMpO1xuICAgIGlmIChyZXN1bHQudHJhbnNsYXRpb25zID09IHVuZGVmaW5lZCB8fCByZXN1bHQudHJhbnNsYXRpb25zID09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLm1pc3NpbmdUcmFuc2xhdGlvbihzY29wZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5tZXNzYWdlICE9IHVuZGVmaW5lZCAmJiByZXN1bHQubWVzc2FnZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZShyZXN1bHQubWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcGx1cmFsaXplciA9IHRoaXMucGx1cmFsaXphdGlvbi5nZXQob3B0aW9ucy5sb2NhbGUpO1xuICAgICAgcmV0dXJuIHRoaXMubWlzc2luZ1RyYW5zbGF0aW9uKHNjb3BlICsgJy4nICsgcGx1cmFsaXplcihjb3VudClbMF0sIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm4gYSBtaXNzaW5nIHRyYW5zbGF0aW9uIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiBwYXJhbWV0ZXJzLlxuICBJMThuLm1pc3NpbmdUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uKHNjb3BlLCBvcHRpb25zKSB7XG4gICAgLy9ndWVzcyBpbnRlbmRlZCBzdHJpbmdcbiAgICBpZih0aGlzLm1pc3NpbmdCZWhhdmlvdXIgPT0gJ2d1ZXNzJyl7XG4gICAgICAvL2dldCBvbmx5IHRoZSBsYXN0IHBvcnRpb24gb2YgdGhlIHNjb3BlXG4gICAgICB2YXIgcyA9IHNjb3BlLnNwbGl0KCcuJykuc2xpY2UoLTEpWzBdO1xuICAgICAgLy9yZXBsYWNlIHVuZGVyc2NvcmUgd2l0aCBzcGFjZSAmJiBjYW1lbGNhc2Ugd2l0aCBzcGFjZSBhbmQgbG93ZXJjYXNlIGxldHRlclxuICAgICAgcmV0dXJuICh0aGlzLm1pc3NpbmdUcmFuc2xhdGlvblByZWZpeC5sZW5ndGggPiAwID8gdGhpcy5taXNzaW5nVHJhbnNsYXRpb25QcmVmaXggOiAnJykgK1xuICAgICAgICAgIHMucmVwbGFjZSgnXycsJyAnKS5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLFxuICAgICAgICAgIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIpIHtyZXR1cm4gcDEgKyAnICcgKyBwMi50b0xvd2VyQ2FzZSgpfSApO1xuICAgIH1cblxuICAgIHZhciBsb2NhbGVGb3JUcmFuc2xhdGlvbiA9IChvcHRpb25zICE9IG51bGwgJiYgb3B0aW9ucy5sb2NhbGUgIT0gbnVsbCkgPyBvcHRpb25zLmxvY2FsZSA6IHRoaXMuY3VycmVudExvY2FsZSgpO1xuICAgIHZhciBmdWxsU2NvcGUgICAgICAgICAgID0gdGhpcy5nZXRGdWxsU2NvcGUoc2NvcGUsIG9wdGlvbnMpO1xuICAgIHZhciBmdWxsU2NvcGVXaXRoTG9jYWxlID0gW2xvY2FsZUZvclRyYW5zbGF0aW9uLCBmdWxsU2NvcGVdLmpvaW4odGhpcy5kZWZhdWx0U2VwYXJhdG9yKTtcblxuICAgIHJldHVybiAnW21pc3NpbmcgXCInICsgZnVsbFNjb3BlV2l0aExvY2FsZSArICdcIiB0cmFuc2xhdGlvbl0nO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIG1pc3NpbmcgcGxhY2Vob2xkZXIgbWVzc2FnZSBmb3IgZ2l2ZW4gcGFyYW1ldGVyc1xuICBJMThuLm1pc3NpbmdQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKHBsYWNlaG9sZGVyLCBtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFwiW21pc3NpbmcgXCIgKyBwbGFjZWhvbGRlciArIFwiIHZhbHVlXVwiO1xuICB9O1xuXG4gIEkxOG4ubnVsbFBsYWNlaG9sZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEkxOG4ubWlzc2luZ1BsYWNlaG9sZGVyLmFwcGx5KEkxOG4sIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gRm9ybWF0IG51bWJlciB1c2luZyBsb2NhbGl6YXRpb24gcnVsZXMuXG4gIC8vIFRoZSBvcHRpb25zIHdpbGwgYmUgcmV0cmlldmVkIGZyb20gdGhlIGBudW1iZXIuZm9ybWF0YCBzY29wZS5cbiAgLy8gSWYgdGhpcyBpc24ndCBwcmVzZW50LCB0aGVuIHRoZSBmb2xsb3dpbmcgb3B0aW9ucyB3aWxsIGJlIHVzZWQ6XG4gIC8vXG4gIC8vIC0gYHByZWNpc2lvbmA6IGAzYFxuICAvLyAtIGBzZXBhcmF0b3JgOiBgXCIuXCJgXG4gIC8vIC0gYGRlbGltaXRlcmA6IGBcIixcImBcbiAgLy8gLSBgc3RyaXBfaW5zaWduaWZpY2FudF96ZXJvc2A6IGBmYWxzZWBcbiAgLy9cbiAgLy8gWW91IGNhbiBhbHNvIG92ZXJyaWRlIHRoZXNlIG9wdGlvbnMgYnkgcHJvdmlkaW5nIHRoZSBgb3B0aW9uc2AgYXJndW1lbnQuXG4gIC8vXG4gIEkxOG4udG9OdW1iZXIgPSBmdW5jdGlvbihudW1iZXIsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gdGhpcy5wcmVwYXJlT3B0aW9ucyhcbiAgICAgICAgb3B0aW9uc1xuICAgICAgLCB0aGlzLmxvb2t1cChcIm51bWJlci5mb3JtYXRcIilcbiAgICAgICwgTlVNQkVSX0ZPUk1BVFxuICAgICk7XG5cbiAgICB2YXIgbmVnYXRpdmUgPSBudW1iZXIgPCAwXG4gICAgICAsIHN0cmluZyA9IHRvRml4ZWQoTWF0aC5hYnMobnVtYmVyKSwgb3B0aW9ucy5wcmVjaXNpb24pLnRvU3RyaW5nKClcbiAgICAgICwgcGFydHMgPSBzdHJpbmcuc3BsaXQoXCIuXCIpXG4gICAgICAsIHByZWNpc2lvblxuICAgICAgLCBidWZmZXIgPSBbXVxuICAgICAgLCBmb3JtYXR0ZWROdW1iZXJcbiAgICAgICwgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgXCIlblwiXG4gICAgICAsIHNpZ24gPSBuZWdhdGl2ZSA/IFwiLVwiIDogXCJcIlxuICAgIDtcblxuICAgIG51bWJlciA9IHBhcnRzWzBdO1xuICAgIHByZWNpc2lvbiA9IHBhcnRzWzFdO1xuXG4gICAgd2hpbGUgKG51bWJlci5sZW5ndGggPiAwKSB7XG4gICAgICBidWZmZXIudW5zaGlmdChudW1iZXIuc3Vic3RyKE1hdGgubWF4KDAsIG51bWJlci5sZW5ndGggLSAzKSwgMykpO1xuICAgICAgbnVtYmVyID0gbnVtYmVyLnN1YnN0cigwLCBudW1iZXIubGVuZ3RoIC0zKTtcbiAgICB9XG5cbiAgICBmb3JtYXR0ZWROdW1iZXIgPSBidWZmZXIuam9pbihvcHRpb25zLmRlbGltaXRlcik7XG5cbiAgICBpZiAob3B0aW9ucy5zdHJpcF9pbnNpZ25pZmljYW50X3plcm9zICYmIHByZWNpc2lvbikge1xuICAgICAgcHJlY2lzaW9uID0gcHJlY2lzaW9uLnJlcGxhY2UoLzArJC8sIFwiXCIpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnByZWNpc2lvbiA+IDAgJiYgcHJlY2lzaW9uKSB7XG4gICAgICBmb3JtYXR0ZWROdW1iZXIgKz0gb3B0aW9ucy5zZXBhcmF0b3IgKyBwcmVjaXNpb247XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc2lnbl9maXJzdCkge1xuICAgICAgZm9ybWF0ID0gXCIlc1wiICsgZm9ybWF0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJW5cIiwgXCIlcyVuXCIpO1xuICAgIH1cblxuICAgIGZvcm1hdHRlZE51bWJlciA9IGZvcm1hdFxuICAgICAgLnJlcGxhY2UoXCIldVwiLCBvcHRpb25zLnVuaXQpXG4gICAgICAucmVwbGFjZShcIiVuXCIsIGZvcm1hdHRlZE51bWJlcilcbiAgICAgIC5yZXBsYWNlKFwiJXNcIiwgc2lnbilcbiAgICA7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkTnVtYmVyO1xuICB9O1xuXG4gIC8vIEZvcm1hdCBjdXJyZW5jeSB3aXRoIGxvY2FsaXphdGlvbiBydWxlcy5cbiAgLy8gVGhlIG9wdGlvbnMgd2lsbCBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgYG51bWJlci5jdXJyZW5jeS5mb3JtYXRgIGFuZFxuICAvLyBgbnVtYmVyLmZvcm1hdGAgc2NvcGVzLCBpbiB0aGF0IG9yZGVyLlxuICAvL1xuICAvLyBBbnkgbWlzc2luZyBvcHRpb24gd2lsbCBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgYEkxOG4udG9OdW1iZXJgIGRlZmF1bHRzIGFuZFxuICAvLyB0aGUgZm9sbG93aW5nIG9wdGlvbnM6XG4gIC8vXG4gIC8vIC0gYHVuaXRgOiBgXCIkXCJgXG4gIC8vIC0gYHByZWNpc2lvbmA6IGAyYFxuICAvLyAtIGBmb3JtYXRgOiBgXCIldSVuXCJgXG4gIC8vIC0gYGRlbGltaXRlcmA6IGBcIixcImBcbiAgLy8gLSBgc2VwYXJhdG9yYDogYFwiLlwiYFxuICAvL1xuICAvLyBZb3UgY2FuIGFsc28gb3ZlcnJpZGUgdGhlc2Ugb3B0aW9ucyBieSBwcm92aWRpbmcgdGhlIGBvcHRpb25zYCBhcmd1bWVudC5cbiAgLy9cbiAgSTE4bi50b0N1cnJlbmN5ID0gZnVuY3Rpb24obnVtYmVyLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHRoaXMucHJlcGFyZU9wdGlvbnMoXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICwgdGhpcy5sb29rdXAoXCJudW1iZXIuY3VycmVuY3kuZm9ybWF0XCIpXG4gICAgICAsIHRoaXMubG9va3VwKFwibnVtYmVyLmZvcm1hdFwiKVxuICAgICAgLCBDVVJSRU5DWV9GT1JNQVRcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMudG9OdW1iZXIobnVtYmVyLCBvcHRpb25zKTtcbiAgfTtcblxuICAvLyBMb2NhbGl6ZSBzZXZlcmFsIHZhbHVlcy5cbiAgLy8gWW91IGNhbiBwcm92aWRlIHRoZSBmb2xsb3dpbmcgc2NvcGVzOiBgY3VycmVuY3lgLCBgbnVtYmVyYCwgb3IgYHBlcmNlbnRhZ2VgLlxuICAvLyBJZiB5b3UgcHJvdmlkZSBhIHNjb3BlIHRoYXQgbWF0Y2hlcyB0aGUgYC9eKGRhdGV8dGltZSkvYCByZWd1bGFyIGV4cHJlc3Npb25cbiAgLy8gdGhlbiB0aGUgYHZhbHVlYCB3aWxsIGJlIGNvbnZlcnRlZCBieSB1c2luZyB0aGUgYEkxOG4udG9UaW1lYCBmdW5jdGlvbi5cbiAgLy9cbiAgLy8gSXQgd2lsbCBkZWZhdWx0IHRvIHRoZSB2YWx1ZSdzIGB0b1N0cmluZ2AgZnVuY3Rpb24uXG4gIC8vXG4gIEkxOG4ubG9jYWxpemUgPSBmdW5jdGlvbihzY29wZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgc3dpdGNoIChzY29wZSkge1xuICAgICAgY2FzZSBcImN1cnJlbmN5XCI6XG4gICAgICAgIHJldHVybiB0aGlzLnRvQ3VycmVuY3kodmFsdWUpO1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBzY29wZSA9IHRoaXMubG9va3VwKFwibnVtYmVyLmZvcm1hdFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9OdW1iZXIodmFsdWUsIHNjb3BlKTtcbiAgICAgIGNhc2UgXCJwZXJjZW50YWdlXCI6XG4gICAgICAgIHJldHVybiB0aGlzLnRvUGVyY2VudGFnZSh2YWx1ZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgbG9jYWxpemVkVmFsdWU7XG5cbiAgICAgICAgaWYgKHNjb3BlLm1hdGNoKC9eKGRhdGV8dGltZSkvKSkge1xuICAgICAgICAgIGxvY2FsaXplZFZhbHVlID0gdGhpcy50b1RpbWUoc2NvcGUsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2NhbGl6ZWRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZShsb2NhbGl6ZWRWYWx1ZSwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFBhcnNlIGEgZ2l2ZW4gYGRhdGVgIHN0cmluZyBpbnRvIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdC5cbiAgLy8gVGhpcyBmdW5jdGlvbiBpcyB0aW1lIHpvbmUgYXdhcmUuXG4gIC8vXG4gIC8vIFRoZSBmb2xsb3dpbmcgc3RyaW5nIGZvcm1hdHMgYXJlIHJlY29nbml6ZWQ6XG4gIC8vXG4gIC8vICAgIHl5eXktbW0tZGRcbiAgLy8gICAgeXl5eS1tbS1kZFsgVF1oaDptbTo6c3NcbiAgLy8gICAgeXl5eS1tbS1kZFsgVF1oaDptbTo6c3NcbiAgLy8gICAgeXl5eS1tbS1kZFsgVF1oaDptbTo6c3NaXG4gIC8vICAgIHl5eXktbW0tZGRbIFRdaGg6bW06OnNzKzAwMDBcbiAgLy8gICAgeXl5eS1tbS1kZFsgVF1oaDptbTo6c3MrMDA6MDBcbiAgLy8gICAgeXl5eS1tbS1kZFsgVF1oaDptbTo6c3MuMTIzWlxuICAvL1xuICBJMThuLnBhcnNlRGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICB2YXIgbWF0Y2hlcywgY29udmVydGVkRGF0ZSwgZnJhY3Rpb247XG4gICAgLy8gd2UgaGF2ZSBhIGRhdGUsIHNvIGp1c3QgcmV0dXJuIGl0LlxuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfTtcblxuICAgIG1hdGNoZXMgPSBkYXRlLnRvU3RyaW5nKCkubWF0Y2goLyhcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pKD86WyBUXShcXGR7Mn0pOihcXGR7Mn0pOihcXGR7Mn0pKFtcXC4sXVxcZHsxLDN9KT8pPyhafFxcKzAwOj8wMCk/Lyk7XG5cbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gNjsgaSsrKSB7XG4gICAgICAgIG1hdGNoZXNbaV0gPSBwYXJzZUludChtYXRjaGVzW2ldLCAxMCkgfHwgMDtcbiAgICAgIH1cblxuICAgICAgLy8gbW9udGggc3RhcnRzIG9uIDBcbiAgICAgIG1hdGNoZXNbMl0gLT0gMTtcblxuICAgICAgZnJhY3Rpb24gPSBtYXRjaGVzWzddID8gMTAwMCAqIChcIjBcIiArIG1hdGNoZXNbN10pIDogbnVsbDtcblxuICAgICAgaWYgKG1hdGNoZXNbOF0pIHtcbiAgICAgICAgY29udmVydGVkRGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKG1hdGNoZXNbMV0sIG1hdGNoZXNbMl0sIG1hdGNoZXNbM10sIG1hdGNoZXNbNF0sIG1hdGNoZXNbNV0sIG1hdGNoZXNbNl0sIGZyYWN0aW9uKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb252ZXJ0ZWREYXRlID0gbmV3IERhdGUobWF0Y2hlc1sxXSwgbWF0Y2hlc1syXSwgbWF0Y2hlc1szXSwgbWF0Y2hlc1s0XSwgbWF0Y2hlc1s1XSwgbWF0Y2hlc1s2XSwgZnJhY3Rpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mKGRhdGUpID09IFwibnVtYmVyXCIpIHtcbiAgICAgIC8vIFVOSVggdGltZXN0YW1wXG4gICAgICBjb252ZXJ0ZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnZlcnRlZERhdGUuc2V0VGltZShkYXRlKTtcbiAgICB9IGVsc2UgaWYgKGRhdGUubWF0Y2goLyhbQS1aXVthLXpdezJ9KSAoW0EtWl1bYS16XXsyfSkgKFxcZCspIChcXGQrOlxcZCs6XFxkKykgKFsrLV1cXGQrKSAoXFxkKykvKSkge1xuICAgICAgLy8gVGhpcyBmb3JtYXQgYFdlZCBKdWwgMjAgMTM6MDM6MzkgKzAwMDAgMjAxMWAgaXMgcGFyc2VkIGJ5XG4gICAgICAvLyB3ZWJraXQvZmlyZWZveCwgYnV0IG5vdCBieSBJRSwgc28gd2UgbXVzdCBwYXJzZSBpdCBtYW51YWxseS5cbiAgICAgIGNvbnZlcnRlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29udmVydGVkRGF0ZS5zZXRUaW1lKERhdGUucGFyc2UoW1xuICAgICAgICBSZWdFeHAuJDEsIFJlZ0V4cC4kMiwgUmVnRXhwLiQzLCBSZWdFeHAuJDYsIFJlZ0V4cC4kNCwgUmVnRXhwLiQ1XG4gICAgICBdLmpvaW4oXCIgXCIpKSk7XG4gICAgfSBlbHNlIGlmIChkYXRlLm1hdGNoKC9cXGQrIFxcZCs6XFxkKzpcXGQrIFsrLV1cXGQrIFxcZCsvKSkge1xuICAgICAgLy8gYSB2YWxpZCBqYXZhc2NyaXB0IGZvcm1hdCB3aXRoIHRpbWV6b25lIGluZm9cbiAgICAgIGNvbnZlcnRlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29udmVydGVkRGF0ZS5zZXRUaW1lKERhdGUucGFyc2UoZGF0ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhbiBhcmJpdHJhcnkgamF2YXNjcmlwdCBzdHJpbmdcbiAgICAgIGNvbnZlcnRlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29udmVydGVkRGF0ZS5zZXRUaW1lKERhdGUucGFyc2UoZGF0ZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBjb252ZXJ0ZWREYXRlO1xuICB9O1xuXG4gIC8vIEZvcm1hdHMgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGRpcmVjdGl2ZXMgaW4gdGhlIGdpdmVuIGZvcm1hdCBzdHJpbmcuXG4gIC8vIFRoZSBkaXJlY3RpdmVzIGJlZ2lucyB3aXRoIGEgcGVyY2VudCAoJSkgY2hhcmFjdGVyLiBBbnkgdGV4dCBub3QgbGlzdGVkIGFzIGFcbiAgLy8gZGlyZWN0aXZlIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIG91dHB1dCBzdHJpbmcuXG4gIC8vXG4gIC8vIFRoZSBhY2NlcHRlZCBmb3JtYXRzIGFyZTpcbiAgLy9cbiAgLy8gICAgICVhICAtIFRoZSBhYmJyZXZpYXRlZCB3ZWVrZGF5IG5hbWUgKFN1bilcbiAgLy8gICAgICVBICAtIFRoZSBmdWxsIHdlZWtkYXkgbmFtZSAoU3VuZGF5KVxuICAvLyAgICAgJWIgIC0gVGhlIGFiYnJldmlhdGVkIG1vbnRoIG5hbWUgKEphbilcbiAgLy8gICAgICVCICAtIFRoZSBmdWxsIG1vbnRoIG5hbWUgKEphbnVhcnkpXG4gIC8vICAgICAlYyAgLSBUaGUgcHJlZmVycmVkIGxvY2FsIGRhdGUgYW5kIHRpbWUgcmVwcmVzZW50YXRpb25cbiAgLy8gICAgICVkICAtIERheSBvZiB0aGUgbW9udGggKDAxLi4zMSlcbiAgLy8gICAgICUtZCAtIERheSBvZiB0aGUgbW9udGggKDEuLjMxKVxuICAvLyAgICAgJUggIC0gSG91ciBvZiB0aGUgZGF5LCAyNC1ob3VyIGNsb2NrICgwMC4uMjMpXG4gIC8vICAgICAlLUggLSBIb3VyIG9mIHRoZSBkYXksIDI0LWhvdXIgY2xvY2sgKDAuLjIzKVxuICAvLyAgICAgJUkgIC0gSG91ciBvZiB0aGUgZGF5LCAxMi1ob3VyIGNsb2NrICgwMS4uMTIpXG4gIC8vICAgICAlLUkgLSBIb3VyIG9mIHRoZSBkYXksIDEyLWhvdXIgY2xvY2sgKDEuLjEyKVxuICAvLyAgICAgJW0gIC0gTW9udGggb2YgdGhlIHllYXIgKDAxLi4xMilcbiAgLy8gICAgICUtbSAtIE1vbnRoIG9mIHRoZSB5ZWFyICgxLi4xMilcbiAgLy8gICAgICVNICAtIE1pbnV0ZSBvZiB0aGUgaG91ciAoMDAuLjU5KVxuICAvLyAgICAgJS1NIC0gTWludXRlIG9mIHRoZSBob3VyICgwLi41OSlcbiAgLy8gICAgICVwICAtIE1lcmlkaWFuIGluZGljYXRvciAoQU0gIG9yICBQTSlcbiAgLy8gICAgICVTICAtIFNlY29uZCBvZiB0aGUgbWludXRlICgwMC4uNjApXG4gIC8vICAgICAlLVMgLSBTZWNvbmQgb2YgdGhlIG1pbnV0ZSAoMC4uNjApXG4gIC8vICAgICAldyAgLSBEYXkgb2YgdGhlIHdlZWsgKFN1bmRheSBpcyAwLCAwLi42KVxuICAvLyAgICAgJXkgIC0gWWVhciB3aXRob3V0IGEgY2VudHVyeSAoMDAuLjk5KVxuICAvLyAgICAgJS15IC0gWWVhciB3aXRob3V0IGEgY2VudHVyeSAoMC4uOTkpXG4gIC8vICAgICAlWSAgLSBZZWFyIHdpdGggY2VudHVyeVxuICAvLyAgICAgJXogIC0gVGltZXpvbmUgb2Zmc2V0ICgrMDU0NSlcbiAgLy9cbiAgSTE4bi5zdHJmdGltZSA9IGZ1bmN0aW9uKGRhdGUsIGZvcm1hdCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5sb29rdXAoXCJkYXRlXCIpXG4gICAgICAsIG1lcmlkaWFuT3B0aW9ucyA9IEkxOG4ubWVyaWRpYW4oKVxuICAgIDtcblxuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIG9wdGlvbnMgPSB0aGlzLnByZXBhcmVPcHRpb25zKG9wdGlvbnMsIERBVEUpO1xuXG4gICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJMThuLnN0cmZ0aW1lKCkgcmVxdWlyZXMgYSB2YWxpZCBkYXRlIG9iamVjdCwgYnV0IHJlY2VpdmVkIGFuIGludmFsaWQgZGF0ZS4nKTtcbiAgICB9XG5cbiAgICB2YXIgd2Vla0RheSA9IGRhdGUuZ2V0RGF5KClcbiAgICAgICwgZGF5ID0gZGF0ZS5nZXREYXRlKClcbiAgICAgICwgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgLCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDFcbiAgICAgICwgaG91ciA9IGRhdGUuZ2V0SG91cnMoKVxuICAgICAgLCBob3VyMTIgPSBob3VyXG4gICAgICAsIG1lcmlkaWFuID0gaG91ciA+IDExID8gMSA6IDBcbiAgICAgICwgc2VjcyA9IGRhdGUuZ2V0U2Vjb25kcygpXG4gICAgICAsIG1pbnMgPSBkYXRlLmdldE1pbnV0ZXMoKVxuICAgICAgLCBvZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KClcbiAgICAgICwgYWJzT2Zmc2V0SG91cnMgPSBNYXRoLmZsb29yKE1hdGguYWJzKG9mZnNldCAvIDYwKSlcbiAgICAgICwgYWJzT2Zmc2V0TWludXRlcyA9IE1hdGguYWJzKG9mZnNldCkgLSAoYWJzT2Zmc2V0SG91cnMgKiA2MClcbiAgICAgICwgdGltZXpvbmVvZmZzZXQgPSAob2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCIpICtcbiAgICAgICAgICAoYWJzT2Zmc2V0SG91cnMudG9TdHJpbmcoKS5sZW5ndGggPCAyID8gXCIwXCIgKyBhYnNPZmZzZXRIb3VycyA6IGFic09mZnNldEhvdXJzKSArXG4gICAgICAgICAgKGFic09mZnNldE1pbnV0ZXMudG9TdHJpbmcoKS5sZW5ndGggPCAyID8gXCIwXCIgKyBhYnNPZmZzZXRNaW51dGVzIDogYWJzT2Zmc2V0TWludXRlcylcbiAgICA7XG5cbiAgICBpZiAoaG91cjEyID4gMTIpIHtcbiAgICAgIGhvdXIxMiA9IGhvdXIxMiAtIDEyO1xuICAgIH0gZWxzZSBpZiAoaG91cjEyID09PSAwKSB7XG4gICAgICBob3VyMTIgPSAxMjtcbiAgICB9XG5cbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShcIiVhXCIsIG9wdGlvbnMuYWJicl9kYXlfbmFtZXNbd2Vla0RheV0pO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJUFcIiwgb3B0aW9ucy5kYXlfbmFtZXNbd2Vla0RheV0pO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJWJcIiwgb3B0aW9ucy5hYmJyX21vbnRoX25hbWVzW21vbnRoXSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlQlwiLCBvcHRpb25zLm1vbnRoX25hbWVzW21vbnRoXSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlZFwiLCBwYWRkaW5nKGRheSkpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJWVcIiwgZGF5KTtcbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShcIiUtZFwiLCBkYXkpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJUhcIiwgcGFkZGluZyhob3VyKSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlLUhcIiwgaG91cik7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlSVwiLCBwYWRkaW5nKGhvdXIxMikpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJS1JXCIsIGhvdXIxMik7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlbVwiLCBwYWRkaW5nKG1vbnRoKSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlLW1cIiwgbW9udGgpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJU1cIiwgcGFkZGluZyhtaW5zKSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlLU1cIiwgbWlucyk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIlcFwiLCBtZXJpZGlhbk9wdGlvbnNbbWVyaWRpYW5dKTtcbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShcIiVTXCIsIHBhZGRpbmcoc2VjcykpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJS1TXCIsIHNlY3MpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJXdcIiwgd2Vla0RheSk7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoXCIleVwiLCBwYWRkaW5nKHllYXIpKTtcbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShcIiUteVwiLCBwYWRkaW5nKHllYXIpLnJlcGxhY2UoL14wKy8sIFwiXCIpKTtcbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShcIiVZXCIsIHllYXIpO1xuICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFwiJXpcIiwgdGltZXpvbmVvZmZzZXQpO1xuXG4gICAgcmV0dXJuIGZvcm1hdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0IHRoZSBnaXZlbiBkYXRlU3RyaW5nIGludG8gYSBmb3JtYXR0ZWQgZGF0ZS5cbiAgSTE4bi50b1RpbWUgPSBmdW5jdGlvbihzY29wZSwgZGF0ZVN0cmluZykge1xuICAgIHZhciBkYXRlID0gdGhpcy5wYXJzZURhdGUoZGF0ZVN0cmluZylcbiAgICAgICwgZm9ybWF0ID0gdGhpcy5sb29rdXAoc2NvcGUpXG4gICAgO1xuXG4gICAgaWYgKGRhdGUudG9TdHJpbmcoKS5tYXRjaCgvaW52YWxpZC9pKSkge1xuICAgICAgcmV0dXJuIGRhdGUudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgcmV0dXJuIGRhdGUudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zdHJmdGltZShkYXRlLCBmb3JtYXQpO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYSBudW1iZXIgaW50byBhIGZvcm1hdHRlZCBwZXJjZW50YWdlIHZhbHVlLlxuICBJMThuLnRvUGVyY2VudGFnZSA9IGZ1bmN0aW9uKG51bWJlciwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB0aGlzLnByZXBhcmVPcHRpb25zKFxuICAgICAgICBvcHRpb25zXG4gICAgICAsIHRoaXMubG9va3VwKFwibnVtYmVyLnBlcmNlbnRhZ2UuZm9ybWF0XCIpXG4gICAgICAsIHRoaXMubG9va3VwKFwibnVtYmVyLmZvcm1hdFwiKVxuICAgICAgLCBQRVJDRU5UQUdFX0ZPUk1BVFxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy50b051bWJlcihudW1iZXIsIG9wdGlvbnMpO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYSBudW1iZXIgaW50byBhIHJlYWRhYmxlIHNpemUgcmVwcmVzZW50YXRpb24uXG4gIEkxOG4udG9IdW1hblNpemUgPSBmdW5jdGlvbihudW1iZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIga2IgPSAxMDI0XG4gICAgICAsIHNpemUgPSBudW1iZXJcbiAgICAgICwgaXRlcmF0aW9ucyA9IDBcbiAgICAgICwgdW5pdFxuICAgICAgLCBwcmVjaXNpb25cbiAgICA7XG5cbiAgICB3aGlsZSAoc2l6ZSA+PSBrYiAmJiBpdGVyYXRpb25zIDwgNCkge1xuICAgICAgc2l6ZSA9IHNpemUgLyBrYjtcbiAgICAgIGl0ZXJhdGlvbnMgKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoaXRlcmF0aW9ucyA9PT0gMCkge1xuICAgICAgdW5pdCA9IHRoaXMudChcIm51bWJlci5odW1hbi5zdG9yYWdlX3VuaXRzLnVuaXRzLmJ5dGVcIiwge2NvdW50OiBzaXplfSk7XG4gICAgICBwcmVjaXNpb24gPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bml0ID0gdGhpcy50KFwibnVtYmVyLmh1bWFuLnN0b3JhZ2VfdW5pdHMudW5pdHMuXCIgKyBTSVpFX1VOSVRTW2l0ZXJhdGlvbnNdKTtcbiAgICAgIHByZWNpc2lvbiA9IChzaXplIC0gTWF0aC5mbG9vcihzaXplKSA9PT0gMCkgPyAwIDogMTtcbiAgICB9XG5cbiAgICBvcHRpb25zID0gdGhpcy5wcmVwYXJlT3B0aW9ucyhcbiAgICAgICAgb3B0aW9uc1xuICAgICAgLCB7dW5pdDogdW5pdCwgcHJlY2lzaW9uOiBwcmVjaXNpb24sIGZvcm1hdDogXCIlbiV1XCIsIGRlbGltaXRlcjogXCJcIn1cbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMudG9OdW1iZXIoc2l6ZSwgb3B0aW9ucyk7XG4gIH07XG5cbiAgSTE4bi5nZXRGdWxsU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgICAvLyBEZWFsIHdpdGggdGhlIHNjb3BlIGFzIGFuIGFycmF5LlxuICAgIGlmIChpc0FycmF5KHNjb3BlKSkge1xuICAgICAgc2NvcGUgPSBzY29wZS5qb2luKHRoaXMuZGVmYXVsdFNlcGFyYXRvcik7XG4gICAgfVxuXG4gICAgLy8gRGVhbCB3aXRoIHRoZSBzY29wZSBvcHRpb24gcHJvdmlkZWQgdGhyb3VnaCB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICAgIC8vXG4gICAgLy8gICAgSTE4bi50KCdoZWxsbycsIHtzY29wZTogJ2dyZWV0aW5ncyd9KTtcbiAgICAvL1xuICAgIGlmIChvcHRpb25zLnNjb3BlKSB7XG4gICAgICBzY29wZSA9IFtvcHRpb25zLnNjb3BlLCBzY29wZV0uam9pbih0aGlzLmRlZmF1bHRTZXBhcmF0b3IpO1xuICAgIH1cblxuICAgIHJldHVybiBzY29wZTtcbiAgfTtcbiAgLyoqXG4gICAqIE1lcmdlIG9iajEgd2l0aCBvYmoyIChzaGFsbG93IG1lcmdlKSwgd2l0aG91dCBtb2RpZnlpbmcgaW5wdXRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IE1lcmdlZCB2YWx1ZXMgb2Ygb2JqMSBhbmQgb2JqMlxuICAgKlxuICAgKiBJbiBvcmRlciB0byBzdXBwb3J0IEVTMywgYE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbGAgaXMgdXNlZFxuICAgKiBJZGVhIGlzIGZyb206XG4gICAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzgxNTc3MDAvb2JqZWN0LWhhcy1uby1oYXNvd25wcm9wZXJ0eS1tZXRob2QtaS1lLWl0cy11bmRlZmluZWQtaWU4XG4gICAqL1xuICBJMThuLmV4dGVuZCA9IGZ1bmN0aW9uICggb2JqMSwgb2JqMiApIHtcbiAgICBpZiAodHlwZW9mKG9iajEpID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZihvYmoyKSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2Uob2JqMSwgb2JqMik7XG4gIH07XG5cbiAgLy8gU2V0IGFsaWFzZXMsIHNvIHdlIGNhbiBzYXZlIHNvbWUgdHlwaW5nLlxuICBJMThuLnQgPSBJMThuLnRyYW5zbGF0ZTtcbiAgSTE4bi5sID0gSTE4bi5sb2NhbGl6ZTtcbiAgSTE4bi5wID0gSTE4bi5wbHVyYWxpemU7XG5cbiAgcmV0dXJuIEkxOG47XG59KSk7XG4iXSwic291cmNlUm9vdCI6IiJ9