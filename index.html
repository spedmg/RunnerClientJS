<!DOCTYPE html>
<title>RunnerClient.js Example</title>

<!-- Aspera AW4 required for using <spe-runner-uploader> -->
<script src="https://d3gcli72yxqn2z.cloudfront.net/connect/v4/connectinstaller-4.min.js"></script>
<script src="https://d3gcli72yxqn2z.cloudfront.net/connect/v4/asperaweb-4.min.js"></script>

<!-- Required polyfill for Custom Elements in all browsers other than Google Chrome. -->
<script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.0.0/webcomponents-loader.js"></script>

<script>
  (function () {
    // Asynchronously load scripts
    var loadScript = function(src) {
      return new Promise(function(resolve) {
        var script = document.createElement('script');
        script.onload = resolve;
        script.src = src;
        document.head.appendChild(script);
      });
    };

    // Wait for the webcomponentsjs polyfill to be ready
    WebComponents.waitFor(function() {
      var promises = [];

      // Fetch the additional polyfill package if there are missing features
      if (!window.Element.prototype.prepend ||
          !window.Array.prototype.includes ||
          !window.Array.prototype.find ||
          !window.Array.prototype.from ||
          !window.Array.prototype.findIndex) {
        promises.push(loadScript('dist/runner_client.polyfill.js'));
      }

      // Finally, load the Custom Element definitions
      return Promise.all(promises).then(loadScript('dist/runner_client.components.js'));
    });
  })();
</script>

<style>
  html {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  }
  * {
    box-sizing: inherit;
  }
</style>

<body>
  <p>This is an example usage of RunnerClient.js</p>

  <runner-client-configuration
    method="token"
    token="f87e66f271b48f964536e650fb29249023598123245ba239425284d3b072686d"
    environment="development"
    locale="en"
    log-level="debug">
  </runner-client-configuration>

  <pre>&lt;runner-uploader&gt;</pre>
  <runner-uploader destination-folder="42"></runner-uploader>

  <pre>&lt;runner-thumbnail-updater&gt;</pre>
  <runner-thumbnail-updater id="thumbnail-uploader" asset-item-id="422"></runner-thumbnail-updater>

  <script>
    // When assigning rich data (Arrays, Objects, etc) to an element, you must
    // add it via javascript as a property, e.g.
    let thumbs = document.getElementById('thumbnail-uploader');
    thumbs.assetItemIDs = [468, 470];
  </script>
</body>
